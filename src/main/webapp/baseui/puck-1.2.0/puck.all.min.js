/*!
 * puck.all.min.js 2016/10/12
 * @author: chenguohui
 */

var Base=function(){};Base.extend=function(a,b){var c=Base.prototype.extend;Base._prototyping=!0;var d=new this;c.call(d,a),d.base=function(){},delete Base._prototyping;var e=d.constructor,f=d.constructor=function(){if(!Base._prototyping)if(this._constructing||this.constructor==f)this._constructing=!0,e.apply(this,arguments),delete this._constructing;else if(null!=arguments[0])return(arguments[0].extend||c).call(arguments[0],d)};return f.ancestor=this,f.extend=this.extend,f.forEach=this.forEach,f.implement=this.implement,f.prototype=d,f.toString=this.toString,f.valueOf=function(a){return"object"==a?f:e.valueOf()},c.call(f,b),"function"==typeof f.init&&f.init(),f},Base.prototype={extend:function(a,b){if(arguments.length>1){var c=this[a];if(c&&"function"==typeof b&&(!c.valueOf||c.valueOf()!=b.valueOf())&&/\bbase\b/.test(b)){var d=b.valueOf();b=function(){var a=this.base||Base.prototype.base;this.base=c;var b=d.apply(this,arguments);return this.base=a,b},b.valueOf=function(a){return"object"==a?b:d},b.toString=Base.toString}this[a]=b}else if(a){var e=Base.prototype.extend;Base._prototyping||"function"==typeof this||(e=this.extend||e);for(var f={toSource:null},g=["constructor","toString","valueOf"],h=Base._prototyping?0:1;i=g[h++];)a[i]!=f[i]&&e.call(this,i,a[i]);for(var i in a)f[i]||e.call(this,i,a[i])}return this}},Base=Base.extend({constructor:function(){this.extend(arguments[0])}},{ancestor:Object,version:"1.1",forEach:function(a,b,c){for(var d in a)void 0===this.prototype[d]&&b.call(c,a[d],d,a)},implement:function(){for(var a=0;a<arguments.length;a++)"function"==typeof arguments[a]?arguments[a](this.prototype):this.prototype.extend(arguments[a]);return this},toString:function(){return String(this.valueOf())}}),window.Event=Base.extend({_callbacks:null,bind:function(a,b){var c=(this._callbacks||(this._callbacks={}),this._callbacks[a]||(this._callbacks[a]=[]));return c.push(b),this},unbind:function(a,b){var c;if(a){if(c=this._callbacks)if(b){var d=c[a];if(!d)return this;for(var e=0,f=d.length;f>e;e++)if(b===d[e]){d.splice(e,1);break}}else c[a]=[]}else this._callbacks={};return this},unbindAll:function(){for(var a in this._callbacks){for(var b in a)a[b]=null,delete a[b];a=null,delete a}},trigger:function(a){var b,c,d,e,f=!0;if(!(c=this._callbacks))return f;if(b=c[a])for(d=b.length-1;d>-1;d--){var g=b[d].apply(this,Array.prototype.slice.call(arguments,1));f=f&&0==g?!1:!0}if(b=c.all)for(d=0,e=b.length;e>d;d++){var g=b[d].apply(this,arguments);f=f&&0==g?!1:!0}return f},_handleListeners:function(){if(this.listeners instanceof Object){for(var a in this.listeners)this.bind(a,this.listeners[a]),this.listeners[a]=null;this.listeners=null}}}),function(){function a(){var a;this.extend({no:function(c){return a?a:a=c?c:"_component_"+b++ +"_"}})}var b=1;window.Component=Event.extend({vision:"1.0",el:null,opts:null,listeners:null,constructor:function(b){if(!b.el||b.el.length<1)throw new Error("no element");a.call(this),this.el=b.el,this.opts=$.extend(!0,{},this._defaultOpts,b),this.listeners=this.opts.listeners,this._handleListeners()}})}(),function(a,b){function c(b,c){var e,f,g,h=b.nodeName.toLowerCase();return"area"===h?(e=b.parentNode,f=e.name,b.href&&f&&"map"===e.nodeName.toLowerCase()?(g=a("img[usemap=#"+f+"]")[0],!!g&&d(g)):!1):(/input|select|textarea|button|object/.test(h)?!b.disabled:"a"===h?b.href||c:c)&&d(b)}function d(b){return a.expr.filters.visible(b)&&!a(b).parents().andSelf().filter(function(){return"hidden"===a.css(this,"visibility")}).length}var e=0,f=/^ui-id-\d+$/;a.ui=a.ui||{},a.ui.version||(a.extend(a.ui,{version:"1.9.2",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),a.fn.extend({_focus:a.fn.focus,focus:function(b,c){return"number"==typeof b?this.each(function(){var d=this;setTimeout(function(){a(d).focus(),c&&c.call(d)},b)}):this._focus.apply(this,arguments)},scrollParent:function(){var b;return b=a.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.css(this,"position"))&&/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(c){if(c!==b)return this.css("zIndex",c);if(this.length)for(var d,e,f=a(this[0]);f.length&&f[0]!==document;){if(d=f.css("position"),("absolute"===d||"relative"===d||"fixed"===d)&&(e=parseInt(f.css("zIndex"),10),!isNaN(e)&&0!==e))return e;f=f.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})},removeUniqueId:function(){return this.each(function(){f.test(this.id)&&a(this).removeAttr("id")})}}),a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)}}):function(b,c,d){return!!a.data(b,d[3])},focusable:function(b){return c(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var d=a.attr(b,"tabindex"),e=isNaN(d);return(e||d>=0)&&c(b,!e)}}),a(function(){var b=document.body,c=b.appendChild(c=document.createElement("div"));c.offsetHeight,a.extend(c.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),a.support.minHeight=100===c.offsetHeight,a.support.selectstart="onselectstart"in c,b.removeChild(c).style.display="none"}),a("<a>").outerWidth(1).jquery||a.each(["Width","Height"],function(c,d){function e(b,c,d,e){return a.each(f,function(){c-=parseFloat(a.css(b,"padding"+this))||0,d&&(c-=parseFloat(a.css(b,"border"+this+"Width"))||0),e&&(c-=parseFloat(a.css(b,"margin"+this))||0)}),c}var f="Width"===d?["Left","Right"]:["Top","Bottom"],g=d.toLowerCase(),h={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(c){return c===b?h["inner"+d].call(this):this.each(function(){a(this).css(g,e(this,c)+"px")})},a.fn["outer"+d]=function(b,c){return"number"!=typeof b?h["outer"+d].call(this,b):this.each(function(){a(this).css(g,e(this,b,!0,c)+"px")})}}),a("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(a.fn.removeData=function(b){return function(c){return arguments.length?b.call(this,a.camelCase(c)):b.call(this)}}(a.fn.removeData)),function(){var b=/msie ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||[];a.ui.ie=b.length?!0:!1,a.ui.ie6=6===parseFloat(b[1],10)}(),a.fn.extend({disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a.extend(a.ui,{plugin:{add:function(b,c,d){var e,f=a.ui[b].prototype;for(e in d)f.plugins[e]=f.plugins[e]||[],f.plugins[e].push([c,d[e]])},call:function(a,b,c){var d,e=a.plugins[b];if(e&&a.element[0].parentNode&&11!==a.element[0].parentNode.nodeType)for(d=0;d<e.length;d++)a.options[e[d][0]]&&e[d][1].apply(a.element,c)}},contains:a.contains,hasScroll:function(b,c){if("hidden"===a(b).css("overflow"))return!1;var d=c&&"left"===c?"scrollLeft":"scrollTop",e=!1;return b[d]>0?!0:(b[d]=1,e=b[d]>0,b[d]=0,e)},isOverAxis:function(a,b,c){return a>b&&b+c>a},isOver:function(b,c,d,e,f,g){return a.ui.isOverAxis(b,d,f)&&a.ui.isOverAxis(c,e,g)}}))}(jQuery),function(a,b){var c=0,d=Array.prototype.slice,e=a.cleanData;a.cleanData=function(b){for(var c,d=0;null!=(c=b[d]);d++)try{a(c).triggerHandler("remove")}catch(f){}e(b)},a.widget=function(b,c,d){var e,f,g,h,i=b.split(".")[0];b=b.split(".")[1],e=i+"-"+b,d||(d=c,c=a.Widget),a.expr[":"][e.toLowerCase()]=function(b){return!!a.data(b,e)},a[i]=a[i]||{},f=a[i][b],g=a[i][b]=function(a,b){return this._createWidget?void(arguments.length&&this._createWidget(a,b)):new g(a,b)},a.extend(g,f,{version:d.version,_proto:a.extend({},d),_childConstructors:[]}),h=new c,h.options=a.widget.extend({},h.options),a.each(d,function(b,e){a.isFunction(e)&&(d[b]=function(){var a=function(){return c.prototype[b].apply(this,arguments)},d=function(a){return c.prototype[b].apply(this,a)};return function(){var b,c=this._super,f=this._superApply;return this._super=a,this._superApply=d,b=e.apply(this,arguments),this._super=c,this._superApply=f,b}}())}),g.prototype=a.widget.extend(h,{widgetEventPrefix:f?h.widgetEventPrefix:b},d,{constructor:g,namespace:i,widgetName:b,widgetBaseClass:e,widgetFullName:e}),f?(a.each(f._childConstructors,function(b,c){var d=c.prototype;a.widget(d.namespace+"."+d.widgetName,g,c._proto)}),delete f._childConstructors):c._childConstructors.push(g),a.widget.bridge(b,g)},a.widget.extend=function(c){for(var e,f,g=d.call(arguments,1),h=0,i=g.length;i>h;h++)for(e in g[h])f=g[h][e],g[h].hasOwnProperty(e)&&f!==b&&(c[e]=a.isPlainObject(f)?a.isPlainObject(c[e])?a.widget.extend({},c[e],f):a.widget.extend({},f):f);return c},a.widget.bridge=function(c,e){var f=e.prototype.widgetFullName||c;a.fn[c]=function(g){var h="string"==typeof g,i=d.call(arguments,1),j=this;return g=!h&&i.length?a.widget.extend.apply(null,[g].concat(i)):g,this.each(h?function(){var d,e=a.data(this,f);return e?a.isFunction(e[g])&&"_"!==g.charAt(0)?(d=e[g].apply(e,i),d!==e&&d!==b?(j=d&&d.jquery?j.pushStack(d.get()):d,!1):void 0):a.error("no such method '"+g+"' for "+c+" widget instance"):a.error("cannot call methods on "+c+" prior to initialization; attempted to call method '"+g+"'")}:function(){var b=a.data(this,f);b?b.option(g||{})._init():a.data(this,f,new e(g,this))}),j}},a.Widget=function(){},a.Widget._childConstructors=[],a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(b,d){d=a(d||this.defaultElement||this)[0],this.element=a(d),this.uuid=c++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=a.widget.extend({},this.options,this._getCreateOptions(),b),this.bindings=a(),this.hoverable=a(),this.focusable=a(),d!==this&&(a.data(d,this.widgetName,this),a.data(d,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===d&&this.destroy()}}),this.document=a(d.style?d.ownerDocument:d.document||d),this.window=a(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:a.noop,_getCreateEventData:a.noop,_create:a.noop,_init:a.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(a.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:a.noop,widget:function(){return this.element},option:function(c,d){var e,f,g,h=c;if(0===arguments.length)return a.widget.extend({},this.options);if("string"==typeof c)if(h={},e=c.split("."),c=e.shift(),e.length){for(f=h[c]=a.widget.extend({},this.options[c]),g=0;g<e.length-1;g++)f[e[g]]=f[e[g]]||{},f=f[e[g]];if(c=e.pop(),d===b)return f[c]===b?null:f[c];f[c]=d}else{if(d===b)return this.options[c]===b?null:this.options[c];h[c]=d}return this._setOptions(h),this},_setOptions:function(a){var b;for(b in a)this._setOption(b,a[b]);return this},_setOption:function(a,b){return this.options[a]=b,"disabled"===a&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!b).attr("aria-disabled",b),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(b,c,d){var e,f=this;"boolean"!=typeof b&&(d=c,c=b,b=!1),d?(c=e=a(c),this.bindings=this.bindings.add(c)):(d=c,c=this.element,e=this.widget()),a.each(d,function(d,g){function h(){return b||f.options.disabled!==!0&&!a(this).hasClass("ui-state-disabled")?("string"==typeof g?f[g]:g).apply(f,arguments):void 0}"string"!=typeof g&&(h.guid=g.guid=g.guid||h.guid||a.guid++);var i=d.match(/^(\w+)\s*(.*)$/),j=i[1]+f.eventNamespace,k=i[2];k?e.delegate(k,j,h):c.bind(j,h)})},_off:function(a,b){b=(b||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,a.unbind(b).undelegate(b)},_delay:function(a,b){function c(){return("string"==typeof a?d[a]:a).apply(d,arguments)}var d=this;return setTimeout(c,b||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b),this._on(b,{mouseenter:function(b){a(b.currentTarget).addClass("ui-state-hover")},mouseleave:function(b){a(b.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(b){this.focusable=this.focusable.add(b),this._on(b,{focusin:function(b){a(b.currentTarget).addClass("ui-state-focus")},focusout:function(b){a(b.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(b,c,d){var e,f,g=this.options[b];if(d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent)for(e in f)e in c||(c[e]=f[e]);return this.element.trigger(c,d),!(a.isFunction(g)&&g.apply(this.element[0],[c].concat(d))===!1||c.isDefaultPrevented())}},a.each({show:"fadeIn",hide:"fadeOut"},function(b,c){a.Widget.prototype["_"+b]=function(d,e,f){"string"==typeof e&&(e={effect:e});var g,h=e?e===!0||"number"==typeof e?c:e.effect||c:b;e=e||{},"number"==typeof e&&(e={duration:e}),g=!a.isEmptyObject(e),e.complete=f,e.delay&&d.delay(e.delay),g&&a.effects&&(a.effects.effect[h]||a.uiBackCompat!==!1&&a.effects[h])?d[b](e):h!==b&&d[h]?d[h](e.duration,e.easing,f):d.queue(function(c){a(this)[b](),f&&f.call(d[0]),c()})}}),a.uiBackCompat!==!1&&(a.Widget.prototype._getCreateOptions=function(){return a.metadata&&a.metadata.get(this.element[0])[this.widgetName]})}(jQuery),function(a){var b=!1;a(document).mouseup(function(){b=!1}),a.widget("ui.mouse",{version:"1.9.2",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(c){return!0===a.data(c.target,b.widgetName+".preventClickEvent")?(a.removeData(c.target,b.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(c){if(!b){this._mouseStarted&&this._mouseUp(c),this._mouseDownEvent=c;var d=this,e=1===c.which,f="string"==typeof this.options.cancel&&c.target.nodeName?a(c.target).closest(this.options.cancel).length:!1;return e&&!f&&this._mouseCapture(c)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){d.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(c)&&this._mouseDelayMet(c)&&(this._mouseStarted=this._mouseStart(c)!==!1,!this._mouseStarted)?(c.preventDefault(),!0):(!0===a.data(c.target,this.widgetName+".preventClickEvent")&&a.removeData(c.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return d._mouseMove(a)},this._mouseUpDelegate=function(a){return d._mouseUp(a)},a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),c.preventDefault(),b=!0,!0)):!0}},_mouseMove:function(b){return!a.ui.ie||document.documentMode>=9||b.button?this._mouseStarted?(this._mouseDrag(b),b.preventDefault()):(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,b)!==!1,this._mouseStarted?this._mouseDrag(b):this._mouseUp(b)),!this._mouseStarted):this._mouseUp(b)},_mouseUp:function(b){return a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,b.target===this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b)),!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(a,b){function c(a,b,c){return[parseInt(a[0],10)*(m.test(a[0])?b/100:1),parseInt(a[1],10)*(m.test(a[1])?c/100:1)]}function d(b,c){return parseInt(a.css(b,c),10)||0}a.ui=a.ui||{};var e,f=Math.max,g=Math.abs,h=Math.round,i=/left|center|right/,j=/top|center|bottom/,k=/[\+\-]\d+%?/,l=/^\w+/,m=/%$/,n=a.fn.position;a.position={scrollbarWidth:function(){if(e!==b)return e;var c,d,f=a("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),g=f.children()[0];return a("body").append(f),c=g.offsetWidth,f.css("overflow","scroll"),d=g.offsetWidth,c===d&&(d=f[0].clientWidth),f.remove(),e=c-d},getScrollInfo:function(b){var c=b.isWindow?"":b.element.css("overflow-x"),d=b.isWindow?"":b.element.css("overflow-y"),e="scroll"===c||"auto"===c&&b.width<b.element[0].scrollWidth,f="scroll"===d||"auto"===d&&b.height<b.element[0].scrollHeight;return{width:e?a.position.scrollbarWidth():0,height:f?a.position.scrollbarWidth():0}},getWithinInfo:function(b){var c=a(b||window),d=a.isWindow(c[0]);return{element:c,isWindow:d,offset:c.offset()||{left:0,top:0},scrollLeft:c.scrollLeft(),scrollTop:c.scrollTop(),width:d?c.width():c.outerWidth(),height:d?c.height():c.outerHeight()}}},a.fn.position=function(b){if(!b||!b.of)return n.apply(this,arguments);b=a.extend({},b);var e,m,o,p,q,r=a(b.of),s=a.position.getWithinInfo(b.within),t=a.position.getScrollInfo(s),u=r[0],v=(b.collision||"flip").split(" "),w={};return 9===u.nodeType?(m=r.width(),o=r.height(),p={top:0,left:0}):a.isWindow(u)?(m=r.width(),o=r.height(),p={top:r.scrollTop(),left:r.scrollLeft()}):u.preventDefault?(b.at="left top",m=o=0,p={top:u.pageY,left:u.pageX}):(m=r.outerWidth(),o=r.outerHeight(),p=r.offset()),q=a.extend({},p),a.each(["my","at"],function(){var a,c,d=(b[this]||"").split(" ");1===d.length&&(d=i.test(d[0])?d.concat(["center"]):j.test(d[0])?["center"].concat(d):["center","center"]),d[0]=i.test(d[0])?d[0]:"center",d[1]=j.test(d[1])?d[1]:"center",a=k.exec(d[0]),c=k.exec(d[1]),w[this]=[a?a[0]:0,c?c[0]:0],b[this]=[l.exec(d[0])[0],l.exec(d[1])[0]]}),1===v.length&&(v[1]=v[0]),"right"===b.at[0]?q.left+=m:"center"===b.at[0]&&(q.left+=m/2),"bottom"===b.at[1]?q.top+=o:"center"===b.at[1]&&(q.top+=o/2),e=c(w.at,m,o),q.left+=e[0],q.top+=e[1],this.each(function(){var i,j,k=a(this),l=k.outerWidth(),n=k.outerHeight(),u=d(this,"marginLeft"),x=d(this,"marginTop"),y=l+u+d(this,"marginRight")+t.width,z=n+x+d(this,"marginBottom")+t.height,A=a.extend({},q),B=c(w.my,k.outerWidth(),k.outerHeight());"right"===b.my[0]?A.left-=l:"center"===b.my[0]&&(A.left-=l/2),"bottom"===b.my[1]?A.top-=n:"center"===b.my[1]&&(A.top-=n/2),A.left+=B[0],A.top+=B[1],a.support.offsetFractions||(A.left=h(A.left),A.top=h(A.top)),i={marginLeft:u,marginTop:x},a.each(["left","top"],function(c,d){a.ui.position[v[c]]&&a.ui.position[v[c]][d](A,{targetWidth:m,targetHeight:o,elemWidth:l,elemHeight:n,collisionPosition:i,collisionWidth:y,collisionHeight:z,offset:[e[0]+B[0],e[1]+B[1]],my:b.my,at:b.at,within:s,elem:k})}),a.fn.bgiframe&&k.bgiframe(),b.using&&(j=function(a){var c=p.left-A.left,d=c+m-l,e=p.top-A.top,h=e+o-n,i={target:{element:r,left:p.left,top:p.top,width:m,height:o},element:{element:k,left:A.left,top:A.top,width:l,height:n},horizontal:0>d?"left":c>0?"right":"center",vertical:0>h?"top":e>0?"bottom":"middle"};l>m&&g(c+d)<m&&(i.horizontal="center"),n>o&&g(e+h)<o&&(i.vertical="middle"),i.important=f(g(c),g(d))>f(g(e),g(h))?"horizontal":"vertical",b.using.call(this,a,i)}),k.offset(a.extend(A,{using:j}))})},a.ui.position={fit:{left:function(a,b){var c,d=b.within,e=d.isWindow?d.scrollLeft:d.offset.left,g=d.width,h=a.left-b.collisionPosition.marginLeft,i=e-h,j=h+b.collisionWidth-g-e;b.collisionWidth>g?i>0&&0>=j?(c=a.left+i+b.collisionWidth-g-e,a.left+=i-c):a.left=j>0&&0>=i?e:i>j?e+g-b.collisionWidth:e:i>0?a.left+=i:j>0?a.left-=j:a.left=f(a.left-h,a.left)},top:function(a,b){var c,d=b.within,e=d.isWindow?d.scrollTop:d.offset.top,g=b.within.height,h=a.top-b.collisionPosition.marginTop,i=e-h,j=h+b.collisionHeight-g-e;b.collisionHeight>g?i>0&&0>=j?(c=a.top+i+b.collisionHeight-g-e,a.top+=i-c):a.top=j>0&&0>=i?e:i>j?e+g-b.collisionHeight:e:i>0?a.top+=i:j>0?a.top-=j:a.top=f(a.top-h,a.top)}},flip:{left:function(a,b){var c,d,e=b.within,f=e.offset.left+e.scrollLeft,h=e.width,i=e.isWindow?e.scrollLeft:e.offset.left,j=a.left-b.collisionPosition.marginLeft,k=j-i,l=j+b.collisionWidth-h-i,m="left"===b.my[0]?-b.elemWidth:"right"===b.my[0]?b.elemWidth:0,n="left"===b.at[0]?b.targetWidth:"right"===b.at[0]?-b.targetWidth:0,o=-2*b.offset[0];0>k?(c=a.left+m+n+o+b.collisionWidth-h-f,(0>c||c<g(k))&&(a.left+=m+n+o)):l>0&&(d=a.left-b.collisionPosition.marginLeft+m+n+o-i,(d>0||g(d)<l)&&(a.left+=m+n+o))},top:function(a,b){var c,d,e=b.within,f=e.offset.top+e.scrollTop,h=e.height,i=e.isWindow?e.scrollTop:e.offset.top,j=a.top-b.collisionPosition.marginTop,k=j-i,l=j+b.collisionHeight-h-i,m="top"===b.my[1],n=m?-b.elemHeight:"bottom"===b.my[1]?b.elemHeight:0,o="top"===b.at[1]?b.targetHeight:"bottom"===b.at[1]?-b.targetHeight:0,p=-2*b.offset[1];0>k?(d=a.top+n+o+p+b.collisionHeight-h-f,a.top+n+o+p>k&&(0>d||d<g(k))&&(a.top+=n+o+p)):l>0&&(c=a.top-b.collisionPosition.marginTop+n+o+p-i,a.top+n+o+p>l&&(c>0||g(c)<l)&&(a.top+=n+o+p))}},flipfit:{left:function(){a.ui.position.flip.left.apply(this,arguments),a.ui.position.fit.left.apply(this,arguments)},top:function(){a.ui.position.flip.top.apply(this,arguments),a.ui.position.fit.top.apply(this,arguments)}}},function(){var b,c,d,e,f,g=document.getElementsByTagName("body")[0],h=document.createElement("div");b=document.createElement(g?"div":"body"),d={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},g&&a.extend(d,{position:"absolute",left:"-1000px",top:"-1000px"});for(f in d)b.style[f]=d[f];b.appendChild(h),c=g||document.documentElement,c.insertBefore(b,c.firstChild),h.style.cssText="position: absolute; left: 10.7432222px;",e=a(h).offset().left,a.support.offsetFractions=e>10&&11>e,b.innerHTML="",c.removeChild(b)}(),a.uiBackCompat!==!1&&!function(a){var c=a.fn.position;a.fn.position=function(d){if(!d||!d.offset)return c.call(this,d);var e=d.offset.split(" "),f=d.at.split(" ");return 1===e.length&&(e[1]=e[0]),/^\d/.test(e[0])&&(e[0]="+"+e[0]),/^\d/.test(e[1])&&(e[1]="+"+e[1]),1===f.length&&(/left|center|right/.test(f[0])?f[1]="center":(f[1]=f[0],f[0]="center")),c.call(this,a.extend(d,{at:f[0]+e[0]+" "+f[1]+e[1],offset:b}))}}(jQuery)}(jQuery),function(a){a.widget("ui.draggable",a.ui.mouse,{version:"1.9.2",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){"original"!=this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(b){var c=this.options;return this.helper||c.disabled||a(b.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(b),this.handle?(a(c.iframeFix===!0?"iframe":c.iframeFix).each(function(){a('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(a(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(b){var c=this.options;return this.helper=this._createHelper(b),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),a.ui.ddmanager&&(a.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt),c.containment&&this._setContainment(),this._trigger("start",b)===!1?(this._clear(),!1):(this._cacheHelperProportions(),a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this._mouseDrag(b,!0),a.ui.ddmanager&&a.ui.ddmanager.dragStart(this,b),!0)},_mouseDrag:function(b,c){if(this.position=this._generatePosition(b),this.positionAbs=this._convertPositionTo("absolute"),!c){var d=this._uiHash();if(this._trigger("drag",b,d)===!1)return this._mouseUp({}),!1;this.position=d.position}return this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px"),a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),!1},_mouseStop:function(b){var c=!1;a.ui.ddmanager&&!this.options.dropBehaviour&&(c=a.ui.ddmanager.drop(this,b)),this.dropped&&(c=this.dropped,this.dropped=!1);for(var d=this.element[0],e=!1;d&&(d=d.parentNode);)d==document&&(e=!0);if(!e&&"original"===this.options.helper)return!1;if("invalid"==this.options.revert&&!c||"valid"==this.options.revert&&c||this.options.revert===!0||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,c)){var f=this;a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){f._trigger("stop",b)!==!1&&f._clear()})}else this._trigger("stop",b)!==!1&&this._clear();return!1},_mouseUp:function(b){return a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),a.ui.ddmanager&&a.ui.ddmanager.dragStop(this,b),a.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(b){var c=this.options.handle&&a(this.options.handle,this.element).length?!1:!0;return a(this.options.handle,this.element).find("*").andSelf().each(function(){this==b.target&&(c=!0)}),c},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b])):"clone"==c.helper?this.element.clone().removeAttr("id"):this.element;return d.parents("body").length||d.appendTo("parent"==c.appendTo?this.element[0].parentNode:c.appendTo),d[0]==this.element[0]||/(fixed|absolute)/.test(d.css("position"))||d.css("position","absolute"),d},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&a.ui.ie)&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var a=this.element.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b=this.options;if("parent"==b.containment&&(b.containment=this.helper[0].parentNode),("document"==b.containment||"window"==b.containment)&&(this.containment=["document"==b.containment?0:a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"==b.containment?0:a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"==b.containment?0:a(window).scrollLeft())+a("document"==b.containment?document:window).width()-this.helperProportions.width-this.margins.left,("document"==b.containment?0:a(window).scrollTop())+(a("document"==b.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(b.containment)||b.containment.constructor==Array)b.containment.constructor==Array&&(this.containment=b.containment);else{var c=a(b.containment),d=c[0];if(!d)return;var e=(c.offset(),"hidden"!=a(d).css("overflow"));this.containment=[(parseInt(a(d).css("borderLeftWidth"),10)||0)+(parseInt(a(d).css("paddingLeft"),10)||0),(parseInt(a(d).css("borderTopWidth"),10)||0)+(parseInt(a(d).css("paddingTop"),10)||0),(e?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(a(d).css("borderLeftWidth"),10)||0)-(parseInt(a(d).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(a(d).css("borderTopWidth"),10)||0)-(parseInt(a(d).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=c}},_convertPositionTo:function(b,c){c||(c=this.position);var d="absolute"==b?1:-1,e=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),f=/(html|body)/i.test(e[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-("fixed"==this.cssPosition?-this.scrollParent.scrollTop():f?0:e.scrollTop())*d,left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():f?0:e.scrollLeft())*d}},_generatePosition:function(b){var c=this.options,d="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,e=/(html|body)/i.test(d[0].tagName),f=b.pageX,g=b.pageY;if(this.originalPosition){var h;if(this.containment){if(this.relative_container){var i=this.relative_container.offset();h=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top];

}else h=this.containment;b.pageX-this.offset.click.left<h[0]&&(f=h[0]+this.offset.click.left),b.pageY-this.offset.click.top<h[1]&&(g=h[1]+this.offset.click.top),b.pageX-this.offset.click.left>h[2]&&(f=h[2]+this.offset.click.left),b.pageY-this.offset.click.top>h[3]&&(g=h[3]+this.offset.click.top)}if(c.grid){var j=c.grid[1]?this.originalPageY+Math.round((g-this.originalPageY)/c.grid[1])*c.grid[1]:this.originalPageY;g=h&&(j-this.offset.click.top<h[1]||j-this.offset.click.top>h[3])?j-this.offset.click.top<h[1]?j+c.grid[1]:j-c.grid[1]:j;var k=c.grid[0]?this.originalPageX+Math.round((f-this.originalPageX)/c.grid[0])*c.grid[0]:this.originalPageX;f=h&&(k-this.offset.click.left<h[0]||k-this.offset.click.left>h[2])?k-this.offset.click.left<h[0]?k+c.grid[0]:k-c.grid[0]:k}}return{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"==this.cssPosition?-this.scrollParent.scrollTop():e?0:d.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():e?0:d.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]==this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(b,c,d){return d=d||this._uiHash(),a.ui.plugin.call(this,b,[c,d]),"drag"==b&&(this.positionAbs=this._convertPositionTo("absolute")),a.Widget.prototype._trigger.call(this,b,c,d)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),a.ui.plugin.add("draggable","connectToSortable",{start:function(b,c){var d=a(this).data("draggable"),e=d.options,f=a.extend({},c,{item:d.element});d.sortables=[],a(e.connectToSortable).each(function(){var c=a.data(this,"sortable");c&&!c.options.disabled&&(d.sortables.push({instance:c,shouldRevert:c.options.revert}),c.refreshPositions(),c._trigger("activate",b,f))})},stop:function(b,c){var d=a(this).data("draggable"),e=a.extend({},c,{item:d.element});a.each(d.sortables,function(){this.instance.isOver?(this.instance.isOver=0,d.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(b),this.instance.options.helper=this.instance.options._helper,"original"==d.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",b,e))})},drag:function(b,c){var d=a(this).data("draggable"),e=this;a.each(d.sortables,function(){var f=!1,g=this;this.instance.positionAbs=d.positionAbs,this.instance.helperProportions=d.helperProportions,this.instance.offset.click=d.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(f=!0,a.each(d.sortables,function(){return this.instance.positionAbs=d.positionAbs,this.instance.helperProportions=d.helperProportions,this.instance.offset.click=d.offset.click,this!=g&&this.instance._intersectsWith(this.instance.containerCache)&&a.ui.contains(g.instance.element[0],this.instance.element[0])&&(f=!1),f})),f?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=a(e).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return c.helper[0]},b.target=this.instance.currentItem[0],this.instance._mouseCapture(b,!0),this.instance._mouseStart(b,!0,!0),this.instance.offset.click.top=d.offset.click.top,this.instance.offset.click.left=d.offset.click.left,this.instance.offset.parent.left-=d.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=d.offset.parent.top-this.instance.offset.parent.top,d._trigger("toSortable",b),d.dropped=this.instance.element,d.currentItem=d.element,this.instance.fromOutside=d),this.instance.currentItem&&this.instance._mouseDrag(b)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",b,this.instance._uiHash(this.instance)),this.instance._mouseStop(b,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),d._trigger("fromSortable",b),d.dropped=!1)})}}),a.ui.plugin.add("draggable","cursor",{start:function(){var b=a("body"),c=a(this).data("draggable").options;b.css("cursor")&&(c._cursor=b.css("cursor")),b.css("cursor",c.cursor)},stop:function(){var b=a(this).data("draggable").options;b._cursor&&a("body").css("cursor",b._cursor)}}),a.ui.plugin.add("draggable","opacity",{start:function(b,c){var d=a(c.helper),e=a(this).data("draggable").options;d.css("opacity")&&(e._opacity=d.css("opacity")),d.css("opacity",e.opacity)},stop:function(b,c){var d=a(this).data("draggable").options;d._opacity&&a(c.helper).css("opacity",d._opacity)}}),a.ui.plugin.add("draggable","scroll",{start:function(){var b=a(this).data("draggable");b.scrollParent[0]!=document&&"HTML"!=b.scrollParent[0].tagName&&(b.overflowOffset=b.scrollParent.offset())},drag:function(b){var c=a(this).data("draggable"),d=c.options,e=!1;c.scrollParent[0]!=document&&"HTML"!=c.scrollParent[0].tagName?(d.axis&&"x"==d.axis||(c.overflowOffset.top+c.scrollParent[0].offsetHeight-b.pageY<d.scrollSensitivity?c.scrollParent[0].scrollTop=e=c.scrollParent[0].scrollTop+d.scrollSpeed:b.pageY-c.overflowOffset.top<d.scrollSensitivity&&(c.scrollParent[0].scrollTop=e=c.scrollParent[0].scrollTop-d.scrollSpeed)),d.axis&&"y"==d.axis||(c.overflowOffset.left+c.scrollParent[0].offsetWidth-b.pageX<d.scrollSensitivity?c.scrollParent[0].scrollLeft=e=c.scrollParent[0].scrollLeft+d.scrollSpeed:b.pageX-c.overflowOffset.left<d.scrollSensitivity&&(c.scrollParent[0].scrollLeft=e=c.scrollParent[0].scrollLeft-d.scrollSpeed))):(d.axis&&"x"==d.axis||(b.pageY-a(document).scrollTop()<d.scrollSensitivity?e=a(document).scrollTop(a(document).scrollTop()-d.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<d.scrollSensitivity&&(e=a(document).scrollTop(a(document).scrollTop()+d.scrollSpeed))),d.axis&&"y"==d.axis||(b.pageX-a(document).scrollLeft()<d.scrollSensitivity?e=a(document).scrollLeft(a(document).scrollLeft()-d.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<d.scrollSensitivity&&(e=a(document).scrollLeft(a(document).scrollLeft()+d.scrollSpeed)))),e!==!1&&a.ui.ddmanager&&!d.dropBehaviour&&a.ui.ddmanager.prepareOffsets(c,b)}}),a.ui.plugin.add("draggable","snap",{start:function(){var b=a(this).data("draggable"),c=b.options;b.snapElements=[],a(c.snap.constructor!=String?c.snap.items||":data(draggable)":c.snap).each(function(){var c=a(this),d=c.offset();this!=b.element[0]&&b.snapElements.push({item:this,width:c.outerWidth(),height:c.outerHeight(),top:d.top,left:d.left})})},drag:function(b,c){for(var d=a(this).data("draggable"),e=d.options,f=e.snapTolerance,g=c.offset.left,h=g+d.helperProportions.width,i=c.offset.top,j=i+d.helperProportions.height,k=d.snapElements.length-1;k>=0;k--){var l=d.snapElements[k].left,m=l+d.snapElements[k].width,n=d.snapElements[k].top,o=n+d.snapElements[k].height;if(g>l-f&&m+f>g&&i>n-f&&o+f>i||g>l-f&&m+f>g&&j>n-f&&o+f>j||h>l-f&&m+f>h&&i>n-f&&o+f>i||h>l-f&&m+f>h&&j>n-f&&o+f>j){if("inner"!=e.snapMode){var p=Math.abs(n-j)<=f,q=Math.abs(o-i)<=f,r=Math.abs(l-h)<=f,s=Math.abs(m-g)<=f;p&&(c.position.top=d._convertPositionTo("relative",{top:n-d.helperProportions.height,left:0}).top-d.margins.top),q&&(c.position.top=d._convertPositionTo("relative",{top:o,left:0}).top-d.margins.top),r&&(c.position.left=d._convertPositionTo("relative",{top:0,left:l-d.helperProportions.width}).left-d.margins.left),s&&(c.position.left=d._convertPositionTo("relative",{top:0,left:m}).left-d.margins.left)}var t=p||q||r||s;if("outer"!=e.snapMode){var p=Math.abs(n-i)<=f,q=Math.abs(o-j)<=f,r=Math.abs(l-g)<=f,s=Math.abs(m-h)<=f;p&&(c.position.top=d._convertPositionTo("relative",{top:n,left:0}).top-d.margins.top),q&&(c.position.top=d._convertPositionTo("relative",{top:o-d.helperProportions.height,left:0}).top-d.margins.top),r&&(c.position.left=d._convertPositionTo("relative",{top:0,left:l}).left-d.margins.left),s&&(c.position.left=d._convertPositionTo("relative",{top:0,left:m-d.helperProportions.width}).left-d.margins.left)}!d.snapElements[k].snapping&&(p||q||r||s||t)&&d.options.snap.snap&&d.options.snap.snap.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[k].item})),d.snapElements[k].snapping=p||q||r||s||t}else d.snapElements[k].snapping&&d.options.snap.release&&d.options.snap.release.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[k].item})),d.snapElements[k].snapping=!1}}}),a.ui.plugin.add("draggable","stack",{start:function(){var b=a(this).data("draggable").options,c=a.makeArray(a(b.stack)).sort(function(b,c){return(parseInt(a(b).css("zIndex"),10)||0)-(parseInt(a(c).css("zIndex"),10)||0)});if(c.length){var d=parseInt(c[0].style.zIndex)||0;a(c).each(function(a){this.style.zIndex=d+a}),this[0].style.zIndex=d+c.length}}}),a.ui.plugin.add("draggable","zIndex",{start:function(b,c){var d=a(c.helper),e=a(this).data("draggable").options;d.css("zIndex")&&(e._zIndex=d.css("zIndex")),d.css("zIndex",e.zIndex)},stop:function(b,c){var d=a(this).data("draggable").options;d._zIndex&&a(c.helper).css("zIndex",d._zIndex)}})}(jQuery),function(a){a.widget("ui.resizable",a.ui.mouse,{version:"1.9.2",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1e3},_create:function(){var b=this,c=this.options;if(this.element.addClass("ui-resizable"),a.extend(this,{_aspectRatio:!!c.aspectRatio,aspectRatio:c.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:c.helper||c.ghost||c.animate?c.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(a('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=c.handles||(a(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor==String){"all"==this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw");var d=this.handles.split(",");this.handles={};for(var e=0;e<d.length;e++){var f=a.trim(d[e]),g="ui-resizable-"+f,h=a('<div class="ui-resizable-handle '+g+'"></div>');h.css({zIndex:c.zIndex}),"se"==f&&h.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[f]=".ui-resizable-"+f,this.element.append(h)}}this._renderAxis=function(b){b=b||this.element;for(var c in this.handles){if(this.handles[c].constructor==String&&(this.handles[c]=a(this.handles[c],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var d=a(this.handles[c],this.element),e=0;e=/sw|ne|nw|se|n|s/.test(c)?d.outerHeight():d.outerWidth();var f=["padding",/ne|nw|n/.test(c)?"Top":/se|sw|s/.test(c)?"Bottom":/^e$/.test(c)?"Right":"Left"].join("");b.css(f,e),this._proportionallyResize()}a(this.handles[c]).length}},this._renderAxis(this.element),this._handles=a(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){if(!b.resizing){if(this.className)var a=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);b.axis=a&&a[1]?a[1]:"se"}}),c.autoHide&&(this._handles.hide(),a(this.element).addClass("ui-resizable-autohide").mouseenter(function(){c.disabled||(a(this).removeClass("ui-resizable-autohide"),b._handles.show())}).mouseleave(function(){c.disabled||b.resizing||(a(this).addClass("ui-resizable-autohide"),b._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var b=function(b){a(b).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){b(this.element);var c=this.element;this.originalElement.css({position:c.css("position"),width:c.outerWidth(),height:c.outerHeight(),top:c.css("top"),left:c.css("left")}).insertAfter(c),c.remove()}return this.originalElement.css("resize",this.originalResizeStyle),b(this.originalElement),this},_mouseCapture:function(b){var c=!1;for(var d in this.handles)a(this.handles[d])[0]==b.target&&(c=!0);return!this.options.disabled&&c},_mouseStart:function(c){var d=this.options,e=this.element.position(),f=this.element;this.resizing=!0,this.documentScroll={top:a(document).scrollTop(),left:a(document).scrollLeft()},(f.is(".ui-draggable")||/absolute/.test(f.css("position")))&&f.css({position:"absolute",top:e.top,left:e.left}),this._renderProxy();var g=b(this.helper.css("left")),h=b(this.helper.css("top"));d.containment&&(g+=a(d.containment).scrollLeft()||0,h+=a(d.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:g,top:h},this.size=this._helper?{width:f.outerWidth(),height:f.outerHeight()}:{width:f.width(),height:f.height()},this.originalSize=this._helper?{width:f.outerWidth(),height:f.outerHeight()}:{width:f.width(),height:f.height()},this.originalPosition={left:g,top:h},this.sizeDiff={width:f.outerWidth()-f.width(),height:f.outerHeight()-f.height()},this.originalMousePosition={left:c.pageX,top:c.pageY},this.aspectRatio="number"==typeof d.aspectRatio?d.aspectRatio:this.originalSize.width/this.originalSize.height||1;var i=a(".ui-resizable-"+this.axis).css("cursor");return a("body").css("cursor","auto"==i?this.axis+"-resize":i),f.addClass("ui-resizable-resizing"),this._propagate("start",c),!0},_mouseDrag:function(a){var b=this.helper,c=(this.options,this.originalMousePosition),d=this.axis,e=a.pageX-c.left||0,f=a.pageY-c.top||0,g=this._change[d];if(!g)return!1;var h=g.apply(this,[a,e,f]);return this._updateVirtualBoundaries(a.shiftKey),(this._aspectRatio||a.shiftKey)&&(h=this._updateRatio(h,a)),h=this._respectSize(h,a),this._propagate("resize",a),b.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(h),this._trigger("resize",a,this.ui()),!1},_mouseStop:function(b){this.resizing=!1;var c=this.options,d=this;if(this._helper){var e=this._proportionallyResizeElements,f=e.length&&/textarea/i.test(e[0].nodeName),g=f&&a.ui.hasScroll(e[0],"left")?0:d.sizeDiff.height,h=f?0:d.sizeDiff.width,i={width:d.helper.width()-h,height:d.helper.height()-g},j=parseInt(d.element.css("left"),10)+(d.position.left-d.originalPosition.left)||null,k=parseInt(d.element.css("top"),10)+(d.position.top-d.originalPosition.top)||null;c.animate||this.element.css(a.extend(i,{top:k,left:j})),d.helper.height(d.size.height),d.helper.width(d.size.width),this._helper&&!c.animate&&this._proportionallyResize()}return a("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",b),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(a){var b,d,e,f,g,h=this.options;g={minWidth:c(h.minWidth)?h.minWidth:0,maxWidth:c(h.maxWidth)?h.maxWidth:1/0,minHeight:c(h.minHeight)?h.minHeight:0,maxHeight:c(h.maxHeight)?h.maxHeight:1/0},(this._aspectRatio||a)&&(b=g.minHeight*this.aspectRatio,e=g.minWidth/this.aspectRatio,d=g.maxHeight*this.aspectRatio,f=g.maxWidth/this.aspectRatio,b>g.minWidth&&(g.minWidth=b),e>g.minHeight&&(g.minHeight=e),d<g.maxWidth&&(g.maxWidth=d),f<g.maxHeight&&(g.maxHeight=f)),this._vBoundaries=g},_updateCache:function(a){this.options;this.offset=this.helper.offset(),c(a.left)&&(this.position.left=a.left),c(a.top)&&(this.position.top=a.top),c(a.height)&&(this.size.height=a.height),c(a.width)&&(this.size.width=a.width)},_updateRatio:function(a){var b=(this.options,this.position),d=this.size,e=this.axis;return c(a.height)?a.width=a.height*this.aspectRatio:c(a.width)&&(a.height=a.width/this.aspectRatio),"sw"==e&&(a.left=b.left+(d.width-a.width),a.top=null),"nw"==e&&(a.top=b.top+(d.height-a.height),a.left=b.left+(d.width-a.width)),a},_respectSize:function(a,b){var d=(this.helper,this._vBoundaries),e=(this._aspectRatio||b.shiftKey,this.axis),f=c(a.width)&&d.maxWidth&&d.maxWidth<a.width,g=c(a.height)&&d.maxHeight&&d.maxHeight<a.height,h=c(a.width)&&d.minWidth&&d.minWidth>a.width,i=c(a.height)&&d.minHeight&&d.minHeight>a.height;h&&(a.width=d.minWidth),i&&(a.height=d.minHeight),f&&(a.width=d.maxWidth),g&&(a.height=d.maxHeight);var j=this.originalPosition.left+this.originalSize.width,k=this.position.top+this.size.height,l=/sw|nw|w/.test(e),m=/nw|ne|n/.test(e);h&&l&&(a.left=j-d.minWidth),f&&l&&(a.left=j-d.maxWidth),i&&m&&(a.top=k-d.minHeight),g&&m&&(a.top=k-d.maxHeight);var n=!a.width&&!a.height;return n&&!a.left&&a.top?a.top=null:n&&!a.top&&a.left&&(a.left=null),a},_proportionallyResize:function(){this.options;if(this._proportionallyResizeElements.length)for(var b=this.helper||this.element,c=0;c<this._proportionallyResizeElements.length;c++){var d=this._proportionallyResizeElements[c];if(!this.borderDif){var e=[d.css("borderTopWidth"),d.css("borderRightWidth"),d.css("borderBottomWidth"),d.css("borderLeftWidth")],f=[d.css("paddingTop"),d.css("paddingRight"),d.css("paddingBottom"),d.css("paddingLeft")];this.borderDif=a.map(e,function(a,b){var c=parseInt(a,10)||0,d=parseInt(f[b],10)||0;return c+d})}d.css({height:b.height()-this.borderDif[0]-this.borderDif[2]||0,width:b.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var b=this.element,c=this.options;if(this.elementOffset=b.offset(),this._helper){this.helper=this.helper||a('<div style="overflow:hidden;"></div>');var d=a.ui.ie6?1:0,e=a.ui.ie6?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+e,height:this.element.outerHeight()+e,position:"absolute",left:this.elementOffset.left-d+"px",top:this.elementOffset.top-d+"px",zIndex:++c.zIndex}),this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(a,b){return{width:this.originalSize.width+b}},w:function(a,b){var c=(this.options,this.originalSize),d=this.originalPosition;return{left:d.left+b,width:c.width-b}},n:function(a,b,c){var d=(this.options,this.originalSize),e=this.originalPosition;return{top:e.top+c,height:d.height-c}},s:function(a,b,c){return{height:this.originalSize.height+c}},se:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},sw:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[b,c,d]))},ne:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},nw:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[b,c,d]))}},_propagate:function(b,c){a.ui.plugin.call(this,b,[c,this.ui()]),"resize"!=b&&this._trigger(b,c,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),a.ui.plugin.add("resizable","alsoResize",{start:function(){var b=a(this).data("resizable"),c=b.options,d=function(b){a(b).each(function(){var b=a(this);b.data("resizable-alsoresize",{width:parseInt(b.width(),10),height:parseInt(b.height(),10),left:parseInt(b.css("left"),10),top:parseInt(b.css("top"),10)})})};"object"!=typeof c.alsoResize||c.alsoResize.parentNode?d(c.alsoResize):c.alsoResize.length?(c.alsoResize=c.alsoResize[0],d(c.alsoResize)):a.each(c.alsoResize,function(a){d(a)})},resize:function(b,c){var d=a(this).data("resizable"),e=d.options,f=d.originalSize,g=d.originalPosition,h={height:d.size.height-f.height||0,width:d.size.width-f.width||0,top:d.position.top-g.top||0,left:d.position.left-g.left||0},i=function(b,d){a(b).each(function(){var b=a(this),e=a(this).data("resizable-alsoresize"),f={},g=d&&d.length?d:b.parents(c.originalElement[0]).length?["width","height"]:["width","height","top","left"];a.each(g,function(a,b){var c=(e[b]||0)+(h[b]||0);c&&c>=0&&(f[b]=c||null)}),b.css(f)})};"object"!=typeof e.alsoResize||e.alsoResize.nodeType?i(e.alsoResize):a.each(e.alsoResize,function(a,b){i(a,b)})},stop:function(){a(this).removeData("resizable-alsoresize")}}),a.ui.plugin.add("resizable","animate",{stop:function(b){var c=a(this).data("resizable"),d=c.options,e=c._proportionallyResizeElements,f=e.length&&/textarea/i.test(e[0].nodeName),g=f&&a.ui.hasScroll(e[0],"left")?0:c.sizeDiff.height,h=f?0:c.sizeDiff.width,i={width:c.size.width-h,height:c.size.height-g},j=parseInt(c.element.css("left"),10)+(c.position.left-c.originalPosition.left)||null,k=parseInt(c.element.css("top"),10)+(c.position.top-c.originalPosition.top)||null;c.element.animate(a.extend(i,k&&j?{top:k,left:j}:{}),{duration:d.animateDuration,easing:d.animateEasing,step:function(){var d={width:parseInt(c.element.css("width"),10),height:parseInt(c.element.css("height"),10),top:parseInt(c.element.css("top"),10),left:parseInt(c.element.css("left"),10)};e&&e.length&&a(e[0]).css({width:d.width,height:d.height}),c._updateCache(d),c._propagate("resize",b)}})}}),a.ui.plugin.add("resizable","containment",{start:function(){var c=a(this).data("resizable"),d=c.options,e=c.element,f=d.containment,g=f instanceof a?f.get(0):/parent/.test(f)?e.parent().get(0):f;if(g)if(c.containerElement=a(g),/document/.test(f)||f==document)c.containerOffset={left:0,top:0},c.containerPosition={left:0,top:0},c.parentData={element:a(document),left:0,top:0,width:a(document).width(),height:a(document).height()||document.body.parentNode.scrollHeight};else{var h=a(g),i=[];a(["Top","Right","Left","Bottom"]).each(function(a,c){i[a]=b(h.css("padding"+c))}),c.containerOffset=h.offset(),c.containerPosition=h.position(),c.containerSize={height:h.innerHeight()-i[3],width:h.innerWidth()-i[1]};var j=c.containerOffset,k=c.containerSize.height,l=c.containerSize.width,m=a.ui.hasScroll(g,"left")?g.scrollWidth:l,n=a.ui.hasScroll(g)?g.scrollHeight:k;c.parentData={element:g,left:j.left,top:j.top,width:m,height:n}}},resize:function(b){var c=a(this).data("resizable"),d=c.options,e=(c.containerSize,c.containerOffset),f=(c.size,c.position),g=c._aspectRatio||b.shiftKey,h={top:0,left:0},i=c.containerElement;i[0]!=document&&/static/.test(i.css("position"))&&(h=e),f.left<(c._helper?e.left:0)&&(c.size.width=c.size.width+(c._helper?c.position.left-e.left:c.position.left-h.left),g&&(c.size.height=c.size.width/c.aspectRatio),c.position.left=d.helper?e.left:0),f.top<(c._helper?e.top:0)&&(c.size.height=c.size.height+(c._helper?c.position.top-e.top:c.position.top),g&&(c.size.width=c.size.height*c.aspectRatio),c.position.top=c._helper?e.top:0),c.offset.left=c.parentData.left+c.position.left,c.offset.top=c.parentData.top+c.position.top;var j=Math.abs((c._helper?c.offset.left-h.left:c.offset.left-h.left)+c.sizeDiff.width),k=Math.abs((c._helper?c.offset.top-h.top:c.offset.top-e.top)+c.sizeDiff.height),l=c.containerElement.get(0)==c.element.parent().get(0),m=/relative|absolute/.test(c.containerElement.css("position"));l&&m&&(j-=c.parentData.left),j+c.size.width>=c.parentData.width&&(c.size.width=c.parentData.width-j,g&&(c.size.height=c.size.width/c.aspectRatio)),k+c.size.height>=c.parentData.height&&(c.size.height=c.parentData.height-k,g&&(c.size.width=c.size.height*c.aspectRatio))},stop:function(){var b=a(this).data("resizable"),c=b.options,d=(b.position,b.containerOffset),e=b.containerPosition,f=b.containerElement,g=a(b.helper),h=g.offset(),i=g.outerWidth()-b.sizeDiff.width,j=g.outerHeight()-b.sizeDiff.height;b._helper&&!c.animate&&/relative/.test(f.css("position"))&&a(this).css({left:h.left-e.left-d.left,width:i,height:j}),b._helper&&!c.animate&&/static/.test(f.css("position"))&&a(this).css({left:h.left-e.left-d.left,width:i,height:j})}}),a.ui.plugin.add("resizable","ghost",{start:function(){var b=a(this).data("resizable"),c=b.options,d=b.size;b.ghost=b.originalElement.clone(),b.ghost.css({opacity:.25,display:"block",position:"relative",height:d.height,width:d.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof c.ghost?c.ghost:""),b.ghost.appendTo(b.helper)},resize:function(){{var b=a(this).data("resizable");b.options}b.ghost&&b.ghost.css({position:"relative",height:b.size.height,width:b.size.width})},stop:function(){{var b=a(this).data("resizable");b.options}b.ghost&&b.helper&&b.helper.get(0).removeChild(b.ghost.get(0))}}),a.ui.plugin.add("resizable","grid",{resize:function(b){{var c=a(this).data("resizable"),d=c.options,e=c.size,f=c.originalSize,g=c.originalPosition,h=c.axis;d._aspectRatio||b.shiftKey}d.grid="number"==typeof d.grid?[d.grid,d.grid]:d.grid;var i=Math.round((e.width-f.width)/(d.grid[0]||1))*(d.grid[0]||1),j=Math.round((e.height-f.height)/(d.grid[1]||1))*(d.grid[1]||1);/^(se|s|e)$/.test(h)?(c.size.width=f.width+i,c.size.height=f.height+j):/^(ne)$/.test(h)?(c.size.width=f.width+i,c.size.height=f.height+j,c.position.top=g.top-j):/^(sw)$/.test(h)?(c.size.width=f.width+i,c.size.height=f.height+j,c.position.left=g.left-i):(c.size.width=f.width+i,c.size.height=f.height+j,c.position.top=g.top-j,c.position.left=g.left-i)}});var b=function(a){return parseInt(a,10)||0},c=function(a){return!isNaN(parseInt(a,10))}}(jQuery),function(a){var b,c,d,e,f="ui-button ui-widget ui-state-default ui-corner-all",g="ui-state-hover ui-state-active ",h="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",i=function(){var b=a(this).find(":ui-button");setTimeout(function(){b.button("refresh")},1)},j=function(b){var c=b.name,d=b.form,e=a([]);return c&&(e=d?a(d).find("[name='"+c+"']"):a("[name='"+c+"']",b.ownerDocument).filter(function(){return!this.form})),e};a.widget("ui.button",{version:"1.9.2",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,i),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var g=this,h=this.options,k="checkbox"===this.type||"radio"===this.type,l=k?"":"ui-state-active",m="ui-state-focus";null===h.label&&(h.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(f).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){h.disabled||this===b&&a(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){h.disabled||a(this).removeClass(l)}).bind("click"+this.eventNamespace,function(a){h.disabled&&(a.preventDefault(),a.stopImmediatePropagation())}),this.element.bind("focus"+this.eventNamespace,function(){g.buttonElement.addClass(m)}).bind("blur"+this.eventNamespace,function(){g.buttonElement.removeClass(m)}),k&&(this.element.bind("change"+this.eventNamespace,function(){e||g.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(a){h.disabled||(e=!1,c=a.pageX,d=a.pageY)}).bind("mouseup"+this.eventNamespace,function(a){h.disabled||(c!==a.pageX||d!==a.pageY)&&(e=!0)})),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return h.disabled||e?!1:(a(this).toggleClass("ui-state-active"),void g.buttonElement.attr("aria-pressed",g.element[0].checked))}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(h.disabled||e)return!1;a(this).addClass("ui-state-active"),g.buttonElement.attr("aria-pressed","true");var b=g.element[0];j(b).not(b).map(function(){return a(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return h.disabled?!1:(a(this).addClass("ui-state-active"),b=this,void g.document.one("mouseup",function(){b=null}))}).bind("mouseup"+this.eventNamespace,function(){return h.disabled?!1:void a(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(b){return h.disabled?!1:void((b.keyCode===a.ui.keyCode.SPACE||b.keyCode===a.ui.keyCode.ENTER)&&a(this).addClass("ui-state-active"))}).bind("keyup"+this.eventNamespace,function(){a(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(b){b.keyCode===a.ui.keyCode.SPACE&&a(this).click()})),this._setOption("disabled",h.disabled),this._resetButton()},_determineButtonType:function(){var a,b,c;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type?(a=this.element.parents().last(),b="label[for='"+this.element.attr("id")+"']",this.buttonElement=a.find(b),this.buttonElement.length||(a=a.length?a.siblings():this.element.siblings(),this.buttonElement=a.filter(b),this.buttonElement.length||(this.buttonElement=a.find(b))),this.element.addClass("ui-helper-hidden-accessible"),c=this.element.is(":checked"),c&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",c)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(f+" "+g+" "+h).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(a,b){return this._super(a,b),"disabled"===a?void(b?this.element.prop("disabled",!0):this.element.prop("disabled",!1)):void this._resetButton()},refresh:function(){var b=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");b!==this.options.disabled&&this._setOption("disabled",b),"radio"===this.type?j(this.element[0]).each(function(){a(this).is(":checked")?a(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):a(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return void(this.options.label&&this.element.val(this.options.label));var b=this.buttonElement.removeClass(h),c=a("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(b.empty()).text(),d=this.options.icons,e=d.primary&&d.secondary,f=[];d.primary||d.secondary?(this.options.text&&f.push("ui-button-text-icon"+(e?"s":d.primary?"-primary":"-secondary")),
d.primary&&b.prepend("<span class='ui-button-icon-primary ui-icon "+d.primary+"'></span>"),d.secondary&&b.append("<span class='ui-button-icon-secondary ui-icon "+d.secondary+"'></span>"),this.options.text||(f.push(e?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||b.attr("title",a.trim(c)))):f.push("ui-button-text-only"),b.addClass(f.join(" "))}}),a.widget("ui.buttonset",{version:"1.9.2",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(a,b){"disabled"===a&&this.buttons.button("option",a,b),this._super(a,b)},refresh:function(){var b="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(b?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(b?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(jQuery),function(a,b){var c="ui-dialog ui-widget ui-widget-content ui-corner-all ",d={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},e={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};a.widget("ui.dialog",{version:"1.9.2",options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(b){var c=a(this).css(b).offset().top;0>c&&a(this).css("top",b.top-c)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1e3},_create:function(){this.originalTitle=this.element.attr("title"),"string"!=typeof this.originalTitle&&(this.originalTitle=""),this.oldPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.options.title=this.options.title||this.originalTitle;var b,d,e,f,g,h=this,i=this.options,j=i.title||"&#160;";b=(this.uiDialog=a("<div>")).addClass(c+i.dialogClass).css({display:"none",outline:0,zIndex:i.zIndex}).attr("tabIndex",-1).keydown(function(b){i.closeOnEscape&&!b.isDefaultPrevented()&&b.keyCode&&b.keyCode===a.ui.keyCode.ESCAPE&&(h.close(b),b.preventDefault())}).mousedown(function(a){h.moveToTop(!1,a)}).appendTo("body"),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(b),d=(this.uiDialogTitlebar=a("<div>")).addClass("ui-dialog-titlebar  ui-widget-header  ui-corner-all  ui-helper-clearfix").bind("mousedown",function(){b.focus()}).prependTo(b),e=a("<a href='#'></a>").addClass("ui-dialog-titlebar-close  ui-corner-all").attr("role","button").click(function(a){a.preventDefault(),h.close(a)}).appendTo(d),(this.uiDialogTitlebarCloseText=a("<span>")).addClass("ui-icon ui-icon-closethick").text(i.closeText).appendTo(e),f=a("<span>").uniqueId().addClass("ui-dialog-title").html(j).prependTo(d),g=(this.uiDialogButtonPane=a("<div>")).addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),(this.uiButtonSet=a("<div>")).addClass("ui-dialog-buttonset").appendTo(g),b.attr({role:"dialog","aria-labelledby":f.attr("id")}),d.find("*").add(d).disableSelection(),this._hoverable(e),this._focusable(e),i.draggable&&a.fn.draggable&&this._makeDraggable(),i.resizable&&a.fn.resizable&&this._makeResizable(),this._createButtons(i.buttons),this._isOpen=!1,a.fn.bgiframe&&b.bgiframe(),this._on(b,{keydown:function(c){if(i.modal&&c.keyCode===a.ui.keyCode.TAB){var d=a(":tabbable",b),e=d.filter(":first"),f=d.filter(":last");return c.target!==f[0]||c.shiftKey?c.target===e[0]&&c.shiftKey?(f.focus(1),!1):void 0:(e.focus(1),!1)}}})},_init:function(){this.options.autoOpen&&this.open()},_destroy:function(){var a,b=this.oldPosition;this.overlay&&this.overlay.destroy(),this.uiDialog.hide(),this.element.removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),a=b.parent.children().eq(b.index),a.length&&a[0]!==this.element[0]?a.before(this.element):b.parent.append(this.element)},widget:function(){return this.uiDialog},close:function(b){var c,d,e=this;if(this._isOpen&&!1!==this._trigger("beforeClose",b))return this._isOpen=!1,this.overlay&&this.overlay.destroy(),this.options.hide?this._hide(this.uiDialog,this.options.hide,function(){e._trigger("close",b)}):(this.uiDialog.hide(),this._trigger("close",b)),a.ui.dialog.overlay.resize(),this.options.modal&&(c=0,a(".ui-dialog").each(function(){this!==e.uiDialog[0]&&(d=a(this).css("z-index"),isNaN(d)||(c=Math.max(c,d)))}),a.ui.dialog.maxZ=c),this},isOpen:function(){return this._isOpen},moveToTop:function(b,c){var d,e=this.options;return e.modal&&!b||!e.stack&&!e.modal?this._trigger("focus",c):(e.zIndex>a.ui.dialog.maxZ&&(a.ui.dialog.maxZ=e.zIndex),this.overlay&&(a.ui.dialog.maxZ+=1,a.ui.dialog.overlay.maxZ=a.ui.dialog.maxZ,this.overlay.$el.css("z-index",a.ui.dialog.overlay.maxZ)),d={scrollTop:this.element.scrollTop(),scrollLeft:this.element.scrollLeft()},a.ui.dialog.maxZ+=1,this.uiDialog.css("z-index",a.ui.dialog.maxZ),this.element.attr(d),this._trigger("focus",c),this)},open:function(){if(!this._isOpen){var b,c=this.options,d=this.uiDialog;return this._size(),this._position(c.position),d.show(c.show),this.overlay=c.modal?new a.ui.dialog.overlay(this):null,this.moveToTop(!0),b=this.element.find(":tabbable"),b.length||(b=this.uiDialogButtonPane.find(":tabbable"),b.length||(b=d)),this._isOpen=!0,this._trigger("open"),this}},_createButtons:function(b){var c=this,d=!1;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),"object"==typeof b&&null!==b&&a.each(b,function(){return!(d=!0)}),d?(a.each(b,function(b,d){var e,f;d=a.isFunction(d)?{click:d,text:b}:d,d=a.extend({type:"button"},d),f=d.click,d.click=function(){f.apply(c.element[0],arguments)},e=a("<button></button>",d).appendTo(c.uiButtonSet),a.fn.button&&e.button()}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog)):this.uiDialog.removeClass("ui-dialog-buttons")},_makeDraggable:function(){function b(a){return{position:a.position,offset:a.offset}}var c=this,d=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(d,e){a(this).addClass("ui-dialog-dragging"),c._trigger("dragStart",d,b(e))},drag:function(a,d){c._trigger("drag",a,b(d))},stop:function(e,f){d.position=[f.position.left-c.document.scrollLeft(),f.position.top-c.document.scrollTop()],a(this).removeClass("ui-dialog-dragging"),c._trigger("dragStop",e,b(f)),a.ui.dialog.overlay.resize()}})},_makeResizable:function(c){function d(a){return{originalPosition:a.originalPosition,originalSize:a.originalSize,position:a.position,size:a.size}}c=c===b?this.options.resizable:c;var e=this,f=this.options,g=this.uiDialog.css("position"),h="string"==typeof c?c:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:f.maxWidth,maxHeight:f.maxHeight,minWidth:f.minWidth,minHeight:this._minHeight(),handles:h,start:function(b,c){a(this).addClass("ui-dialog-resizing"),e._trigger("resizeStart",b,d(c))},resize:function(a,b){e._trigger("resize",a,d(b))},stop:function(b,c){a(this).removeClass("ui-dialog-resizing"),f.height=a(this).height(),f.width=a(this).width(),e._trigger("resizeStop",b,d(c)),a.ui.dialog.overlay.resize()}}).css("position",g).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var a=this.options;return"auto"===a.height?a.minHeight:Math.min(a.minHeight,a.height)},_position:function(b){var c,d=[],e=[0,0];b?(("string"==typeof b||"object"==typeof b&&"0"in b)&&(d=b.split?b.split(" "):[b[0],b[1]],1===d.length&&(d[1]=d[0]),a.each(["left","top"],function(a,b){+d[a]===d[a]&&(e[a]=d[a],d[a]=b)}),b={my:d[0]+(e[0]<0?e[0]:"+"+e[0])+" "+d[1]+(e[1]<0?e[1]:"+"+e[1]),at:d.join(" ")}),b=a.extend({},a.ui.dialog.prototype.options.position,b)):b=a.ui.dialog.prototype.options.position,c=this.uiDialog.is(":visible"),c||this.uiDialog.show(),this.uiDialog.position(b),c||this.uiDialog.hide()},_setOptions:function(b){var c=this,f={},g=!1;a.each(b,function(a,b){c._setOption(a,b),a in d&&(g=!0),a in e&&(f[a]=b)}),g&&this._size(),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",f)},_setOption:function(b,d){var e,f,g=this.uiDialog;switch(b){case"buttons":this._createButtons(d);break;case"closeText":this.uiDialogTitlebarCloseText.text(""+d);break;case"dialogClass":g.removeClass(this.options.dialogClass).addClass(c+d);break;case"disabled":d?g.addClass("ui-dialog-disabled"):g.removeClass("ui-dialog-disabled");break;case"draggable":e=g.is(":data(draggable)"),e&&!d&&g.draggable("destroy"),!e&&d&&this._makeDraggable();break;case"position":this._position(d);break;case"resizable":f=g.is(":data(resizable)"),f&&!d&&g.resizable("destroy"),f&&"string"==typeof d&&g.resizable("option","handles",d),f||d===!1||this._makeResizable(d);break;case"title":a(".ui-dialog-title",this.uiDialogTitlebar).html(""+(d||"&#160;"))}this._super(b,d)},_size:function(){var b,c,d,e=this.options,f=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0}),e.minWidth>e.width&&(e.width=e.minWidth),b=this.uiDialog.css({height:"auto",width:e.width}).outerHeight(),c=Math.max(0,e.minHeight-b),"auto"===e.height?a.support.minHeight?this.element.css({minHeight:c,height:"auto"}):(this.uiDialog.show(),d=this.element.css("height","auto").height(),f||this.uiDialog.hide(),this.element.height(Math.max(d,c))):this.element.height(Math.max(e.height-b,0)),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}}),a.extend(a.ui.dialog,{uuid:0,maxZ:0,getTitleId:function(a){var b=a.attr("id");return b||(this.uuid+=1,b=this.uuid),"ui-dialog-title-"+b},overlay:function(b){this.$el=a.ui.dialog.overlay.create(b)}}),a.extend(a.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:a.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(a){return a+".dialog-overlay"}).join(" "),create:function(b){0===this.instances.length&&(setTimeout(function(){a.ui.dialog.overlay.instances.length&&a(document).bind(a.ui.dialog.overlay.events,function(b){return a(b.target).zIndex()<a.ui.dialog.overlay.maxZ?!1:void 0})},1),a(window).bind("resize.dialog-overlay",a.ui.dialog.overlay.resize));var c=this.oldInstances.pop()||a("<div>").addClass("ui-widget-overlay");return a(document).bind("keydown.dialog-overlay",function(d){var e=a.ui.dialog.overlay.instances;0!==e.length&&e[e.length-1]===c&&b.options.closeOnEscape&&!d.isDefaultPrevented()&&d.keyCode&&d.keyCode===a.ui.keyCode.ESCAPE&&(b.close(d),d.preventDefault())}),c.appendTo(document.body).css({width:this.width(),height:this.height()}),a.fn.bgiframe&&c.bgiframe(),this.instances.push(c),c},destroy:function(b){var c=a.inArray(b,this.instances),d=0;-1!==c&&this.oldInstances.push(this.instances.splice(c,1)[0]),0===this.instances.length&&a([document,window]).unbind(".dialog-overlay"),b.height(0).width(0).remove(),a.each(this.instances,function(){d=Math.max(d,this.css("z-index"))}),this.maxZ=d},height:function(){var b,c;return a.ui.ie?(b=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),c=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),c>b?a(window).height()+"px":b+"px"):a(document).height()+"px"},width:function(){var b,c;return a.ui.ie?(b=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),c=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),c>b?a(window).width()+"px":b+"px"):a(document).width()+"px"},resize:function(){var b=a([]);a.each(a.ui.dialog.overlay.instances,function(){b=b.add(this)}),b.css({width:0,height:0}).css({width:a.ui.dialog.overlay.width(),height:a.ui.dialog.overlay.height()})}}),a.extend(a.ui.dialog.overlay.prototype,{destroy:function(){a.ui.dialog.overlay.destroy(this.$el)}})}(jQuery),function(a){a.alerts={verticalOffset:-75,horizontalOffset:0,repositionOnResize:!0,overlayOpacity:.5,overlayColor:"#000",draggable:!1,okButton:"确定",cancelButton:"取消",dialogClass:null,alert:function(d,e,f,g){var h=b(d,e,f,g);h.type=null,c(h,"attention"),a.alerts._show(h)},confirm:function(c,d,e){var f=b(c,d,"question",e);f.type="confirm",f.level="question",null==f.title&&(f.title="确认"),a.alerts._show(f)},prompt:function(c,d,e,f){var g=b(c,e,"attention",f);g.value=d,g.type="prompt",null==g.title&&(g.title="提示"),a.alerts._show(g)},autoJump:function(c,d,e){var f=b(c,"",d,e);f.type="plain",a.alerts._show(f)},_show:function(b,c,d,e,f,g){a.isPlainObject(b)&&(c=b.message,d=b.value,e=b.type,f=b.level,g=b.callback,b=b.title),e=e||"alert",a.alerts._hide(),a.alerts._overlay("show");var h=[];""!=f&&null!=f&&"prompt"!=e?(h.push('<div class="msg-b-weak msg-b-'+f+'"><i></i><div class="msg-cnt">'),h.push('<div id="popup_message">'),h.push("</div>"),h.push("</div></div>")):h.push('<div id="popup_message"></div>'),a("BODY").append('<div id="popup_container" style="position:absolute;top:0;left:0;" class="popup-'+e+'"><div id="popup_wrapper">'+("plain"!=e?'<h5 id="popup_title"></h5>':"")+'<div id="popup_content">'+h.join("")+"</div></div></div>"),a.alerts.dialogClass&&a("#popup_container").addClass(a.alerts.dialogClass);var i=a.browser.msie&&parseInt(a.browser.version)<=6?"absolute":"fixed";switch(a("#popup_container").css({position:i,zIndex:99999,margin:0}),"plain"!=e&&a("#popup_title").text(b),a("#popup_content").addClass(e),a("#popup_message").text(c),a("#popup_message").html(a("#popup_message").text().replace(/\n/g,"<br />")),e){case"plain":if(a.isPlainObject(g)){var j=g;a("#popup_wrapper .msg-b-weak").append('<div class="auto-jump"><span class="tick">3</span>秒后将跳转到'+j.jumpName+'<a style="margin-left:10px" href="'+j.jumpUrl+'">立即前往</a></div>');var k=setInterval(function(){var b=a("#popup_wrapper .msg-b-weak .tick");b.html(parseInt(b.html())-1)},1e3);setTimeout(function(){clearInterval(k),window.location.href=j.jumpUrl},3e3)}break;case"alert":a("#popup_wrapper").append('<div id="popup_panel"><a href="javascript:void(0);" class="button button-minor" id="popup_ok">'+a.alerts.okButton+"</a></div>"),a("#popup_ok").click(function(){a.alerts._hide(),g&&g(!0)}),a("#popup_ok").focus().keypress(function(b){(13==b.keyCode||27==b.keyCode)&&a("#popup_ok").trigger("click")});break;case"confirm":a("#popup_wrapper").append('<div id="popup_panel"><a href="javascript:void(0);" class="button button-minor" id="popup_ok" >'+a.alerts.okButton+'</a><a href="javascript:void(0);" class="button button-cancel" id="popup_cancel" >'+a.alerts.cancelButton+"</a></div>"),a("#popup_ok").click(function(){a.alerts._hide(),g&&g(!0)}),a("#popup_cancel").click(function(){a.alerts._hide(),g&&g(!1)}),a("#popup_ok").focus(),a("#popup_ok, #popup_cancel").keypress(function(b){13==b.keyCode&&a("#popup_ok").trigger("click"),27==b.keyCode&&a("#popup_cancel").trigger("click")});break;case"prompt":a("#popup_message").append('<br /><input type="text" size="20" id="popup_prompt" />').parent().after('<div id="popup_panel"><a href="javascript:void(0);" class="button button-minor" id="popup_ok" >'+a.alerts.okButton+'</a><a href="javascript:void(0);" class="button button-cancel" id="popup_cancel" >'+a.alerts.cancelButton+"</a></div>"),a("#popup_ok").click(function(){var b=a("#popup_prompt").val();a.alerts._hide(),g&&g(b)}),a("#popup_cancel").click(function(){a.alerts._hide(),g&&g(null)}),a("#popup_prompt, #popup_ok, #popup_cancel").keypress(function(b){13==b.keyCode&&a("#popup_ok").trigger("click"),27==b.keyCode&&a("#popup_cancel").trigger("click")}),d&&a("#popup_prompt").val(d),a("#popup_prompt").focus().select()}if(a("#popup_container").css({minWidth:a("#popup_container").outerWidth(),maxWidth:a("#popup_container").outerWidth(),width:a("#popup_container").outerWidth()}),a.browser.msie&&parseInt(a.browser.version)<=6){var l=a("#popup_content").outerWidth()+2;a("#popup_container").css({width:"plain"==e?l>200?l:200:l>352?l:352})}if(a.alerts._reposition(),a.alerts._maintainPosition(!0),a.fn.bgiframe&&a("#popup_container").bgiframe(),a.alerts.draggable)try{a("#popup_container").draggable({handle:a("#popup_title")}),a("#popup_title").css({cursor:"move"})}catch(m){}},_hide:function(){a("#popup_container").remove(),a.alerts._overlay("hide"),a.alerts._maintainPosition(!1)},_overlay:function(b){switch(b){case"show":a.alerts._overlay("hide"),a("BODY").append('<div id="popup_overlay"></div>'),a("#popup_overlay").css({position:"absolute",zIndex:99998,top:"0px",left:"0px",width:"100%",height:a(window.document).height(),background:a.alerts.overlayColor,opacity:a.alerts.overlayOpacity}),a.fn.bgiframe&&a("#popup_overlay").bgiframe();break;case"hide":a("#popup_overlay").remove()}},_reposition:function(){var b=a(window).height()/2-a("#popup_container").outerHeight()/2+a.alerts.verticalOffset,c=a(window).width()/2-a("#popup_container").outerWidth()/2+a.alerts.horizontalOffset;0>b&&(b=0),0>c&&(c=0),a.browser.msie&&parseInt(a.browser.version)<=6&&(b+=a(window).scrollTop()),a("#popup_container").css({top:b+"px",left:c+"px"}),a("#popup_overlay").height(a(window.document).height())},_maintainPosition:function(b){if(a.alerts.repositionOnResize)switch(b){case!0:a(window).bind("resize",a.alerts._reposition);break;case!1:a(window).unbind("resize",a.alerts._reposition)}}};var b=function(b,c,d,e){if(a.isPlainObject(b))return b;var f={};return f.message=b,null==c&&null==d||a.isFunction(c)?(d="attention",e=c,c=null):a.isFunction(d)?(e=d,d=c,c=null):null==d&&(d=c,c=null),f.title=c,f.level=d,f.callback=e,f},c=function(a,b){if(null==a.level&&(a.level=b),null==a.title)switch(a.level){case"ok":a.title="成功";break;case"error":a.title="错误";break;case"stop":a.title="禁止";break;case"question":a.title="确认";break;case"attention":a.title="提示";break;case"alarm":a.title="警告";default:a.title="提示",a.level="attention"}};window.jAlert=a.alerts.alert,window.jConfirm=a.alerts.confirm,window.jPrompt=a.alerts.prompt,window.jAutoJump=a.alerts.autoJump}(jQuery),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){function b(a){return a&&a.constructor===Number?a+"px":a}a.fn.bgiframe=function(c){if(c=a.extend({top:"auto",left:"auto",width:"100%",height:"100%",opacity:!0,src:"javascript:false;",conditional:a.browser.msie},c),!a.isFunction(c.conditional)){var d=c.conditional;c.conditional=function(){return d}}var e=a('<iframe class="bgiframe"frameborder="0"tabindex="-1"src="'+c.src+'"style="display:block;position:absolute;z-index:-1;"/>');return this.each(function(){var d=a(this);if(c.conditional(this)!==!1){var f=d.children("iframe.bgiframe"),g=0===f.length?e.clone():f;g.css({top:"auto"==c.top?-1*(parseInt(d.css("borderTopWidth"),10)||0)+"px":b(c.top),left:"auto"==c.left?-1*(parseInt(d.css("borderLeftWidth"),10)||0)+"px":b(c.left),width:"auto"==c.width?this.offsetWidth+"px":b(c.width),height:"auto"==c.height?this.offsetHeight+"px":b(c.height),opacity:c.opacity===!0?0:void 0}),0===f.length&&d.prepend(g)}})},a.fn.bgIframe=a.fn.bgiframe}),function(a){a.fn.droplist=function(b){if("SELECT"!==this[0].tagName)return this;var c=this;if(this.data("droplist")){var d="",e=this.closest(".select-wrap").find(".select-content");return e.empty(),this.find("option").each(function(b,f){a(f).prop("selected")||c.val()==a(f).val()?(d=a(f).text(),e.append('<li class="select-item selected" data-value="'+a(f).val()+'">'+a(f).text()+"</li>")):e.append('<li class="select-item" data-value="'+a(f).val()+'">'+a(f).text()+"</li>")}),void e.find("li:odd").addClass("odd-bg")}this.data("droplist",!0);var f=this.outerWidth()-2;this.wrap('<div class="select-wrap"></div>');var g=this.closest(".select-wrap");return g.width(f),g.append('<div class="selected-item"></div>'),g.append('<div class="select-dropdown"><i class="icon12-7 i-dropdown"></i></div>'),g.find(".selected-item").width(f-24),function(){var b="",d='<ul class="select-content">';c.find("option").each(function(e,f){a(f).prop("selected")||c.val()==a(f).val()?(b=a(f).text(),d+='<li class="select-item selected" data-value="'+a(f).val()+'">'+a(f).text()+"</li>"):d+='<li class="select-item" data-value="'+a(f).val()+'">'+a(f).text()+"</li>"}),d+="</ul>",g.append(d),b=b||"--请选择--",g.find(".selected-item").text(b);var e=g.find(".select-content");e.css("top",g.height()+1),e.css("left",-1),e.find("li:odd").addClass("odd-bg")}(),g.on("click",function(b){a(document).trigger("click",[g]),g.toggleClass("active"),g.find(".select-content").toggle(),g.find(".select-content").is(":visible")&&g.find(".select-item").each(function(b,d){a(d).attr("data-value")==c.val()?a(d).addClass("selected"):a(d).removeClass("selected")}),b.stopPropagation()}),g.delegate(".select-item","click",function(b){c.val(a(this).attr("data-value")),c.trigger("change"),b.stopPropagation()}),this.on("change",function(){g.find(".selected-item").html(g.find(".select-item[data-value='"+c.val()+"']").text()),g.find(".select-content").hide(),g.removeClass("active"),b&&b.change&&b.change(a(this).val())}),g.on("mouseover",".select-item",function(){a(this).addClass("hover-bg")}),g.on("mouseout",".select-item",function(){a(this).removeClass("hover-bg")}),a(document).on("click",function(a,b){g!=b&&(g.find(".select-content").hide(),g.removeClass("active"))}),this}}(jQuery),function(a){a.fn.droptree=function(b,c,d){if(void 0===a.fn.zTree)return this;if(!this.is(":text"))return this;var e=this,f=e.attr("id")+"ztree";d=d||"id";var g=this.outerWidth()-2;this.wrap('<div class="select-wrap"></div>');var h=this.closest(".select-wrap");this.hide(),h.width(g),h.append('<div class="selected-item"></div>'),h.append('<div class="select-dropdown"><i class="icon12-7 i-dropdown"></i></div>'),h.append('<div class="select-content"></div>'),h.find(".selected-item").width(g-24);var i=h.find(".select-content");i.css("top",h.height()+1),i.css("left",-1),i.append("<div id="+f+' class="ztree"></div>');var j;b.callback&&b.callback.onClick&&(j=b.callback.onClick);var k="name";b.data&&b.data.key&&b.data.key.name&&(k=b.data.key.name),b=a.extend(!0,{},b,{callback:{onClick:function(a,b,c){e.val(c[d]),e.attr("text",c[k]),h.find(".selected-item").text(c[k]),h.find(".select-content").hide(),h.removeClass("active"),j&&j(a,b,c)}}});var l=a.fn.zTree.init(i.find("#"+f),b,c),m=this.attr("data-text")||"--请选择--";return h.find(".selected-item").text(m),h.on("click",function(b){if(a(document).trigger("click",[h]),h.toggleClass("active"),h.find(".select-content").toggle(),h.find(".select-content").is(":visible")){var c=l.getNodesByParam(d,e.val());c&&c.length>0&&l.selectNode(c[0])}b.stopPropagation()}),i.on("click",function(a){a.stopPropagation()}),a(document).on("click",function(a,b){h!=b&&(h.find(".select-content").hide(),h.removeClass("active"))}),this}}(jQuery),function(a){a.fn.loading=function(a,b){void 0==b&&(b=a,a="twin"),a=a||"twin";var c=a.indexOf("-big")>-1;if(0==this.find(".loading-mask").length){var d=[];d.push('<div class="loading-layer">'),d.push('<div class="loading-mask"></div>'),d.push('<div class="loading-cnt '+(c?"loading-cnt-big":"")+'"><i class="'+a+'"></i>'+b+"</div>"),d.push("</div>"),"static"===this.css("position")&&this.css("position","relative"),this.append(d.join("")),this.find(".loading-layer").width(this.innerWidth()),this.find(".loading-layer").height(this.innerHeight()),this.find(".loading-mask").width(this.innerWidth()),this.find(".loading-mask").height(this.innerHeight());var e=this.find(".loading-cnt");e.css("margin-left",-e.outerWidth()/2),e.css("margin-top",-e.outerHeight()/2)}},a.fn.loaded=function(){var a=this.find(".loading-layer");a.fadeOut(100,function(){a.remove()})}}(jQuery),function(a){a.fn.pkNav=function(){function b(b){var d,f=a(b),g=f.find(".nav-body"),h=g.children("ul"),i=c(b);if(i+1==h.find(".nav-item").size()?d=a():-1==i?(d=h.find(".nav-item").addClass("nav-item-hide"),g.find(".more").removeClass("nav-item-hide")):(d=h.find(".nav-item:gt("+i+")").addClass("nav-item-hide"),g.find(".more").removeClass("nav-item-hide")),d.size()>0&&(e(b,d.parent("li").clone(!0)),a.browser.msie&&6==a.browser.version)){var j=0;h.find(".nav-item").each(function(){j=j>a(this).width()?j:a(this).width()}),g.find(".more-items .nav-item").width(j)}f.addClass("nav-init")}function c(b){var c,d=a(b),e=d.parent().width()-d.find(".nav-head").width()-d.find(".nav-foot").width()-110,f=0;return d.find(".nav-body>ul .nav-item").each(function(b){return c=b,f+=a(this).innerWidth(),f>e?(c--,!1):void 0}),c}function d(c){var d=a(c),e=d.find(".nav-body");d.removeClass("nav-init"),e.find(".nav-item").removeClass("nav-item-hide"),e.find(".more").addClass("nav-item-hide"),b(c)}function e(b,c){var d=a(b),e=d.find(".nav-body .more ul");c.find("a").removeClass("nav-item-hide"),e.empty().append(c)}a(this).each(function(){var c=this,e=a(this).find(".nav-body"),g=a(this).find(".nav-foot");!function(){if(a.browser.msie&&6==a.browser.version){var b=0;g.find(".func-item").each(function(){b+=a(this).outerWidth()}),g.width(b);var c=g.find(".user-operate").outerWidth();g.find(".user-operate .operate-menu-white").width(c)}}(),e.hasClass("nav-operate")&&e.children("ul").find(".nav-item").size()>1?(b(this),a(window).on("resize",function(){f(300,500,function(){d(c)})})):a(this).addClass("nav-init"),e.find(".more").on("hover",function(){e.find(".more-items").toggle()}),g.find(".user-operate").on("hover",function(){g.find(".operate-menu-white").toggle()})});var f=function(){var a=null,b=null;return function(c,d,e){b||(e&&e(),b=new Date),clearTimeout(a),a=null,new Date-b>d?(e&&e(b-new Date),b=null):a=setTimeout(function(){e&&e()},c)}}()}}(jQuery),function(a){a.fn.searchbox=function(b,c){if(!this.is(":text"))return this;"function"==typeof b&&(c=b,b="default");var d=this,e=this.outerWidth()-2;this.wrap('<div class="search-wrap"></div>');var f=this.closest(".search-wrap");switch(f.width(e),f.append('<div class="icon-wrap"><i></i></div>'),this.on("focus",function(){f.addClass("focused")}),this.on("blur",function(){f.removeClass("focused")}),this.on("keydown",function(b){return 13==b.keyCode?(c&&c(a.trim(d.val())),!1):void 0}),f.find(".icon-wrap").on("click",function(){c&&c(a.trim(d.val()))}),b){case"default":this.width(this.width()-33);break;case"blue":f.addClass("blue"),this.width(this.width()-33);break;case"huge-blue":f.addClass("huge-blue"),this.width(this.width()-68),this.css("margin-left",2)}}}(jQuery),function(a){"function"==typeof define?define("",[],function(){return a}):a(jQuery)}(function($){function initDOM(a){if(this.length<=0)return this;a=$.extend({blank:10,width:4,type:"show",color:"#D0D5E0",activeColor:"#BBC1CF",monitor:!1},a,{scrollRangeVertical:0,contRangeVertical:0,scrollScaleVertical:1,scrollRangeHorizontal:0,contRangeHorizontal:0,scrollScaleHorizontal:1,enScrollVertical:!1,enScrollHorizontal:!1});var b=$('<div class="simpleScrollBox"><div class="ssb_container_wrapper"><div class="ssb_container"></div></div></div>'),c=b.find(".ssb_container");c.wrapInner($(this).children()),$(this).append(b).addClass("simpleScrollBar").css("overflow","visible");var d="border-radius:"+a.width/2+"px;-moz-border-radius:"+a.width/2+"px;-webkit-border-radius:"+a.width/2+"px;",e=$('<div class="ssb_scrollTool ssb_scrollTool_vertical"><div class="ssb_dragger_vertical"><div class="ssb_dragger_bar" style="width:'+a.width+"px;"+d+'"></div></div></div>');if(b.append(e),$scrollToolHorizontal=$('<div class="ssb_scrollTool ssb_scrollTool_horizontal"><div class="ssb_dragger_horizontal"><div class="ssb_dragger_bar" style="height:'+a.width+"px;"+d+'"></div></div></div>'),b.append($scrollToolHorizontal),$(this).is(":hidden"))var f=this,g=setInterval(function(){!$(f).is(":hidden")&&$(f).parents(":hidden").size()<=0&&(initEvent.call(f,a),clearInterval(g),g=null)},250);else initEvent.call(this,a)}function initEvent(a){var b=$(this).find(".simpleScrollBox");$(this).data("boxW",b.width()),$(this).data("boxH",b.height()),judgeScroll.call(this,a),dragScroll.call(this,"y",a),dragScroll.call(this,"x",a),mousewheel.call(this,a),a.monitor&&fit.call(this,a)}function judgeScroll(a){var b=$(this).find(".ssb_container_wrapper"),c=$(this).find(".ssb_container"),d=b.height(),e=c.height(),f=!1,g=!1;e>d?(f=!0,setScrollBlank.call(this,"margin-right",a.blank)):f=!1;var h=b.width(),i=c.get(0).scrollWidth;i>h?(g=!0,setScrollBlank.call(this,"margin-bottom",a.blank),f||(d=b.height(),e=c.height(),e>d&&(f=!0,setScrollBlank.call(this,"margin-right",a.blank)))):g=!1,a.enScrollVertical=f,a.enScrollHorizontal=g,$(this).data("totalW",i),$(this).data("totalH",e);var j=$(this).find(".ssb_scrollTool_vertical"),k=$(this).find(".ssb_scrollTool_horizontal");f&&g?(j.height(b.height()),k.width(b.width()),initScrollVertical.call(this,a),initScrollHorizontal.call(this,a),setShowModel.call(this,a.type,f,g)):f&&!g?(resetScrollHorizontal.call(this),j.height(b.height()),k.width(b.width()),initScrollVertical.call(this,a),setShowModel.call(this,a.type,f,g)):!f&&g?(resetScrollVertical.call(this),j.height(b.height()),k.width(b.width()),initScrollHorizontal.call(this,a),setShowModel.call(this,a.type,f,g)):(resetScrollVertical.call(this),resetScrollHorizontal.call(this),$(this).find(".simpleScrollBox").off("mouseenter."+namespace+" mouseleave."+namespace))}function setScrollBlank(a,b){var c=$(this).find(".ssb_container_wrapper");$.browser.msie&&$.browser.version<=6?"margin-right"==a?c.width($(this).data("boxW")-b):c.height($(this).data("boxH")-b):c.css(a,b)}function initScrollVertical(a){var b=$(this).find(".ssb_container_wrapper"),c=$(this).find(".ssb_container"),d=$(this).find(".ssb_dragger_vertical"),e=$(this).find(".ssb_scrollTool_vertical"),f=b.height(),g=c.height();scrollScaleVertical=g/f,d.height(parseInt(f/scrollScaleVertical,10)),scrollRangeVertical=e.height()-d.height(),contRangeVertical=g-f,d.find(".ssb_dragger_bar").css("background",a.color),-contRangeVertical>parseInt(c.css("top"),10)&&(c.animate({top:-contRangeVertical},100),d.css("top",scrollRangeVertical)),a.scrollRangeVertical=scrollRangeVertical,a.contRangeVertical=contRangeVertical,a.scrollScaleVertical=scrollScaleVertical}function resetScrollVertical(){var a=$(this).find(".ssb_container"),b=$(this).find(".ssb_dragger_vertical"),c=$(this).find(".ssb_scrollTool_vertical");setScrollBlank.call(this,"margin-right",0),a.css("top",0),b.css("top",0),c.hide()}function initScrollHorizontal(a){var b=$(this).find(".ssb_container_wrapper"),c=$(this).find(".ssb_container"),d=$(this).find(".ssb_dragger_horizontal"),e=$(this).find(".ssb_scrollTool_horizontal"),f=b.width(),g=c.get(0).scrollWidth;scrollScaleHorizontal=g/f,d.width(parseInt(f/scrollScaleHorizontal,10)),scrollRangeHorizontal=e.width()-d.width(),contRangeHorizontal=g-f,d.find(".ssb_dragger_bar").css("background",a.color),-contRangeHorizontal>parseInt(c.css("left"),10)&&(c.animate({left:-contRangeHorizontal},100),d.css("left",scrollRangeHorizontal)),a.scrollRangeHorizontal=scrollRangeHorizontal,a.contRangeHorizontal=contRangeHorizontal,a.scrollScaleHorizontal=scrollScaleHorizontal}function resetScrollHorizontal(){var a=$(this).find(".ssb_container"),b=$(this).find(".ssb_dragger_horizontal"),c=$(this).find(".ssb_scrollTool_horizontal");setScrollBlank.call(this,"margin-bottom",0),a.css("left",0),b.css("left",0),c.hide()}function setShowModel(a,b,c){var d=$(this).find(".ssb_scrollTool_vertical"),e=$(this).find(".ssb_scrollTool_horizontal"),f=$(this).find(".simpleScrollBox");"show"==a?(b&&d.show(),c&&e.show()):"asNeeded"==a&&f.off("mouseenter."+namespace+" mouseleave."+namespace).on("mouseenter."+namespace,function(){b&&d.stop(!0,!0).fadeIn(200),
c&&e.stop(!0,!0).fadeIn(200),$(this).addClass("ssb_onOver")}).on("mouseleave."+namespace,function(){d.hasClass("ssb_onDrag")||e.hasClass("ssb_onDrag")||(b&&d.stop(!0,!0).fadeOut(200),c&&e.stop(!0,!0).fadeOut(200)),$(this).removeClass("ssb_onOver")})}function dragScroll(a,b){var c,d,e=null,f=null,g=$(this).find(".ssb_scrollTool_vertical"),h=$(this).find(".ssb_scrollTool_horizontal"),i=$(this).find(".simpleScrollBox"),j=$(this).find(".ssb_container");"y"==a?(c="top",d="clientY",e=b.onScrollingY,f=$(this).find(".ssb_dragger_vertical")):(c="left",d="clientX",e=b.onScrollingX,f=$(this).find(".ssb_dragger_horizontal")),f.on("mousedown."+namespace,function(k){k.preventDefault(),$(this).parent().addClass("ssb_onDrag").find(".ssb_dragger_bar").css("background",b.activeColor);var l,m,n,o,p;"y"==a?(l=k.clientY,n=b.scrollRangeVertical,o=b.contRangeVertical,p=b.scrollScaleVertical):(l=k.clientX,n=b.scrollRangeHorizontal,o=b.contRangeHorizontal,p=b.scrollScaleHorizontal),m=parseInt($(this).css(c),10),+[1]||(document.onselectstart=function(){return!1}),$(document).on("mousemove."+namespace,function(a){var g=a[d]-l,h=parseInt(f.css(c),10),i=g+m;if(!(i>=n&&h>=n||0>=i&&0>=h)){var k=Math.round(g+m);k=Math.min(Math.max(0,k),n);var q=Math.round(k*p);q=Math.min(Math.max(0,q),o),f.css(c,k),j.css(c,-q),e&&e(),b.onScrolling&&b.onScrolling()}}).on("mouseup."+namespace,function(){f.parent().removeClass("ssb_onDrag").find(".ssb_dragger_bar").css("background",b.color),$(this).off("mousemove."+namespace+" mouseup."+namespace),+[1]||(document.onselectstart=null),"asNeeded"!=b.type||i.hasClass("ssb_onOver")||(g.fadeOut(200),h.fadeOut(200))})})}function mousewheel(a){var b=$(this).find(".ssb_container"),c=$(this).find(".ssb_dragger_vertical"),d="mousewheel",e=null;void 0!==document.mozHidden&&(d="DOMMouseScroll"),$(this).on(d+"."+namespace,function(d){if(a.enScrollVertical){d.preventDefault();var f=d.originalEvent;d.delta=f.wheelDelta?f.wheelDelta/120:-(f.detail||0)/3;var g=parseInt(b.css("top"),10);if(d.delta<=0&&g<=-a.contRangeVertical||d.delta>=0&&g>=0)return;var h=300*d.delta,i=Math.round(g+h);i=Math.min(Math.max(-a.contRangeVertical,i),0);var j=Math.round(i/a.scrollScaleVertical);j=Math.min(Math.max(-a.scrollRangeVertical,j),0),c.stop().animate({top:-j},300,"linear"),b.stop().animate({top:i},300,"linear",function(){clearInterval(e),e=null}),a.onScrollingY&&a.onScrollingY(),a.onScrolling&&a.onScrolling(),clearInterval(e),e=null;var k=0;e=setInterval(function(){k>=8&&(clearInterval(e),e=null),a.onScrollingY&&a.onScrollingY(),a.onScrolling&&a.onScrolling(),k++},30)}})}function fit(a){var b=this,c=$(this).find(".ssb_container"),d=$(this).find(".simpleScrollBox");setInterval(function(){$(b).parents(":hidden").size()>0||(c.height()!=$(b).data("totalH")||c.get(0).scrollWidth!=$(b).data("totalW")||d.height()!=$(b).data("boxH")||d.width()!=$(b).data("boxW"))&&($(b).data("boxW",d.width()),$(b).data("boxH",d.height()),judgeScroll.call(b,a))},250)}function getContainer(){return $(this).find(".ssb_container")}var namespace="simpleScroll";$.fn.simpleScroll=function(opts){var result,args=arguments;if(this.data(namespace)||(this.data(namespace,!0),initDOM.call(this,opts)),"string"==typeof opts)try{result=eval(opts).apply(this,Array.prototype.slice.call(args,1))}catch(e){throw"simpleScroll插件调用方法出错:"+e.message}return result||this}}),function(a){function b(b){b=a.extend({},f,b);var c=b.message,g="",h=b.afterclose,i=a.extend({},e,b.options),j=!0,k="no",l=i.id||"_stk"+Math.floor(99999*Math.random());return a(".sticky-note").each(function(){var b=a(this);b.html()==c&&b.is(":visible")&&(k="yes",i.duplicates||(j=!1)),b.attr("id")==l&&(l=i.id||Math.floor(9999999*Math.random()))}),a("body").find(".sticky-queue."+i.position).html()||a("body").append('<div class="sticky-queue noprint '+i.position+'"></div>'),a.fn.bgiframe&&a(".sticky-queue").bgiframe(),d.join(",").indexOf(b.level)>-1?(g='<div class="msg-b-weak msg-b-'+b.level+'"><i></i><div class="msg-cnt">',""!=c&&null!=c&&(g+="<p>"+c+"</p>"),g+="</div></div>"):""!=c&&null!=c&&(g+="<p>"+c+"</p>"),j&&(a("#"+l).html()||a(".sticky-queue."+i.position).prepend('<div class="sticky border-'+i.position+" "+(b.type?b.type:"")+'" id="'+l+'"></div>'),a("#"+l).empty().append('<span class="close sticky-close" rel="'+l+'" title="关闭">&times;</span>'),a("#"+l).append('<div class="sticky-note" rel="'+l+'">'+g+"</div>"),height=a("#"+l).height(),a("#"+l).css("height",height),a("#"+l).slideDown(i.speed,function(){a(".sticky").ready(function(){function b(){var b=a("#"+l),c=b.closest(".sticky-queue"),d=c.find(".sticky");b.remove(),1==d.length&&c.remove();try{h&&h()}catch(e){}}i.autoclose&&a("#"+l).delay(i.autoclose).slideUp(i.speed,function(){b()}).on("mouseenter",function(){a(this).dequeue().stop()}).on("mouseleave",function(){a(this).delay(i.autoclose).slideUp(i.speed,function(){b()})})}),a(".sticky-close").click(function(){a("#"+a(this).attr("rel")).dequeue().slideUp(i.speed,function(){var b=a(this),c=b.closest(".sticky-queue"),d=c.find(".sticky");b.remove(),1==d.length&&c.remove();try{h&&h()}catch(e){}})})}),j=!0),("top-center"==i.position||"bottom-center"==i.position)&&a(".sticky-queue."+i.position).css("margin-left",-a(".sticky-queue."+i.position).width()/2),b.afteropen&&b.afteropen(i),{id:l,duplicate:k,displayed:j,position:i.position,level:i.level,options:i}}var c=function(b,c,d,e){if(a.isPlainObject(b))return b;var f={};return f.message=b,a.isPlainObject(c)?e=c:a.isFunction(c)?(e=d,d=c):a.isPlainObject(d)&&(e=d,d=e.afterclose),f.level="string"==typeof c&&c||(e?e.level:null),f.afterclose=d||(e?e.callback||e.afterclose:null),f.afteropen=e?e.afteropen||null:null,f.options=e,e&&e.type&&(f.type=e.type),f};a.sticky=function(a,d,e,f){if("object"==typeof a)return b(a);var g=c(a,d,e,f);return null==g.level&&(g.level=g.type||"attention"),b(g)};var d=["ok","error","attention","question","alarm"],e={speed:"fast",duplicates:1,autoclose:2e3,position:"top-center",html:!1,id:""},f={message:"",level:"",afteropen:null,afterclose:null};window.jSticky=function(b,c){a.sticky(b,c)}}(jQuery),jQuery.fn.extend({tabs:function(a,b){var c,d=$(this),e=$("#"+a.panelid)||void 0,f=a.eventype||"click",g=a.activeIndex||0,h=a.lazytime||0;d.on(f,"li[data-tab]",function(){var a=$(this).attr("data-tab");0!=h?(clearTimeout(c),c=setTimeout(function(){d.trigger("change.tabs",a)},h)):d.trigger("change.tabs",a)}),d.on("mouseout","li[data-tab]",function(){clearTimeout(c)}),d.on("change.tabs",function(a,c){d.find("li[data-tab]").removeClass("active"),d.find(">[data-tab="+c+"]").addClass("active"),e.find(">[data-tab]").removeClass("active"),e.find(">[data-tab="+c+"]").addClass("active"),b&&b(c)});var i=d.find("li:eq("+g+")").attr("data-tab");return d.trigger("change.tabs",i),this.changeTabs=function(a){d.trigger("change.tabs",a)},this}});var language={"validator.required":"此项为必填项!","validator.ip":"IP格式错误，请检查您的输入是否有误!","validator.email":"邮箱地址错误，请检查您的输入是否有误!","validator.mobile":"手机号码错误，是11位数字!","validator.tel":"电话（传真）号码错误，请检查您的输入是否有误!","validator.unitLength":"个字","validator.unitLength.chinese":"个字符,一个汉字代表$[0]个字符","validator.maxLength":"输入的项的长度不能超过$[0]","validator.minLength":"输入的项的长度不能少于$[0]","validator.common":"不能包含特殊字符：$[0]","validator.fixLength":"必需是$[0]个字符","validator.noAllowDecimals":"此项不能使用小数点","validator.noAllowNegative":"输入的值必须为正数","validator.minValue":"输入的值不能小于$[0]","validator.maxValue":"输入的值不能大于$[0]","validator.number":"请输入正确的数字","validator.lon":"经度错误，请检查您的输入是否有误！","validator.lat":"纬度错误，请检查您的输入是否有误！","form.info":"请输入${labelName}","info.mobile":"请输入手机号码（11位数字）","info.tel":"请输入电话号码（区号+电话号码）","info.ip":"请输入有效的IP地址","info.email":"请输入有效的邮箱地址","info.lon":"请输入经度，范围[-180,180]","info.lat":"请输入纬度，范围[-90,90]","info.maxLength":"请输入$[0]~$[1]","info.minLength":"请输入至少$[0]","info.fixLength":"请输入$[0]","info.min-maxLength":"请输入$[0]~$[1]","info.common":"不包含：$[0]","info.number":"请输入有效数字","info.number.min-max":"请输入$[0]~$[1]的数字","info.number.min":"请输入大于等于$[0]的数字","info.number.max":"请输入小于等于$[0]的数字","info.number.allowDN":"，允许使用小数点和负数","info.number.allowD":"，允许使用小数点","info.number.allowN":"，允许使用负数"};Array.prototype.get=function(a){return this[a]},language.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/\$\{(.+?)\}/g,interpolate_get:/\$\[(.+?)\]/g,interpolate_text:/\$text\{(.+?)\}/g},language.template=function(a,b,c){if(null==b)return a;var d=language.templateSettings||c,e="var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('"+a.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(d.interpolate,function(a,b){return"',"+b.replace(/\\'/g,"'")+",'"}).replace(d.interpolate_get,function(a,b){return"',get("+b.replace(/\\'/g,"'")+"),'"}).replace(d.evaluate||null,function(a,b){return"');"+b.replace(/\\'/g,"'").replace(/[\r\n\t]/g," ")+"__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');",f=new Function("obj",e);return f(b)},language.text=function(a,b){return null!=b&&"object"!=typeof b&&(b=Array.prototype.slice.call(arguments,1)),language.template(language[a],b)},function(a){function b(a){var b="true"==a.attr("isOverflown");return b&&a.closest(".input-wrap").length>0?a.closest(".input-wrap"):a.parent()}function c(c,d,e){var f=b(c),g=f.find('label[generated="true"]'),h="true"==c.attr("isOverflown");if(0==g.length)if(g=a('<label class="info" generated="true"></label>'),h){var i=c.outerWidth(),j=c.outerHeight();c.attr("wrapped","true");var k=a('<div class="input-wrap" style="width:'+i+"px; height: "+j+'px"></div>').insertBefore(c);c.data("frozen",!0),c.appendTo(k),a.browser.msie&&parseInt(a.browser.version)<8&&c.wrap("<span></span>"),setTimeout(function(){c.focus(),c.removeData("frozen")},0),g.appendTo(k)}else g.appendTo(f);if(h){g.text(d).append('<i class="arrow"><b></b></i>').show();var l=c.attr("promptPosition");"info"==e?(c.removeClass("error"),g.removeClass("tip-info tip-error").removeClass("tip-info-topLeft tip-info-topRight tip-info-centerRight tip-info-bottomLeft tip-info-bottomRight").removeClass("tip-error-topLeft tip-error-topRight tip-error-centerRight tip-error-bottomLeft tip-error-bottomRight").addClass("tip tip-info tip-info-"+l).css({opacity:0}).animate({opacity:1})):(c.addClass("error"),g.removeClass("tip-info tip-error").removeClass("tip-info-topLeft tip-info-topRight tip-info-centerRight tip-info-bottomLeft tip-info-bottomRight").removeClass("tip-error-topLeft tip-error-topRight tip-error-centerRight tip-error-bottomLeft tip-error-bottomRight").addClass("tip tip-error tip-error-"+l).css({opacity:0}).animate({opacity:1}))}else g.text(d).show(),"info"==e?(c.removeClass("error"),g.removeClass("error").addClass("info")):(c.addClass("error"),g.removeClass("info").addClass("error"))}function d(b,c){var d=0,e=b[0].getAttribute("hasChinese");e="true"==e;var f,g;if(e?(f=b[0].getAttribute("chineseUnitLength"),g=language.text("validator.unitLength.chinese",[f])):g=language.text("validator.unitLength"),null!=c&&""!=a.trim(c))if(e)if(a.isNumeric(f)){f=parseInt(f);for(var h=[],i=0;f>i;i++)h.push("*");d=a.trim(c).replace(/[^\x00-\xff]/g,h.join("")).length}else f=3,d=a.trim(c).replace(/[^\x00-\xff]/g,"***").length;else d=a.trim(c).length;return{length:d,lastMag:g}}function e(b,c){if(c)return b.showValidate(c),!1;var e=b.val(),g=b[0].getAttribute("required");if(("required"==g||"true"==g||1==g)&&""==a.trim(e))return b.showValidate(language.text("validator.required"),b),!1;var i=b.attr("minLength");i=i?parseInt(i):-1;var j=b.attr("maxLength");j=j?parseInt(j):-1;var k=d(b,e),l=k.length;if(i==j&&i>-1&&l!=i)return b.showValidate(language.text("validator.fixLength",[j])+k.lastMag),!1;if(i>l&&i>-1)return b.showValidate(language.text("validator.minLength",[i])+k.lastMag),!1;if(l>j&&j>-1)return b.showValidate(language.text("validator.maxLength",[j])+k.lastMag),!1;var m=f(b[0]);if(null!=m)for(var n=0;n<e.length;n++){var o=e.charAt(n);if(m.indexOf(o)>-1)return b.showValidate(language.text("validator.common",[m])),!1}var p=b.attr("vtype");if(""==e||null==e||null==p){var q={};return b.trigger("validate",[e,q]),null!=q.error?(b.showValidate(q.error),!1):(b.clearValidate(),!0)}var r=!0;if(a.each(p.split(","),function(c,d){if(null!=h[d]){var f=h[d].validator.call(b,e);if(1!=f){var g;return 0==f?(g=h[d].msg,a.isFunction(g)&&(g=g.call(b,e))):g=f,b.showValidate(g),r=!1,!1}}}),!r)return!1;var q={};return b.trigger("validate",[e,q]),null!=q.error?(b.showValidate(q.error),!1):(b.clearValidate(),!0)}function f(a){var b=a.getAttribute("unUseChars");if(null!=b)return b;if(null==a.getAttribute("vtype")||a.getAttribute("vtype").indexOf("common")<0)return null;var c=a.getAttribute("excludeChars"),d=a.getAttribute("includeChars");if(b=g,null!=d)for(var e=0;e<d.length;e++){var f=d.charAt(e);b=b.indexOf(f)>-1?b:b+f}if(null!=c)for(var e=0;e<c.length;e++)b=b.replace(c.charAt(e),"");return a.setAttribute("unUseChars",b),b}var g="\\/:*?\"<|'%>",h={number:{validator:function(a){if(isNaN(a))return!1;if("true"!=this.attr("allowDecimals")&&a.indexOf(".")>-1)return language.text("validator.noAllowDecimals");if(a=parseFloat(a),"true"!=this.attr("allowNegative")&&0>a)return language.text("validator.noAllowNegative");var b=this.attr("minValue"),c=this.attr("maxValue");return null!=b&&(b=parseFloat(b),b>a)?language.text("validator.minValue",[b]):null!=c&&(c=parseFloat(c),a>c)?language.text("validator.maxValue",[c]):!0},msg:language.text("validator.number"),info:function(){var a="true"==this.attr("allowDecimals"),b="true"==this.attr("allowNegative"),c=[],d=this.attr("minValue"),e=this.attr("maxValue");return c.push(null!=d&&null!=e?language.text("info.number.min-max",d,e):null!=d?language.text("info.number.min",d):null!=e?language.text("info.number.max",e):language.text("info.number")),a&&!b?c.push(language.text("info.number.allowD")):!a&&b?c.push(language.text("info.number.allowN")):a&&b&&c.push(language.text("info.number.allowDN")),c.join("")}},email:{validator:function(a){return/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+((\.[a-zA-Z0-9_-]{2,3}){1,2})$/.test(a)},msg:language.text("validator.email"),info:language.text("info.email")},mobile:{validator:function(a){return/^[1][1-9][0-9]{9}$/.test(a)},msg:language.text("validator.mobile"),info:language.text("info.mobile")},tel:{validator:function(b){return null==b?!0:(b=a.trim(b),b.length>9?/^[0][1-9]{2,3}-[1-9]{1}[0-9]{6,8}$/.test(b):/^[1-9]{1}[0-9]{6,8}$/.test(b))},msg:language.text("validator.tel"),info:language.text("info.tel")},ip:{validator:function(a){return/^(([01]?[\d]{1,2})|(2[0-4][\d])|(25[0-5]))(\.(([01]?[\d]{1,2})|(2[0-4][\d])|(25[0-5]))){3}$/.test(a)},msg:language.text("validator.ip"),info:language.text("info.ip")},mac:{validator:function(a){var b=null;if(b=a.split(a.indexOf(":")>0?":":"-"),null==b||6!=b.length)return!1;for(var c=0;6>c;c++){var d=parseInt(b[c],16);if(isNaN(d)||0>d||d>255)return!1}return!0},msg:"输入的mac地址格式不正确!",info:"请输入有效的mac地址!"},code:{validator:function(b){var c=new RegExp("[^A-Za-z0-9_]+");return c.test(a.trim(b))?!1:!0},msg:"编号只允许字母、数字和下划线!",info:"请输入有效的编号(字母、数字、下划线的组合)!"},url:{validator:function(a){return new RegExp("((http|https)://)(([a-zA-Z0-9._-]+.[a-zA-Z]{2,6})|([0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}))(:[0-9]{1,4})*(/[a-zA-Z0-9&%_./-~-]*)?").test(a)},msg:"输入的URL格式不正确!",info:"请输入有效的URL!"},lon:{validator:function(a){return/^(-|\+)?(180|(180\.0+)|((\d{1,2}|(1([0-7]\d)))\.\d+)|\d{1,2}|(1[0-7]\d))$/.test(a)},msg:language.text("validator.lon"),info:language.text("info.lon")},lat:{validator:function(a){return/^(-|\+)?(90|90\.0+|([1-8]\d\.\d+|\d\.\d+)|([1-8]\d)|\d)$/.test(a)},msg:language.text("validator.lat"),info:language.text("info.lat")},regex:{validator:function(a){var b=this.attr("regex");return new RegExp(b).test(a)},msg:function(){return this.attr("regexError")},info:function(){return this.attr("regexInfo")}}};a.vtype=h,a.fn.clearValidate=function(){this.removeClass("error");var a=b(this);a.find("label[generated=true]").empty().hide()},a.fn.showValidate=function(a){return this.clearValidate(),a?(c(this,a,"error"),this):void 0},a.fn.showInfo=function(a){return this.clearValidate(),a?(c(this,a,"info"),this):void 0},a.fn.validate=function(a){return e(this,null,a)},a("textarea[maxLength]").live({keydown:function(b){if(!(8==b.which||36<b.which&&b.which<41)){var c=this.value.length,d=this.getAttribute("maxLength");if(a.isNumeric(d))return d=parseInt(d),c>=d?!1:void 0}}}),a("[vtype*=number]").live({keypress:function(b){return"true"==this.getAttribute("allowNegative")&&45==b.which?/^-/.test(a(this).val())?!1:!0:"true"==this.getAttribute("allowDecimals")&&46==b.which?/\./.test(a(this).val())?!1:!0:b.which<48||b.which>57?!1:!0},paste:function(){if(a.browser.msie){var b=/^\d+$/;"true"==this.getAttribute("allowNegative")&&"true"==this.getAttribute("allowDecimals")?b=/^-?\d+(\.\d+)?$/:"true"==this.getAttribute("allowNegative")?b=/^-?\d+$/:"true"==this.getAttribute("allowDecimals")&&(b=/^\d+\.\d+$/);var c=window.clipboardData.getData("text");return b.test(a.trim(c))?!0:!1}return!0},change:function(){var b=/^\d+$/;"true"==this.getAttribute("allowNegative")&&"true"==this.getAttribute("allowDecimals")?b=/^-?\d+(\.\d+)?$/:"true"==this.getAttribute("allowNegative")?b=/^-?\d+$/:"true"==this.getAttribute("allowDecimals")&&(b=/^\d+\.?\d+$/),b.test(a(this).val())||""===a(this).val()||a(this).val("")}}),a("[vtype*=common]").live({keydown:function(){f(this)},keypress:function(a){return this.getAttribute("unUseChars").indexOf(String.fromCharCode(a.which))>-1?!1:!0}}),a("[vtype*=code]").live({keypress:function(a){var b=new RegExp("[^A-Za-z0-9_]+");return b.test(String.fromCharCode(a.which))?!1:!0},change:function(){var b=new RegExp("[^A-Za-z0-9_]+");a(this).val(a(this).val().replace(b,""))}}),a(function(){function b(){return window.clipboardData?window.clipboardData.getData("Text"):""}a("body").bind("paste",function(c){var d=c.target;if("calendar"==d.getAttribute("hikui"))return!1;var e=d.getAttribute("vtype"),g=d.getAttribute("type"),h=d.getAttribute("not-validator-paste");if(!("text"!=g&&"TEXTAREA"!=d.tagName||!e||e.indexOf("common")<0||1==h)){f(d);for(var i=b(),j=d.getAttribute("unUseChars"),k=0;k<i.length;k++){var l=i.charAt(k);if(j.indexOf(l)>-1)return a.sticky("粘贴内容不能包含以下特殊字符:"+j+" 此次操作无效！",{type:"attention"}),!1}return!0}})}),a(function(){a('form[history="true"]').delegate('input[type="text"][not-use-char-code!=true]',{keypress:function(a){return g.indexOf(String.fromCharCode(a.which))>-1?!1:!0}})}),a(".auto-input").live("focusin",function(b){var c=a(b.target);if(c.addClass("info"),1!=c.data("frozen")){var d=[];if(c.attr("self-focus-info"))return void c.showInfo(c.attr("self-focus-info"));var e=c[0].getAttribute("required"),g=c.attr("minLength");g&&(g=parseInt(g));var i=c.attr("maxLength");i&&(i=parseInt(i));var j=null;if(i>-1||g>0){var k=c[0].getAttribute("hasChinese");if(k="true"==k?!0:!1){var l=c[0].getAttribute("chineseUnitLength");l=a.isNumeric(l)?parseInt(l):3,j=language.text("validator.unitLength.chinese",[l])}else j=language.text("validator.unitLength")}i>-1&&g>0?d.push(i==g?language.text("info.fixLength",[i])+j:language.text("info.min-maxLength",[g,i])+j):i>-1?d.push(language.text("info.maxLength",["required"==e||"true"==e||1==e?1:0,i])+j):g>0&&d.push(language.text("info.minLength",[g])+j);var m=c.attr("vtype");null!=m&&a.each(m.split(","),function(b,e){return null==h[e]?!0:null==h[e].info?!0:void d.push(a.isFunction(h[e].info)?h[e].info.call(c):h[e].info)});var n=f(c[0]);null!=n&&d.push(language.text("info.common",[n])),c.attr("focus-info")&&d.push(c.attr("focus-info")),c.showInfo(d.join("! "))}}).live("focusout",function(b){var c=a(b.target);if(c.removeClass("info"),1!=c.data("frozen")){"false"!==c.attr("auto-trim")&&c.val(a.trim(c.val()));var d=c.attr("required"),e=c.val();"required"!=d&&"true"!=d&&1!=d||""!=a.trim(e)?c.validate():c.showValidate(language.text("validator.required"))}})}(jQuery),function(a){a.fn.Xslider=function(b){function c(a){switch(a=a||"next",g>=j.length&&(g=0),0>g&&(g=j.length-1),f.affect){case"scrollx":i.width(j.length*j.width());var b,c=parseInt(i.find(f.ctag+":first").attr("data-index"));if("prev"==a)b=-1;else if("next"==a)b=1;else if("trigger"==a){var c=parseInt(i.find(f.ctag+":first").attr("data-index"));b=g-c}if(b>0)i.stop().animate({left:-j.width()*b},f.speed,"swing",function(){var a=i.find(f.ctag+":lt("+b+")");i.append(a),i.css("left","0");var c=i.find(f.ctag+":first").attr("data-index");l.removeClass(f.current).eq(c).addClass(f.current)});else if(0>b){var d=i.find(f.ctag+":gt("+(j.length-1+b)+")");i.prepend(d),i.css("left",j.width()*b),i.stop().animate({left:0},f.speed,"swing",function(){var a=i.find(f.ctag+":first").attr("data-index");l.removeClass(f.current).eq(a).addClass(f.current)})}break;case"scrolly":j.css({display:"block"});var b;if("prev"==a)b=-1;else if("next"==a)b=1;else if("trigger"==a){var c=parseInt(i.find(f.ctag+":first").attr("data-index"));b=g-c}if(b>=0)i.stop().animate({top:-j.height()*b},f.speed,"swing",function(){var a=i.find(f.ctag+":lt("+b+")");i.append(a),i.css("top","0");var c=i.find(f.ctag+":first").attr("data-index");l.removeClass(f.current).eq(c).addClass(f.current)});else if(0>b){var d=i.find(f.ctag+":gt("+(j.length-1+b)+")");i.prepend(d),i.css("top",j.height()*b),i.stop().animate({top:0},f.speed,"swing",function(){var a=i.find(f.ctag+":first").attr("data-index");l.removeClass(f.current).eq(a).addClass(f.current)})}break;case"fade":j.eq(h).stop().animate({opacity:0},f.speed/2).css("z-index",1).end().eq(g).css("z-index",9).stop().animate({opacity:1},f.speed/2),l.removeClass(f.current).eq(g).addClass(f.current);break;case"none":j.hide().eq(g).show(),l.removeClass(f.current).eq(g).addClass(f.current)}h=g,g++}function d(){clearInterval(m)}function e(){f.auto&&(m=setInterval(c,f.space))}var f={affect:"scrollx",speed:1200,space:6e3,auto:!0,trigger:"mouseover",conbox:".conbox",ctag:"a",switcher:".switcher",stag:"a",current:"cur",rand:!1};f=a.extend({},f,b);var g=1,h=0,i=a(this).find(f.conbox),j=i.find(f.ctag);if(!(j.length<2)){j.each(function(b,c){a(c).attr("data-index",b)});var k=a(this).find(f.switcher);0==k.length&&(k=a(f.switcher));var l=k.find(f.stag);if(f.rand&&(g=Math.floor(Math.random()*j.length),c()),"fade"==f.affect&&a.each(j,function(b){a(this).css(0===b?{position:"absolute","z-index":9}:{position:"absolute","z-index":1,opacity:0})}),f.auto)var m=setInterval(c,f.space);l.bind(f.trigger,function(){d(),g=a(this).prevAll(f.stag).length,c("trigger"),e()}),k.find(".prev").bind("click",function(){d(),g-=2,c("prev"),e()}),k.find(".next").bind("click",function(){d(),c("next"),e()}),i.hover(d,e)}}}(jQuery),function($){var settings={},roots={},caches={},_consts={className:{BUTTON:"button",LEVEL:"level",ICO_LOADING:"ico_loading",SWITCH:"switch",NAME:"node_name"},event:{NODECREATED:"ztree_nodeCreated",CLICK:"ztree_click",EXPAND:"ztree_expand",COLLAPSE:"ztree_collapse",ASYNC_SUCCESS:"ztree_async_success",ASYNC_ERROR:"ztree_async_error",REMOVE:"ztree_remove",SELECTED:"ztree_selected",UNSELECTED:"ztree_unselected"},id:{A:"_a",ICON:"_ico",SPAN:"_span",SWITCH:"_switch",UL:"_ul"},line:{ROOT:"root",ROOTS:"roots",CENTER:"center",BOTTOM:"bottom",NOLINE:"noline",LINE:"line"},folder:{OPEN:"open",CLOSE:"close",DOCU:"docu"},node:{CURSELECTED:"curSelectedNode"}},_setting={treeId:"",treeObj:null,view:{addDiyDom:null,autoCancelSelected:!0,dblClickExpand:!0,expandSpeed:"fast",fontCss:{},nameIsHTML:!1,selectedMulti:!0,showIcon:!0,showLine:!0,showTitle:!0,txtSelectedEnable:!1},data:{key:{children:"children",name:"name",title:"",url:"url",icon:"icon"},simpleData:{enable:!1,idKey:"id",pIdKey:"pId",rootPId:null},keep:{parent:!1,leaf:!1}},async:{enable:!1,contentType:"application/x-www-form-urlencoded",type:"post",dataType:"text",url:"",autoParam:[],otherParam:[],dataFilter:null},callback:{beforeAsync:null,beforeClick:null,beforeDblClick:null,beforeRightClick:null,beforeMouseDown:null,beforeMouseUp:null,beforeExpand:null,beforeCollapse:null,beforeRemove:null,onAsyncError:null,onAsyncSuccess:null,onNodeCreated:null,onClick:null,onDblClick:null,onRightClick:null,onMouseDown:null,onMouseUp:null,onExpand:null,onCollapse:null,onRemove:null}},_initRoot=function(a){var b=data.getRoot(a);b||(b={},data.setRoot(a,b)),b[a.data.key.children]=[],b.expandTriggerFlag=!1,b.curSelectedList=[],b.noSelection=!0,b.createdNodes=[],b.zId=0,b._ver=(new Date).getTime()},_initCache=function(a){var b=data.getCache(a);b||(b={},data.setCache(a,b)),b.nodes=[],b.doms=[]},_bindEvent=function(a){var b=a.treeObj,c=consts.event;b.bind(c.NODECREATED,function(b,c,d){tools.apply(a.callback.onNodeCreated,[b,c,d])}),b.bind(c.CLICK,function(b,c,d,e,f){tools.apply(a.callback.onClick,[c,d,e,f])}),b.bind(c.EXPAND,function(b,c,d){tools.apply(a.callback.onExpand,[b,c,d])}),b.bind(c.COLLAPSE,function(b,c,d){tools.apply(a.callback.onCollapse,[b,c,d])}),b.bind(c.ASYNC_SUCCESS,function(b,c,d,e){tools.apply(a.callback.onAsyncSuccess,[b,c,d,e])}),b.bind(c.ASYNC_ERROR,function(b,c,d,e,f,g){tools.apply(a.callback.onAsyncError,[b,c,d,e,f,g])}),b.bind(c.REMOVE,function(b,c,d){tools.apply(a.callback.onRemove,[b,c,d])}),b.bind(c.SELECTED,function(b,c,d){tools.apply(a.callback.onSelected,[c,d])}),b.bind(c.UNSELECTED,function(b,c,d){tools.apply(a.callback.onUnSelected,[c,d])})},_unbindEvent=function(a){var b=a.treeObj,c=consts.event;b.unbind(c.NODECREATED).unbind(c.CLICK).unbind(c.EXPAND).unbind(c.COLLAPSE).unbind(c.ASYNC_SUCCESS).unbind(c.ASYNC_ERROR).unbind(c.REMOVE).unbind(c.SELECTED).unbind(c.UNSELECTED)},_eventProxy=function(a){var b=a.target,c=data.getSetting(a.data.treeId),d="",e=null,f="",g="",h=null,i=null,j=null;if(tools.eqs(a.type,"mousedown")?g="mousedown":tools.eqs(a.type,"mouseup")?g="mouseup":tools.eqs(a.type,"contextmenu")?g="contextmenu":tools.eqs(a.type,"click")?tools.eqs(b.tagName,"span")&&null!==b.getAttribute("treeNode"+consts.id.SWITCH)?(d=tools.getNodeMainDom(b).id,f="switchNode"):(j=tools.getMDom(c,b,[{tagName:"a",attrName:"treeNode"+consts.id.A}]),j&&(d=tools.getNodeMainDom(j).id,f="clickNode")):tools.eqs(a.type,"dblclick")&&(g="dblclick",j=tools.getMDom(c,b,[{tagName:"a",attrName:"treeNode"+consts.id.A}]),j&&(d=tools.getNodeMainDom(j).id,f="switchNode")),g.length>0&&0==d.length&&(j=tools.getMDom(c,b,[{tagName:"a",attrName:"treeNode"+consts.id.A}]),j&&(d=tools.getNodeMainDom(j).id)),d.length>0)switch(e=data.getNodeCache(c,d),f){case"switchNode":e.isParent&&(tools.eqs(a.type,"click")||tools.eqs(a.type,"dblclick")&&tools.apply(c.view.dblClickExpand,[c.treeId,e],c.view.dblClickExpand))?h=handler.onSwitchNode:f="";break;case"clickNode":h=handler.onClickNode}switch(g){case"mousedown":i=handler.onZTreeMousedown;break;case"mouseup":i=handler.onZTreeMouseup;break;case"dblclick":i=handler.onZTreeDblclick;break;case"contextmenu":i=handler.onZTreeContextmenu}var k={stop:!1,node:e,nodeEventType:f,nodeEventCallback:h,treeEventType:g,treeEventCallback:i};return k},_initNode=function(a,b,c,d,e,f){if(c){var g=data.getRoot(a),h=a.data.key.children;c.level=b,c.tId=a.treeId+"_"+ ++g.zId,c.parentTId=d?d.tId:null,c.open="string"==typeof c.open?tools.eqs(c.open,"true"):!!c.open,c[h]&&c[h].length>0?(c.isParent=!0,c.zAsync=!0):(c.isParent="string"==typeof c.isParent?tools.eqs(c.isParent,"true"):!!c.isParent,c.open=c.isParent&&!a.async.enable?c.open:!1,c.zAsync=!c.isParent),c.isFirstNode=e,c.isLastNode=f,c.getParentNode=function(){return data.getNodeCache(a,c.parentTId)},c.getPreNode=function(){return data.getPreNode(a,c)},c.getNextNode=function(){return data.getNextNode(a,c)},c.getIndex=function(){return data.getNodeIndex(a,c)},c.getPath=function(){return data.getNodePath(a,c)},c.isAjaxing=!1,data.fixPIdKeyValue(a,c)}},_init={bind:[_bindEvent],unbind:[_unbindEvent],caches:[_initCache],nodes:[_initNode],proxys:[_eventProxy],roots:[_initRoot],beforeA:[],afterA:[],innerBeforeA:[],innerAfterA:[],zTreeTools:[]},data={addNodeCache:function(a,b){data.getCache(a).nodes[data.getNodeCacheId(b.tId)]=b},getNodeCacheId:function(a){return a.substring(a.lastIndexOf("_")+1)},addAfterA:function(a){_init.afterA.push(a)},addBeforeA:function(a){_init.beforeA.push(a)},addInnerAfterA:function(a){_init.innerAfterA.push(a)},addInnerBeforeA:function(a){_init.innerBeforeA.push(a)},addInitBind:function(a){_init.bind.push(a)},addInitUnBind:function(a){_init.unbind.push(a)},addInitCache:function(a){_init.caches.push(a)},addInitNode:function(a){_init.nodes.push(a)},addInitProxy:function(a,b){b?_init.proxys.splice(0,0,a):_init.proxys.push(a)},addInitRoot:function(a){_init.roots.push(a)},addNodesData:function(a,b,c,d){var e,f=a.data.key.children;b[f]?c>=b[f].length&&(c=-1):(b[f]=[],c=-1),b[f].length>0&&0===c?(b[f][0].isFirstNode=!1,view.setNodeLineIcos(a,b[f][0])):b[f].length>0&&0>c&&(b[f][b[f].length-1].isLastNode=!1,view.setNodeLineIcos(a,b[f][b[f].length-1])),b.isParent=!0,0>c?b[f]=b[f].concat(d):(e=[c,0].concat(d),b[f].splice.apply(b[f],e))},addSelectedNode:function(a,b){var c=data.getRoot(a);data.isSelectedNode(a,b)||c.curSelectedList.push(b)},addCreatedNode:function(a,b){if(a.callback.onNodeCreated||a.view.addDiyDom){var c=data.getRoot(a);c.createdNodes.push(b)}},addZTreeTools:function(a){_init.zTreeTools.push(a)},exSetting:function(a){$.extend(!0,_setting,a)},fixPIdKeyValue:function(a,b){a.data.simpleData.enable&&(b[a.data.simpleData.pIdKey]=b.parentTId?b.getParentNode()[a.data.simpleData.idKey]:a.data.simpleData.rootPId)},getAfterA:function(){for(var a=0,b=_init.afterA.length;b>a;a++)_init.afterA[a].apply(this,arguments)},getBeforeA:function(){for(var a=0,b=_init.beforeA.length;b>a;a++)_init.beforeA[a].apply(this,arguments)},getInnerAfterA:function(){for(var a=0,b=_init.innerAfterA.length;b>a;a++)_init.innerAfterA[a].apply(this,arguments)},getInnerBeforeA:function(){for(var a=0,b=_init.innerBeforeA.length;b>a;a++)_init.innerBeforeA[a].apply(this,arguments)},getCache:function(a){return caches[a.treeId]},getNodeIndex:function(a,b){if(!b)return null;for(var c=a.data.key.children,d=b.parentTId?b.getParentNode():data.getRoot(a),e=0,f=d[c].length-1;f>=e;e++)if(d[c][e]===b)return e;return-1},getNextNode:function(a,b){if(!b)return null;for(var c=a.data.key.children,d=b.parentTId?b.getParentNode():data.getRoot(a),e=0,f=d[c].length-1;f>=e;e++)if(d[c][e]===b)return e==f?null:d[c][e+1];return null},getNodeByParam:function(a,b,c,d){if(!b||!c)return null;for(var e=a.data.key.children,f=0,g=b.length;g>f;f++){if(b[f][c]==d)return b[f];var h=data.getNodeByParam(a,b[f][e],c,d);if(h)return h}return null},getNodeCache:function(a,b){if(!b)return null;var c=caches[a.treeId].nodes[data.getNodeCacheId(b)];return c?c:null},getNodeName:function(a,b){var c=a.data.key.name;return""+b[c]},getNodePath:function(a,b){if(!b)return null;var c;return c=b.parentTId?b.getParentNode().getPath():[],c&&c.push(b),c},getNodeTitle:function(a,b){var c=""===a.data.key.title?a.data.key.name:a.data.key.title;return""+b[c]},getNodes:function(a){return data.getRoot(a)[a.data.key.children]},getNodesByParam:function(a,b,c,d){if(!b||!c)return[];for(var e=a.data.key.children,f=[],g=0,h=b.length;h>g;g++)b[g][c]==d&&f.push(b[g]),f=f.concat(data.getNodesByParam(a,b[g][e],c,d));return f},getNodesByParamFuzzy:function(a,b,c,d){if(!b||!c)return[];var e=a.data.key.children,f=[];d=d.toLowerCase();for(var g=0,h=b.length;h>g;g++)"string"==typeof b[g][c]&&b[g][c].toLowerCase().indexOf(d)>-1&&f.push(b[g]),f=f.concat(data.getNodesByParamFuzzy(a,b[g][e],c,d));return f},getNodesByFilter:function(a,b,c,d,e){if(!b)return d?null:[];for(var f=a.data.key.children,g=d?null:[],h=0,i=b.length;i>h;h++){if(tools.apply(c,[b[h],e],!1)){if(d)return b[h];g.push(b[h])}var j=data.getNodesByFilter(a,b[h][f],c,d,e);if(d&&j)return j;g=d?j:g.concat(j)}return g},getPreNode:function(a,b){if(!b)return null;for(var c=a.data.key.children,d=b.parentTId?b.getParentNode():data.getRoot(a),e=0,f=d[c].length;f>e;e++)if(d[c][e]===b)return 0==e?null:d[c][e-1];return null},getRoot:function(a){return a?roots[a.treeId]:null},getRoots:function(){return roots},getSetting:function(a){return settings[a]},getSettings:function(){return settings},getZTreeTools:function(a){var b=this.getRoot(this.getSetting(a));return b?b.treeTools:null;

},initCache:function(){for(var a=0,b=_init.caches.length;b>a;a++)_init.caches[a].apply(this,arguments)},initNode:function(){for(var a=0,b=_init.nodes.length;b>a;a++)_init.nodes[a].apply(this,arguments)},initRoot:function(){for(var a=0,b=_init.roots.length;b>a;a++)_init.roots[a].apply(this,arguments)},isSelectedNode:function(a,b){for(var c=data.getRoot(a),d=0,e=c.curSelectedList.length;e>d;d++)if(b===c.curSelectedList[d])return!0;return!1},removeNodeCache:function(a,b){var c=a.data.key.children;if(b[c])for(var d=0,e=b[c].length;e>d;d++)arguments.callee(a,b[c][d]);data.getCache(a).nodes[data.getNodeCacheId(b.tId)]=null},removeSelectedNode:function(a,b){for(var c=data.getRoot(a),d=0,e=c.curSelectedList.length;e>d;d++)b!==c.curSelectedList[d]&&data.getNodeCache(a,c.curSelectedList[d].tId)||(c.curSelectedList.splice(d,1),a.treeObj.trigger(consts.event.UNSELECTED,[a.treeId,b]),d--,e--)},setCache:function(a,b){caches[a.treeId]=b},setRoot:function(a,b){roots[a.treeId]=b},setZTreeTools:function(){for(var a=0,b=_init.zTreeTools.length;b>a;a++)_init.zTreeTools[a].apply(this,arguments)},transformToArrayFormat:function(a,b){if(!b)return[];var c=a.data.key.children,d=[];if(tools.isArray(b))for(var e=0,f=b.length;f>e;e++)d.push(b[e]),b[e][c]&&(d=d.concat(data.transformToArrayFormat(a,b[e][c])));else d.push(b),b[c]&&(d=d.concat(data.transformToArrayFormat(a,b[c])));return d},transformTozTreeFormat:function(a,b){var c,d,e=a.data.simpleData.idKey,f=a.data.simpleData.pIdKey,g=a.data.key.children;if(!e||""==e||!b)return[];if(tools.isArray(b)){var h=[],i=[];for(c=0,d=b.length;d>c;c++)i[b[c][e]]=b[c];for(c=0,d=b.length;d>c;c++)i[b[c][f]]&&b[c][e]!=b[c][f]?(i[b[c][f]][g]||(i[b[c][f]][g]=[]),i[b[c][f]][g].push(b[c])):h.push(b[c]);return h}return[b]}},event={bindEvent:function(){for(var a=0,b=_init.bind.length;b>a;a++)_init.bind[a].apply(this,arguments)},unbindEvent:function(){for(var a=0,b=_init.unbind.length;b>a;a++)_init.unbind[a].apply(this,arguments)},bindTree:function(a){var b={treeId:a.treeId},c=a.treeObj;a.view.txtSelectedEnable||c.bind("selectstart",handler.onSelectStart).css({"-moz-user-select":"-moz-none"}),c.bind("click",b,event.proxy),c.bind("dblclick",b,event.proxy),c.bind("mouseover",b,event.proxy),c.bind("mouseout",b,event.proxy),c.bind("mousedown",b,event.proxy),c.bind("mouseup",b,event.proxy),c.bind("contextmenu",b,event.proxy)},unbindTree:function(a){var b=a.treeObj;b.unbind("selectstart",handler.onSelectStart).unbind("click",event.proxy).unbind("dblclick",event.proxy).unbind("mouseover",event.proxy).unbind("mouseout",event.proxy).unbind("mousedown",event.proxy).unbind("mouseup",event.proxy).unbind("contextmenu",event.proxy)},doProxy:function(){for(var a=[],b=0,c=_init.proxys.length;c>b;b++){var d=_init.proxys[b].apply(this,arguments);if(a.push(d),d.stop)break}return a},proxy:function(a){var b=data.getSetting(a.data.treeId);if(!tools.uCanDo(b,a))return!0;for(var c=event.doProxy(a),d=!0,e=!1,f=0,g=c.length;g>f;f++){var h=c[f];h.nodeEventCallback&&(e=!0,d=h.nodeEventCallback.apply(h,[a,h.node])&&d),h.treeEventCallback&&(e=!0,d=h.treeEventCallback.apply(h,[a,h.node])&&d)}return d}},handler={onSwitchNode:function(a,b){var c=data.getSetting(a.data.treeId);if(b.open){if(0==tools.apply(c.callback.beforeCollapse,[c.treeId,b],!0))return!0;data.getRoot(c).expandTriggerFlag=!0,view.switchNode(c,b)}else{if(0==tools.apply(c.callback.beforeExpand,[c.treeId,b],!0))return!0;data.getRoot(c).expandTriggerFlag=!0,view.switchNode(c,b)}return!0},onClickNode:function(a,b){var c=data.getSetting(a.data.treeId),d=c.view.autoCancelSelected&&(a.ctrlKey||a.metaKey)&&data.isSelectedNode(c,b)?0:c.view.autoCancelSelected&&(a.ctrlKey||a.metaKey)&&c.view.selectedMulti?2:1;return 0==tools.apply(c.callback.beforeClick,[c.treeId,b,d],!0)?!0:(0===d?view.cancelPreSelectedNode(c,b):view.selectNode(c,b,2===d),c.treeObj.trigger(consts.event.CLICK,[a,c.treeId,b,d]),!0)},onZTreeMousedown:function(a,b){var c=data.getSetting(a.data.treeId);return tools.apply(c.callback.beforeMouseDown,[c.treeId,b],!0)&&tools.apply(c.callback.onMouseDown,[a,c.treeId,b]),!0},onZTreeMouseup:function(a,b){var c=data.getSetting(a.data.treeId);return tools.apply(c.callback.beforeMouseUp,[c.treeId,b],!0)&&tools.apply(c.callback.onMouseUp,[a,c.treeId,b]),!0},onZTreeDblclick:function(a,b){var c=data.getSetting(a.data.treeId);return tools.apply(c.callback.beforeDblClick,[c.treeId,b],!0)&&tools.apply(c.callback.onDblClick,[a,c.treeId,b]),!0},onZTreeContextmenu:function(a,b){var c=data.getSetting(a.data.treeId);return tools.apply(c.callback.beforeRightClick,[c.treeId,b],!0)&&tools.apply(c.callback.onRightClick,[a,c.treeId,b]),"function"!=typeof c.callback.onRightClick},onSelectStart:function(a){var b=a.originalEvent.srcElement.nodeName.toLowerCase();return"input"===b||"textarea"===b}},tools={apply:function(a,b,c){return"function"==typeof a?a.apply(zt,b?b:[]):c},canAsync:function(a,b){var c=a.data.key.children;return a.async.enable&&b&&b.isParent&&!(b.zAsync||b[c]&&b[c].length>0)},clone:function(a){if(null===a)return null;var b=tools.isArray(a)?[]:{};for(var c in a)b[c]=a[c]instanceof Date?new Date(a[c].getTime()):"object"==typeof a[c]?arguments.callee(a[c]):a[c];return b},eqs:function(a,b){return a.toLowerCase()===b.toLowerCase()},isArray:function(a){return"[object Array]"===Object.prototype.toString.apply(a)},$:function(a,b,c){return b&&"string"!=typeof b&&(c=b,b=""),"string"==typeof a?$(a,c?c.treeObj.get(0).ownerDocument:null):$("#"+a.tId+b,c?c.treeObj:null)},getMDom:function(a,b,c){if(!b)return null;for(;b&&b.id!==a.treeId;){for(var d=0,e=c.length;b.tagName&&e>d;d++)if(tools.eqs(b.tagName,c[d].tagName)&&null!==b.getAttribute(c[d].attrName))return b;b=b.parentNode}return null},getNodeMainDom:function(a){return $(a).parent("li").get(0)||$(a).parentsUntil("li").parent().get(0)},isChildOrSelf:function(a,b){return $(a).closest("#"+b).length>0},uCanDo:function(){return!0}},view={addNodes:function(a,b,c,d,e){if(!a.data.keep.leaf||!b||b.isParent)if(tools.isArray(d)||(d=[d]),a.data.simpleData.enable&&(d=data.transformTozTreeFormat(a,d)),b){var f=$$(b,consts.id.SWITCH,a),g=$$(b,consts.id.ICON,a),h=$$(b,consts.id.UL,a);b.open||(view.replaceSwitchClass(b,f,consts.folder.CLOSE),view.replaceIcoClass(b,g,consts.folder.CLOSE),b.open=!1,h.css({display:"none"})),data.addNodesData(a,b,c,d),view.createNodes(a,b.level+1,d,b,c),e||view.expandCollapseParentNode(a,b,!0)}else data.addNodesData(a,data.getRoot(a),c,d),view.createNodes(a,0,d,null,c)},appendNodes:function(a,b,c,d,e,f,g){if(!c)return[];var h,i,j=[],k=a.data.key.children,l=d?d:data.getRoot(a),m=l[k];(!m||e>=m.length)&&(e=-1);for(var n=0,o=c.length;o>n;n++){var p=c[n];f&&(h=(0===e||m.length==c.length)&&0==n,i=0>e&&n==c.length-1,data.initNode(a,b,p,d,h,i,g),data.addNodeCache(a,p));var q=[];p[k]&&p[k].length>0&&(q=view.appendNodes(a,b+1,p[k],p,-1,f,g&&p.open)),g&&(view.makeDOMNodeMainBefore(j,a,p),view.makeDOMNodeLine(j,a,p),data.getBeforeA(a,p,j),view.makeDOMNodeNameBefore(j,a,p),data.getInnerBeforeA(a,p,j),view.makeDOMNodeIcon(j,a,p),data.getInnerAfterA(a,p,j),view.makeDOMNodeNameAfter(j,a,p),data.getAfterA(a,p,j),p.isParent&&p.open&&view.makeUlHtml(a,p,j,q.join("")),view.makeDOMNodeMainAfter(j,a,p),data.addCreatedNode(a,p))}return j},appendParentULDom:function(a,b){var c=[],d=$$(b,a);!d.get(0)&&b.parentTId&&(view.appendParentULDom(a,b.getParentNode()),d=$$(b,a));var e=$$(b,consts.id.UL,a);e.get(0)&&e.remove();var f=a.data.key.children,g=view.appendNodes(a,b.level+1,b[f],b,-1,!1,!0);view.makeUlHtml(a,b,c,g.join("")),d.append(c.join(""))},asyncNode:function(setting,node,isSilent,callback){var i,l;if(node&&!node.isParent)return tools.apply(callback),!1;if(node&&node.isAjaxing)return!1;if(0==tools.apply(setting.callback.beforeAsync,[setting.treeId,node],!0))return tools.apply(callback),!1;if(node){node.isAjaxing=!0;var icoObj=$$(node,consts.id.ICON,setting);icoObj.attr({style:"","class":consts.className.BUTTON+" "+consts.className.ICO_LOADING})}var tmpParam={};for(i=0,l=setting.async.autoParam.length;node&&l>i;i++){var pKey=setting.async.autoParam[i].split("="),spKey=pKey;pKey.length>1&&(spKey=pKey[1],pKey=pKey[0]),tmpParam[spKey]=node[pKey]}if(tools.isArray(setting.async.otherParam))for(i=0,l=setting.async.otherParam.length;l>i;i+=2)tmpParam[setting.async.otherParam[i]]=setting.async.otherParam[i+1];else for(var p in setting.async.otherParam)tmpParam[p]=setting.async.otherParam[p];var _tmpV=data.getRoot(setting)._ver;return $.ajax({contentType:setting.async.contentType,cache:!1,type:setting.async.type,url:tools.apply(setting.async.url,[setting.treeId,node],setting.async.url),data:tmpParam,dataType:setting.async.dataType,success:function(msg){if(_tmpV==data.getRoot(setting)._ver){var newNodes=[];try{newNodes=msg&&0!=msg.length?"string"==typeof msg?eval("("+msg+")"):msg:[]}catch(err){newNodes=msg}node&&(node.isAjaxing=null,node.zAsync=!0),view.setNodeLineIcos(setting,node),newNodes&&""!==newNodes?(newNodes=tools.apply(setting.async.dataFilter,[setting.treeId,node,newNodes],newNodes),view.addNodes(setting,node,-1,newNodes?tools.clone(newNodes):[],!!isSilent)):view.addNodes(setting,node,-1,[],!!isSilent),setting.treeObj.trigger(consts.event.ASYNC_SUCCESS,[setting.treeId,node,msg]),tools.apply(callback)}},error:function(a,b,c){_tmpV==data.getRoot(setting)._ver&&(node&&(node.isAjaxing=null),view.setNodeLineIcos(setting,node),setting.treeObj.trigger(consts.event.ASYNC_ERROR,[setting.treeId,node,a,b,c]))}}),!0},cancelPreSelectedNode:function(a,b,c){var d,e,f=data.getRoot(a).curSelectedList;for(d=f.length-1;d>=0;d--)if(e=f[d],b===e||!b&&(!c||c!==e)){if($$(e,consts.id.A,a).removeClass(consts.node.CURSELECTED),b){data.removeSelectedNode(a,b);break}f.splice(d,1),a.treeObj.trigger(consts.event.UNSELECTED,[a.treeId,e])}},createNodeCallback:function(a){if(a.callback.onNodeCreated||a.view.addDiyDom)for(var b=data.getRoot(a);b.createdNodes.length>0;){var c=b.createdNodes.shift();tools.apply(a.view.addDiyDom,[a.treeId,c]),a.callback.onNodeCreated&&a.treeObj.trigger(consts.event.NODECREATED,[a.treeId,c])}},createNodes:function(a,b,c,d,e){if(c&&0!=c.length){var f=data.getRoot(a),g=a.data.key.children,h=!d||d.open||!!$$(d[g][0],a).get(0);f.createdNodes=[];var i,j,k=view.appendNodes(a,b,c,d,e,!0,h);if(d){var l=$$(d,consts.id.UL,a);l.get(0)&&(i=l)}else i=a.treeObj;i&&(e>=0&&(j=i.children()[e]),e>=0&&j?$(j).before(k.join("")):i.append(k.join(""))),view.createNodeCallback(a)}},destroy:function(a){a&&(data.initCache(a),data.initRoot(a),event.unbindTree(a),event.unbindEvent(a),a.treeObj.empty(),delete settings[a.treeId])},expandCollapseNode:function(a,b,c,d,e){var f=data.getRoot(a),g=a.data.key.children;if(!b)return void tools.apply(e,[]);if(f.expandTriggerFlag){var h=e;e=function(){h&&h(),b.open?a.treeObj.trigger(consts.event.EXPAND,[a.treeId,b]):a.treeObj.trigger(consts.event.COLLAPSE,[a.treeId,b])},f.expandTriggerFlag=!1}if(!b.open&&b.isParent&&(!$$(b,consts.id.UL,a).get(0)||b[g]&&b[g].length>0&&!$$(b[g][0],a).get(0))&&(view.appendParentULDom(a,b),view.createNodeCallback(a)),b.open==c)return void tools.apply(e,[]);var i=$$(b,consts.id.UL,a),j=$$(b,consts.id.SWITCH,a),k=$$(b,consts.id.ICON,a);b.isParent?(b.open=!b.open,b.iconOpen&&b.iconClose&&k.attr("style",view.makeNodeIcoStyle(a,b)),b.open?(view.replaceSwitchClass(b,j,consts.folder.OPEN),view.replaceIcoClass(b,k,consts.folder.OPEN),0==d||""==a.view.expandSpeed?(i.show(),tools.apply(e,[])):b[g]&&b[g].length>0?i.slideDown(a.view.expandSpeed,e):(i.show(),tools.apply(e,[]))):(view.replaceSwitchClass(b,j,consts.folder.CLOSE),view.replaceIcoClass(b,k,consts.folder.CLOSE),0!=d&&""!=a.view.expandSpeed&&b[g]&&b[g].length>0?i.slideUp(a.view.expandSpeed,e):(i.hide(),tools.apply(e,[])))):tools.apply(e,[])},expandCollapseParentNode:function(a,b,c,d,e){if(b){if(!b.parentTId)return void view.expandCollapseNode(a,b,c,d,e);view.expandCollapseNode(a,b,c,d),b.parentTId&&view.expandCollapseParentNode(a,b.getParentNode(),c,d,e)}},expandCollapseSonNode:function(a,b,c,d,e){var f=data.getRoot(a),g=a.data.key.children,h=b?b[g]:f[g],i=b?!1:d,j=data.getRoot(a).expandTriggerFlag;if(data.getRoot(a).expandTriggerFlag=!1,h)for(var k=0,l=h.length;l>k;k++)h[k]&&view.expandCollapseSonNode(a,h[k],c,i);data.getRoot(a).expandTriggerFlag=j,view.expandCollapseNode(a,b,c,d,e)},isSelectedNode:function(a,b){if(!b)return!1;var c,d=data.getRoot(a).curSelectedList;for(c=d.length-1;c>=0;c--)if(b===d[c])return!0;return!1},makeDOMNodeIcon:function(a,b,c){var d=data.getNodeName(b,c),e=b.view.nameIsHTML?d:d.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");a.push("<span id='",c.tId,consts.id.ICON,"' title='' treeNode",consts.id.ICON," class='",view.makeNodeIcoClass(b,c),"' style='",view.makeNodeIcoStyle(b,c),"'></span><span id='",c.tId,consts.id.SPAN,"' class='",consts.className.NAME,"'>",e,"</span>")},makeDOMNodeLine:function(a,b,c){a.push("<span id='",c.tId,consts.id.SWITCH,"' title='' class='",view.makeNodeLineClass(b,c),"' treeNode",consts.id.SWITCH,"></span>")},makeDOMNodeMainAfter:function(a){a.push("</li>")},makeDOMNodeMainBefore:function(a,b,c){a.push("<li id='",c.tId,"' class='",consts.className.LEVEL,c.level,"' tabindex='0' hidefocus='true' treenode>")},makeDOMNodeNameAfter:function(a){a.push("</a>")},makeDOMNodeNameBefore:function(a,b,c){var d=data.getNodeTitle(b,c),e=view.makeNodeUrl(b,c),f=view.makeNodeFontCss(b,c),g=[];for(var h in f)g.push(h,":",f[h],";");a.push("<a id='",c.tId,consts.id.A,"' class='",consts.className.LEVEL,c.level,"' treeNode",consts.id.A,' onclick="',c.click||"",'" ',null!=e&&e.length>0?"href='"+e+"'":""," target='",view.makeNodeTarget(c),"' style='",g.join(""),"'"),tools.apply(b.view.showTitle,[b.treeId,c],b.view.showTitle)&&d&&a.push("title='",d.replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),"'"),a.push(">")},makeNodeFontCss:function(a,b){var c=tools.apply(a.view.fontCss,[a.treeId,b],a.view.fontCss);return c&&"function"!=typeof c?c:{}},makeNodeIcoClass:function(a,b){var c=["ico"];return b.isAjaxing||(c[0]=(b.iconSkin?b.iconSkin+"_":"")+c[0],c.push(b.isParent?b.open?consts.folder.OPEN:consts.folder.CLOSE:consts.folder.DOCU)),consts.className.BUTTON+" "+c.join("_")},makeNodeIcoStyle:function(a,b){var c=[];if(!b.isAjaxing){var d=b.isParent&&b.iconOpen&&b.iconClose?b.open?b.iconOpen:b.iconClose:b[a.data.key.icon];d&&c.push("background:url(",d,") 0 0 no-repeat;"),0!=a.view.showIcon&&tools.apply(a.view.showIcon,[a.treeId,b],!0)||c.push("width:0px;height:0px;")}return c.join("")},makeNodeLineClass:function(a,b){var c=[];return c.push(a.view.showLine?0==b.level&&b.isFirstNode&&b.isLastNode?consts.line.ROOT:0==b.level&&b.isFirstNode?consts.line.ROOTS:b.isLastNode?consts.line.BOTTOM:consts.line.CENTER:consts.line.NOLINE),c.push(b.isParent?b.open?consts.folder.OPEN:consts.folder.CLOSE:consts.folder.DOCU),view.makeNodeLineClassEx(b)+c.join("_")},makeNodeLineClassEx:function(a){return consts.className.BUTTON+" "+consts.className.LEVEL+a.level+" "+consts.className.SWITCH+" "},makeNodeTarget:function(a){return a.target||"_blank"},makeNodeUrl:function(a,b){var c=a.data.key.url;return b[c]?b[c]:null},makeUlHtml:function(a,b,c,d){c.push("<ul id='",b.tId,consts.id.UL,"' class='",consts.className.LEVEL,b.level," ",view.makeUlLineClass(a,b),"' style='display:",b.open?"block":"none","'>"),c.push(d),c.push("</ul>")},makeUlLineClass:function(a,b){return a.view.showLine&&!b.isLastNode?consts.line.LINE:""},removeChildNodes:function(a,b){if(b){var c=a.data.key.children,d=b[c];if(d){for(var e=0,f=d.length;f>e;e++)data.removeNodeCache(a,d[e]);if(data.removeSelectedNode(a),delete b[c],a.data.keep.parent)$$(b,consts.id.UL,a).empty();else{b.isParent=!1,b.open=!1;var g=$$(b,consts.id.SWITCH,a),h=$$(b,consts.id.ICON,a);view.replaceSwitchClass(b,g,consts.folder.DOCU),view.replaceIcoClass(b,h,consts.folder.DOCU),$$(b,consts.id.UL,a).remove()}}}},setFirstNode:function(a,b){var c=a.data.key.children,d=b[c].length;d>0&&(b[c][0].isFirstNode=!0)},setLastNode:function(a,b){var c=a.data.key.children,d=b[c].length;d>0&&(b[c][d-1].isLastNode=!0)},removeNode:function(a,b){var c=data.getRoot(a),d=a.data.key.children,e=b.parentTId?b.getParentNode():c;if(b.isFirstNode=!1,b.isLastNode=!1,b.getPreNode=function(){return null},b.getNextNode=function(){return null},data.getNodeCache(a,b.tId)){$$(b,a).remove(),data.removeNodeCache(a,b),data.removeSelectedNode(a,b);for(var f=0,g=e[d].length;g>f;f++)if(e[d][f].tId==b.tId){e[d].splice(f,1);break}view.setFirstNode(a,e),view.setLastNode(a,e);var h,i,j,k=e[d].length;if(a.data.keep.parent||0!=k){if(a.view.showLine&&k>0){var l=e[d][k-1];if(h=$$(l,consts.id.UL,a),i=$$(l,consts.id.SWITCH,a),j=$$(l,consts.id.ICON,a),e==c)if(1==e[d].length)view.replaceSwitchClass(l,i,consts.line.ROOT);else{var m=$$(e[d][0],consts.id.SWITCH,a);view.replaceSwitchClass(e[d][0],m,consts.line.ROOTS),view.replaceSwitchClass(l,i,consts.line.BOTTOM)}else view.replaceSwitchClass(l,i,consts.line.BOTTOM);h.removeClass(consts.line.LINE)}}else e.isParent=!1,e.open=!1,h=$$(e,consts.id.UL,a),i=$$(e,consts.id.SWITCH,a),j=$$(e,consts.id.ICON,a),view.replaceSwitchClass(e,i,consts.folder.DOCU),view.replaceIcoClass(e,j,consts.folder.DOCU),h.css("display","none")}},replaceIcoClass:function(a,b,c){if(b&&!a.isAjaxing){var d=b.attr("class");if(void 0!=d){var e=d.split("_");switch(c){case consts.folder.OPEN:case consts.folder.CLOSE:case consts.folder.DOCU:e[e.length-1]=c}b.attr("class",e.join("_"))}}},replaceSwitchClass:function(a,b,c){if(b){var d=b.attr("class");if(void 0!=d){var e=d.split("_");switch(c){case consts.line.ROOT:case consts.line.ROOTS:case consts.line.CENTER:case consts.line.BOTTOM:case consts.line.NOLINE:e[0]=view.makeNodeLineClassEx(a)+c;break;case consts.folder.OPEN:case consts.folder.CLOSE:case consts.folder.DOCU:e[1]=c}b.attr("class",e.join("_")),c!==consts.folder.DOCU?b.removeAttr("disabled"):b.attr("disabled","disabled")}}},selectNode:function(a,b,c){c||view.cancelPreSelectedNode(a,null,b),$$(b,consts.id.A,a).addClass(consts.node.CURSELECTED),data.addSelectedNode(a,b),a.treeObj.trigger(consts.event.SELECTED,[a.treeId,b])},setNodeFontCss:function(a,b){var c=$$(b,consts.id.A,a),d=view.makeNodeFontCss(a,b);d&&c.css(d)},setNodeLineIcos:function(a,b){if(b){var c=$$(b,consts.id.SWITCH,a),d=$$(b,consts.id.UL,a),e=$$(b,consts.id.ICON,a),f=view.makeUlLineClass(a,b);0==f.length?d.removeClass(consts.line.LINE):d.addClass(f),c.attr("class",view.makeNodeLineClass(a,b)),b.isParent?c.removeAttr("disabled"):c.attr("disabled","disabled"),e.removeAttr("style"),e.attr("style",view.makeNodeIcoStyle(a,b)),e.attr("class",view.makeNodeIcoClass(a,b))}},setNodeName:function(a,b){var c=data.getNodeTitle(a,b),d=$$(b,consts.id.SPAN,a);if(d.empty(),a.view.nameIsHTML?d.html(data.getNodeName(a,b)):d.text(data.getNodeName(a,b)),tools.apply(a.view.showTitle,[a.treeId,b],a.view.showTitle)){var e=$$(b,consts.id.A,a);e.attr("title",c?c:"")}},setNodeTarget:function(a,b){var c=$$(b,consts.id.A,a);c.attr("target",view.makeNodeTarget(b))},setNodeUrl:function(a,b){var c=$$(b,consts.id.A,a),d=view.makeNodeUrl(a,b);null==d||0==d.length?c.removeAttr("href"):c.attr("href",d)},switchNode:function(a,b){if(b.open||!tools.canAsync(a,b))view.expandCollapseNode(a,b,!b.open);else if(a.async.enable){if(!view.asyncNode(a,b))return void view.expandCollapseNode(a,b,!b.open)}else b&&view.expandCollapseNode(a,b,!b.open)}};$.fn.zTree={consts:_consts,_z:{tools:tools,view:view,event:event,data:data},getZTreeObj:function(a){var b=data.getZTreeTools(a);return b?b:null},destroy:function(a){if(a&&a.length>0)view.destroy(data.getSetting(a));else for(var b in settings)view.destroy(settings[b])},init:function(a,b,c){var d=tools.clone(_setting);$.extend(!0,d,b),d.treeId=a.attr("id"),d.treeObj=a,d.treeObj.empty(),settings[d.treeId]=d,"undefined"==typeof document.body.style.maxHeight&&(d.view.expandSpeed=""),data.initRoot(d);var e=data.getRoot(d),f=d.data.key.children;c=c?tools.clone(tools.isArray(c)?c:[c]):[],e[f]=d.data.simpleData.enable?data.transformTozTreeFormat(d,c):c,data.initCache(d),event.unbindTree(d),event.bindTree(d),event.unbindEvent(d),event.bindEvent(d);var g={setting:d,addNodes:function(a,b,c,e){function f(){view.addNodes(d,a,b,h,1==e)}if(a||(a=null),a&&!a.isParent&&d.data.keep.leaf)return null;var g=parseInt(b,10);if(isNaN(g)?(e=!!c,c=b,b=-1):b=g,!c)return null;var h=tools.clone(tools.isArray(c)?c:[c]);return tools.canAsync(d,a)?view.asyncNode(d,a,e,f):f(),h},cancelSelectedNode:function(a){view.cancelPreSelectedNode(d,a)},destroy:function(){view.destroy(d)},expandAll:function(a){return a=!!a,view.expandCollapseSonNode(d,null,a,!0),a},expandNode:function(a,b,c,e,f){if(!a||!a.isParent)return null;if(b!==!0&&b!==!1&&(b=!a.open),f=!!f,f&&b&&0==tools.apply(d.callback.beforeExpand,[d.treeId,a],!0))return null;if(f&&!b&&0==tools.apply(d.callback.beforeCollapse,[d.treeId,a],!0))return null;if(b&&a.parentTId&&view.expandCollapseParentNode(d,a.getParentNode(),b,!1),b===a.open&&!c)return null;if(data.getRoot(d).expandTriggerFlag=f,!tools.canAsync(d,a)&&c)view.expandCollapseSonNode(d,a,b,!0,function(){if(e!==!1)try{$$(a,d).focus().blur()}catch(b){}});else if(a.open=!b,view.switchNode(this.setting,a),e!==!1)try{$$(a,d).focus().blur()}catch(g){}return b},getNodes:function(){return data.getNodes(d)},getNodeByParam:function(a,b,c){return a?data.getNodeByParam(d,c?c[d.data.key.children]:data.getNodes(d),a,b):null},getNodeByTId:function(a){return data.getNodeCache(d,a)},getNodesByParam:function(a,b,c){return a?data.getNodesByParam(d,c?c[d.data.key.children]:data.getNodes(d),a,b):null},getNodesByParamFuzzy:function(a,b,c){return a?data.getNodesByParamFuzzy(d,c?c[d.data.key.children]:data.getNodes(d),a,b):null},getNodesByFilter:function(a,b,c,e){return b=!!b,a&&"function"==typeof a?data.getNodesByFilter(d,c?c[d.data.key.children]:data.getNodes(d),a,b,e):b?null:[]},getNodeIndex:function(a){if(!a)return null;for(var b=d.data.key.children,c=a.parentTId?a.getParentNode():data.getRoot(d),e=0,f=c[b].length;f>e;e++)if(c[b][e]==a)return e;return-1},getSelectedNodes:function(){for(var a=[],b=data.getRoot(d).curSelectedList,c=0,e=b.length;e>c;c++)a.push(b[c]);return a},isSelectedNode:function(a){return data.isSelectedNode(d,a)},reAsyncChildNodes:function(a,b,c){if(this.setting.async.enable){var e=!a;if(e&&(a=data.getRoot(d)),"refresh"==b){for(var f=this.setting.data.key.children,g=0,h=a[f]?a[f].length:0;h>g;g++)data.removeNodeCache(d,a[f][g]);if(data.removeSelectedNode(d),a[f]=[],e)this.setting.treeObj.empty();else{var i=$$(a,consts.id.UL,d);i.empty()}}view.asyncNode(this.setting,e?null:a,!!c)}},refresh:function(){this.setting.treeObj.empty();var a=data.getRoot(d),b=a[d.data.key.children];data.initRoot(d),a[d.data.key.children]=b,data.initCache(d),view.createNodes(d,0,a[d.data.key.children],null,-1)},removeChildNodes:function(a){if(!a)return null;var b=d.data.key.children,c=a[b];return view.removeChildNodes(d,a),c?c:null},removeNode:function(a,b){a&&(b=!!b,b&&0==tools.apply(d.callback.beforeRemove,[d.treeId,a],!0)||(view.removeNode(d,a),b&&this.setting.treeObj.trigger(consts.event.REMOVE,[d.treeId,a])))},selectNode:function(a,b){if(a&&tools.uCanDo(d)){if(b=d.view.selectedMulti&&b,a.parentTId)view.expandCollapseParentNode(d,a.getParentNode(),!0,!1,function(){try{$$(a,d).focus().blur()}catch(b){}});else try{$$(a,d).focus().blur()}catch(c){}view.selectNode(d,a,b)}},transformTozTreeNodes:function(a){return data.transformTozTreeFormat(d,a)},transformToArray:function(a){return data.transformToArrayFormat(d,a)},updateNode:function(a){if(a){var b=$$(a,d);b.get(0)&&tools.uCanDo(d)&&(view.setNodeName(d,a),view.setNodeTarget(d,a),view.setNodeUrl(d,a),view.setNodeLineIcos(d,a),view.setNodeFontCss(d,a))}}};return e.treeTools=g,data.setZTreeTools(d,g),e[f]&&e[f].length>0?view.createNodes(d,0,e[f],null,-1):d.async.enable&&d.async.url&&""!==d.async.url&&view.asyncNode(d),g}};var zt=$.fn.zTree,$$=tools.$,consts=zt.consts}(jQuery),function(a){var b={event:{CHECK:"ztree_check"},id:{CHECK:"_check"},checkbox:{STYLE:"checkbox",DEFAULT:"chk",DISABLED:"disable",FALSE:"false",TRUE:"true",FULL:"full",PART:"part",FOCUS:"focus"},radio:{STYLE:"radio",TYPE_ALL:"all",TYPE_LEVEL:"level"}},c={check:{enable:!1,autoCheckTrigger:!1,chkStyle:b.checkbox.STYLE,nocheckInherit:!1,chkDisabledInherit:!1,radioType:b.radio.TYPE_LEVEL,chkboxType:{Y:"ps",N:"ps"}},data:{key:{checked:"checked"}},callback:{beforeCheck:null,onCheck:null}},d=function(a){var b=v.getRoot(a);b.radioCheckedList=[]},e=function(){},f=function(a){var b=a.treeObj,c=t.event;b.bind(c.CHECK,function(b,c,d,e){b.srcEvent=c,s.apply(a.callback.onCheck,[b,d,e])})},g=function(a){var b=a.treeObj,c=t.event;b.unbind(c.CHECK)},h=function(a){var b=a.target,c=v.getSetting(a.data.treeId),d="",e=null,f="",g="",h=null,i=null;if(s.eqs(a.type,"mouseover")?c.check.enable&&s.eqs(b.tagName,"span")&&null!==b.getAttribute("treeNode"+t.id.CHECK)&&(d=s.getNodeMainDom(b).id,f="mouseoverCheck"):s.eqs(a.type,"mouseout")?c.check.enable&&s.eqs(b.tagName,"span")&&null!==b.getAttribute("treeNode"+t.id.CHECK)&&(d=s.getNodeMainDom(b).id,f="mouseoutCheck"):s.eqs(a.type,"click")&&c.check.enable&&s.eqs(b.tagName,"span")&&null!==b.getAttribute("treeNode"+t.id.CHECK)&&(d=s.getNodeMainDom(b).id,f="checkNode"),d.length>0)switch(e=v.getNodeCache(c,d),f){case"checkNode":h=n.onCheckNode;break;case"mouseoverCheck":h=n.onMouseoverCheck;break;case"mouseoutCheck":h=n.onMouseoutCheck}var j={stop:"checkNode"===f,node:e,nodeEventType:f,nodeEventCallback:h,treeEventType:g,treeEventCallback:i};return j},i=function(a,b,c,d){if(c){var e=a.data.key.checked;if("string"==typeof c[e]&&(c[e]=s.eqs(c[e],"true")),c[e]=!!c[e],c.checkedOld=c[e],"string"==typeof c.nocheck&&(c.nocheck=s.eqs(c.nocheck,"true")),c.nocheck=!!c.nocheck||a.check.nocheckInherit&&d&&!!d.nocheck,"string"==typeof c.chkDisabled&&(c.chkDisabled=s.eqs(c.chkDisabled,"true")),c.chkDisabled=!!c.chkDisabled||a.check.chkDisabledInherit&&d&&!!d.chkDisabled,"string"==typeof c.halfCheck&&(c.halfCheck=s.eqs(c.halfCheck,"true")),c.halfCheck=!!c.halfCheck,c.check_Child_State=-1,c.check_Focus=!1,c.getCheckStatus=function(){return v.getCheckStatus(a,c)},a.check.chkStyle==t.radio.STYLE&&a.check.radioType==t.radio.TYPE_ALL&&c[e]){var f=v.getRoot(a);f.radioCheckedList.push(c)}}},j=function(a,b,c){a.data.key.checked;a.check.enable&&(v.makeChkFlag(a,b),c.push("<span ID='",b.tId,t.id.CHECK,"' class='",u.makeChkClass(a,b),"' treeNode",t.id.CHECK,b.nocheck===!0?" style='display:none;'":"","></span>"))},k=function(a,b){b.checkNode=function(a,b,c,d){var e=this.setting.data.key.checked;if(a.chkDisabled!==!0&&(b!==!0&&b!==!1&&(b=!a[e]),d=!!d,(a[e]!==b||c)&&(!d||0!=s.apply(this.setting.callback.beforeCheck,[this.setting.treeId,a],!0))&&s.uCanDo(this.setting)&&this.setting.check.enable&&a.nocheck!==!0)){a[e]=b;var f=w(a,t.id.CHECK,this.setting);(c||this.setting.check.chkStyle===t.radio.STYLE)&&u.checkNodeRelation(this.setting,a),u.setChkClass(this.setting,f,a),u.repairParentChkClassWithSelf(this.setting,a),d&&this.setting.treeObj.trigger(t.event.CHECK,[null,this.setting.treeId,a])}},b.checkAllNodes=function(a){u.repairAllChk(this.setting,!!a)},b.getCheckedNodes=function(a){var b=this.setting.data.key.children;return a=a!==!1,v.getTreeCheckedNodes(this.setting,v.getRoot(this.setting)[b],a)},b.getChangeCheckedNodes=function(){var a=this.setting.data.key.children;return v.getTreeChangeCheckedNodes(this.setting,v.getRoot(this.setting)[a])},b.setChkDisabled=function(a,b,c,d){b=!!b,c=!!c,d=!!d,u.repairSonChkDisabled(this.setting,a,b,d),u.repairParentChkDisabled(this.setting,a.getParentNode(),b,c)};var c=b.updateNode;b.updateNode=function(a,d){if(c&&c.apply(b,arguments),a&&this.setting.check.enable){var e=w(a,this.setting);if(e.get(0)&&s.uCanDo(this.setting)){var f=w(a,t.id.CHECK,this.setting);(1==d||this.setting.check.chkStyle===t.radio.STYLE)&&u.checkNodeRelation(this.setting,a),u.setChkClass(this.setting,f,a),u.repairParentChkClassWithSelf(this.setting,a)}}}},l={getRadioCheckedList:function(a){for(var b=v.getRoot(a).radioCheckedList,c=0,d=b.length;d>c;c++)v.getNodeCache(a,b[c].tId)||(b.splice(c,1),c--,d--);return b},getCheckStatus:function(a,b){if(!a.check.enable||b.nocheck||b.chkDisabled)return null;var c=a.data.key.checked,d={checked:b[c],half:b.halfCheck?b.halfCheck:a.check.chkStyle==t.radio.STYLE?2===b.check_Child_State:b[c]?b.check_Child_State>-1&&b.check_Child_State<2:b.check_Child_State>0};return d},getTreeCheckedNodes:function(a,b,c,d){if(!b)return[];var e=a.data.key.children,f=a.data.key.checked,g=c&&a.check.chkStyle==t.radio.STYLE&&a.check.radioType==t.radio.TYPE_ALL;d=d?d:[];for(var h=0,i=b.length;i>h&&(b[h].nocheck===!0||b[h].chkDisabled===!0||b[h][f]!=c||(d.push(b[h]),!g))&&(v.getTreeCheckedNodes(a,b[h][e],c,d),!(g&&d.length>0));h++);return d},getTreeChangeCheckedNodes:function(a,b,c){if(!b)return[];var d=a.data.key.children,e=a.data.key.checked;c=c?c:[];for(var f=0,g=b.length;g>f;f++)b[f].nocheck!==!0&&b[f].chkDisabled!==!0&&b[f][e]!=b[f].checkedOld&&c.push(b[f]),v.getTreeChangeCheckedNodes(a,b[f][d],c);return c},makeChkFlag:function(a,b){if(b){var c=a.data.key.children,d=a.data.key.checked,e=-1;if(b[c])for(var f=0,g=b[c].length;g>f;f++){var h=b[c][f],i=-1;if(a.check.chkStyle==t.radio.STYLE){if(i=h.nocheck===!0||h.chkDisabled===!0?h.check_Child_State:h.halfCheck===!0?2:h[d]?2:h.check_Child_State>0?2:0,2==i){e=2;break}0==i&&(e=0)}else if(a.check.chkStyle==t.checkbox.STYLE){if(i=h.nocheck===!0||h.chkDisabled===!0?h.check_Child_State:h.halfCheck===!0?1:h[d]?-1===h.check_Child_State||2===h.check_Child_State?2:1:h.check_Child_State>0?1:0,1===i){e=1;break}if(2===i&&e>-1&&f>0&&i!==e){e=1;break}if(2===e&&i>-1&&2>i){e=1;break}i>-1&&(e=i)}}b.check_Child_State=e}}},m={},n={onCheckNode:function(a,b){if(b.chkDisabled===!0)return!1;var c=v.getSetting(a.data.treeId),d=c.data.key.checked;if(0==s.apply(c.callback.beforeCheck,[c.treeId,b],!0))return!0;b[d]=!b[d],u.checkNodeRelation(c,b);var e=w(b,t.id.CHECK,c);return u.setChkClass(c,e,b),u.repairParentChkClassWithSelf(c,b),c.treeObj.trigger(t.event.CHECK,[a,c.treeId,b]),!0},onMouseoverCheck:function(a,b){if(b.chkDisabled===!0)return!1;var c=v.getSetting(a.data.treeId),d=w(b,t.id.CHECK,c);return b.check_Focus=!0,u.setChkClass(c,d,b),!0},onMouseoutCheck:function(a,b){if(b.chkDisabled===!0)return!1;var c=v.getSetting(a.data.treeId),d=w(b,t.id.CHECK,c);return b.check_Focus=!1,u.setChkClass(c,d,b),!0}},o={},p={checkNodeRelation:function(a,b){var c,d,e,f=a.data.key.children,g=a.data.key.checked,h=t.radio;if(a.check.chkStyle==h.STYLE){var i=v.getRadioCheckedList(a);if(b[g])if(a.check.radioType==h.TYPE_ALL){for(d=i.length-1;d>=0;d--)c=i[d],c[g]&&c!=b&&(c[g]=!1,i.splice(d,1),u.setChkClass(a,w(c,t.id.CHECK,a),c),c.parentTId!=b.parentTId&&u.repairParentChkClassWithSelf(a,c));i.push(b)}else{var j=b.parentTId?b.getParentNode():v.getRoot(a);for(d=0,e=j[f].length;e>d;d++)c=j[f][d],c[g]&&c!=b&&(c[g]=!1,u.setChkClass(a,w(c,t.id.CHECK,a),c))}else if(a.check.radioType==h.TYPE_ALL)for(d=0,e=i.length;e>d;d++)if(b==i[d]){i.splice(d,1);break}}else b[g]&&(!b[f]||0==b[f].length||a.check.chkboxType.Y.indexOf("s")>-1)&&u.setSonNodeCheckBox(a,b,!0),b[g]||b[f]&&0!=b[f].length&&!(a.check.chkboxType.N.indexOf("s")>-1)||u.setSonNodeCheckBox(a,b,!1),b[g]&&a.check.chkboxType.Y.indexOf("p")>-1&&u.setParentNodeCheckBox(a,b,!0),!b[g]&&a.check.chkboxType.N.indexOf("p")>-1&&u.setParentNodeCheckBox(a,b,!1)},makeChkClass:function(a,b){var c=a.data.key.checked,d=t.checkbox,e=t.radio,f="";f=b.chkDisabled===!0?d.DISABLED:b.halfCheck?d.PART:a.check.chkStyle==e.STYLE?b.check_Child_State<1?d.FULL:d.PART:b[c]?2===b.check_Child_State||-1===b.check_Child_State?d.FULL:d.PART:b.check_Child_State<1?d.FULL:d.PART;var g=a.check.chkStyle+"_"+(b[c]?d.TRUE:d.FALSE)+"_"+f;return g=b.check_Focus&&b.chkDisabled!==!0?g+"_"+d.FOCUS:g,t.className.BUTTON+" "+d.DEFAULT+" "+g},repairAllChk:function(a,b){if(a.check.enable&&a.check.chkStyle===t.checkbox.STYLE)for(var c=a.data.key.checked,d=a.data.key.children,e=v.getRoot(a),f=0,g=e[d].length;g>f;f++){var h=e[d][f];h.nocheck!==!0&&h.chkDisabled!==!0&&(h[c]=b),u.setSonNodeCheckBox(a,h,b);

}},repairChkClass:function(a,b){if(b&&(v.makeChkFlag(a,b),b.nocheck!==!0)){var c=w(b,t.id.CHECK,a);u.setChkClass(a,c,b)}},repairParentChkClass:function(a,b){if(b&&b.parentTId){var c=b.getParentNode();u.repairChkClass(a,c),u.repairParentChkClass(a,c)}},repairParentChkClassWithSelf:function(a,b){if(b){var c=a.data.key.children;b[c]&&b[c].length>0?u.repairParentChkClass(a,b[c][0]):u.repairParentChkClass(a,b)}},repairSonChkDisabled:function(a,b,c,d){if(b){var e=a.data.key.children;if(b.chkDisabled!=c&&(b.chkDisabled=c),u.repairChkClass(a,b),b[e]&&d)for(var f=0,g=b[e].length;g>f;f++){var h=b[e][f];u.repairSonChkDisabled(a,h,c,d)}}},repairParentChkDisabled:function(a,b,c,d){b&&(b.chkDisabled!=c&&d&&(b.chkDisabled=c),u.repairChkClass(a,b),u.repairParentChkDisabled(a,b.getParentNode(),c,d))},setChkClass:function(a,b,c){b&&(c.nocheck===!0?b.hide():b.show(),b.attr("class",u.makeChkClass(a,c)))},setParentNodeCheckBox:function(a,b,c,d){var e=a.data.key.children,f=a.data.key.checked,g=w(b,t.id.CHECK,a);if(d||(d=b),v.makeChkFlag(a,b),b.nocheck!==!0&&b.chkDisabled!==!0&&(b[f]=c,u.setChkClass(a,g,b),a.check.autoCheckTrigger&&b!=d&&a.treeObj.trigger(t.event.CHECK,[null,a.treeId,b])),b.parentTId){var h=!0;if(!c)for(var i=b.getParentNode()[e],j=0,k=i.length;k>j;j++)if(i[j].nocheck!==!0&&i[j].chkDisabled!==!0&&i[j][f]||(i[j].nocheck===!0||i[j].chkDisabled===!0)&&i[j].check_Child_State>0){h=!1;break}h&&u.setParentNodeCheckBox(a,b.getParentNode(),c,d)}},setSonNodeCheckBox:function(a,b,c,d){if(b){var e=a.data.key.children,f=a.data.key.checked,g=w(b,t.id.CHECK,a);d||(d=b);var h=!1;if(b[e])for(var i=0,j=b[e].length;j>i&&b.chkDisabled!==!0;i++){var k=b[e][i];u.setSonNodeCheckBox(a,k,c,d),k.chkDisabled===!0&&(h=!0)}b!=v.getRoot(a)&&b.chkDisabled!==!0&&(h&&b.nocheck!==!0&&v.makeChkFlag(a,b),b.nocheck!==!0&&b.chkDisabled!==!0?(b[f]=c,h||(b.check_Child_State=b[e]&&b[e].length>0?c?2:0:-1)):b.check_Child_State=-1,u.setChkClass(a,g,b),a.check.autoCheckTrigger&&b!=d&&b.nocheck!==!0&&b.chkDisabled!==!0&&a.treeObj.trigger(t.event.CHECK,[null,a.treeId,b]))}}},q={tools:o,view:p,event:m,data:l};a.extend(!0,a.fn.zTree.consts,b),a.extend(!0,a.fn.zTree._z,q);var r=a.fn.zTree,s=r._z.tools,t=r.consts,u=r._z.view,v=r._z.data,w=(r._z.event,s.$);v.exSetting(c),v.addInitBind(f),v.addInitUnBind(g),v.addInitCache(e),v.addInitNode(i),v.addInitProxy(h,!0),v.addInitRoot(d),v.addBeforeA(j),v.addZTreeTools(k);var x=u.createNodes;u.createNodes=function(a,b,c,d){x&&x.apply(u,arguments),c&&u.repairParentChkClassWithSelf(a,d)};var y=u.removeNode;u.removeNode=function(a,b){var c=b.getParentNode();y&&y.apply(u,arguments),b&&c&&(u.repairChkClass(a,c),u.repairParentChkClass(a,c))};var z=u.appendNodes;u.appendNodes=function(a,b,c,d){var e="";return z&&(e=z.apply(u,arguments)),d&&v.makeChkFlag(a,d),e}}(jQuery),function(a){var b={event:{DRAG:"ztree_drag",DROP:"ztree_drop",RENAME:"ztree_rename",DRAGMOVE:"ztree_dragmove"},id:{EDIT:"_edit",INPUT:"_input",REMOVE:"_remove"},move:{TYPE_INNER:"inner",TYPE_PREV:"prev",TYPE_NEXT:"next"},node:{CURSELECTED_EDIT:"curSelectedNode_Edit",TMPTARGET_TREE:"tmpTargetzTree",TMPTARGET_NODE:"tmpTargetNode"}},c={edit:{enable:!1,editNameSelectAll:!1,showRemoveBtn:!0,showRenameBtn:!0,removeTitle:"remove",renameTitle:"rename",drag:{autoExpandTrigger:!1,isCopy:!0,isMove:!0,prev:!0,next:!0,inner:!0,minMoveSize:5,borderMax:10,borderMin:-5,maxShowNodeNum:5,autoOpenTime:500}},view:{addHoverDom:null,removeHoverDom:null},callback:{beforeDrag:null,beforeDragOpen:null,beforeDrop:null,beforeEditName:null,beforeRename:null,onDrag:null,onDragMove:null,onDrop:null,onRename:null}},d=function(a){var b=u.getRoot(a),c=u.getRoots();b.curEditNode=null,b.curEditInput=null,b.curHoverNode=null,b.dragFlag=0,b.dragNodeShowBefore=[],b.dragMaskList=new Array,c.showHoverDom=!0},e=function(){},f=function(a){var b=a.treeObj,c=s.event;b.bind(c.RENAME,function(b,c,d,e){r.apply(a.callback.onRename,[b,c,d,e])}),b.bind(c.DRAG,function(b,c,d,e){r.apply(a.callback.onDrag,[c,d,e])}),b.bind(c.DRAGMOVE,function(b,c,d,e){r.apply(a.callback.onDragMove,[c,d,e])}),b.bind(c.DROP,function(b,c,d,e,f,g,h){r.apply(a.callback.onDrop,[c,d,e,f,g,h])})},g=function(a){var b=a.treeObj,c=s.event;b.unbind(c.RENAME),b.unbind(c.DRAG),b.unbind(c.DRAGMOVE),b.unbind(c.DROP)},h=function(a){var b=a.target,c=u.getSetting(a.data.treeId),d=a.relatedTarget,e="",f=null,g="",h="",i=null,j=null,k=null;if(r.eqs(a.type,"mouseover")?(k=r.getMDom(c,b,[{tagName:"a",attrName:"treeNode"+s.id.A}]),k&&(e=r.getNodeMainDom(k).id,g="hoverOverNode")):r.eqs(a.type,"mouseout")?(k=r.getMDom(c,d,[{tagName:"a",attrName:"treeNode"+s.id.A}]),k||(e="remove",g="hoverOutNode")):r.eqs(a.type,"mousedown")&&(k=r.getMDom(c,b,[{tagName:"a",attrName:"treeNode"+s.id.A}]),k&&(e=r.getNodeMainDom(k).id,g="mousedownNode")),e.length>0)switch(f=u.getNodeCache(c,e),g){case"mousedownNode":i=m.onMousedownNode;break;case"hoverOverNode":i=m.onHoverOverNode;break;case"hoverOutNode":i=m.onHoverOutNode}var l={stop:!1,node:f,nodeEventType:g,nodeEventCallback:i,treeEventType:h,treeEventCallback:j};return l},i=function(a,b,c){c&&(c.isHover=!1,c.editNameFlag=!1)},j=function(a,b){b.cancelEditName=function(a){var b=u.getRoot(this.setting);b.curEditNode&&t.cancelCurEditNode(this.setting,a?a:null,!0)},b.copyNode=function(a,b,c,d){function e(){t.addNodes(f.setting,a,-1,[g],d)}if(!b)return null;if(a&&!a.isParent&&this.setting.data.keep.leaf&&c===s.move.TYPE_INNER)return null;var f=this,g=r.clone(b);return a||(a=null,c=s.move.TYPE_INNER),c==s.move.TYPE_INNER?r.canAsync(this.setting,a)?t.asyncNode(this.setting,a,d,e):e():(t.addNodes(this.setting,a.parentNode,-1,[g],d),t.moveNode(this.setting,a,g,c,!1,d)),g},b.editName=function(a){a&&a.tId&&a===u.getNodeCache(this.setting,a.tId)&&(a.parentTId&&t.expandCollapseParentNode(this.setting,a.getParentNode(),!0),t.editNode(this.setting,a))},b.moveNode=function(a,b,c,d){function e(){t.moveNode(f.setting,a,b,c,!1,d)}if(!b)return b;if(a&&!a.isParent&&this.setting.data.keep.leaf&&c===s.move.TYPE_INNER)return null;if(a&&(b.parentTId==a.tId&&c==s.move.TYPE_INNER||v(b,this.setting).find("#"+a.tId).length>0))return null;a||(a=null);var f=this;return r.canAsync(this.setting,a)&&c===s.move.TYPE_INNER?t.asyncNode(this.setting,a,d,e):e(),b},b.setEditable=function(a){return this.setting.edit.enable=a,this.refresh()}},k={setSonNodeLevel:function(a,b,c){if(c){var d=a.data.key.children;if(c.level=b?b.level+1:0,c[d])for(var e=0,f=c[d].length;f>e;e++)c[d][e]&&u.setSonNodeLevel(a,c,c[d][e])}}},l={},m={onHoverOverNode:function(a,b){var c=u.getSetting(a.data.treeId),d=u.getRoot(c);d.curHoverNode!=b&&m.onHoverOutNode(a),d.curHoverNode=b,t.addHoverDom(c,b)},onHoverOutNode:function(a){var b=u.getSetting(a.data.treeId),c=u.getRoot(b);c.curHoverNode&&!u.isSelectedNode(b,c.curHoverNode)&&(t.removeTreeDom(b,c.curHoverNode),c.curHoverNode=null)},onMousedownNode:function(c,d){function e(c){if(0==k.dragFlag&&Math.abs(I-c.clientX)<j.edit.drag.minMoveSize&&Math.abs(J-c.clientY)<j.edit.drag.minMoveSize)return!0;var d,e,g,h,i,m=j.data.key.children;if(A.css("cursor","pointer"),0==k.dragFlag){if(0==r.apply(j.callback.beforeDrag,[j.treeId,o],!0))return f(c),!0;for(d=0,e=o.length;e>d;d++)0==d&&(k.dragNodeShowBefore=[]),g=o[d],g.isParent&&g.open?(t.expandCollapseNode(j,g,!g.open),k.dragNodeShowBefore[g.tId]=!0):k.dragNodeShowBefore[g.tId]=!1;k.dragFlag=1,l.showHoverDom=!1,r.showIfameMask(j,!0);var n=!0,D=-1;if(o.length>1){var L=o[0].parentTId?o[0].getParentNode()[m]:u.getNodes(j);for(i=[],d=0,e=L.length;e>d;d++)if(void 0!==k.dragNodeShowBefore[L[d].tId]&&(n&&D>-1&&D+1!==d&&(n=!1),i.push(L[d]),D=d),o.length===i.length){o=i;break}}for(n&&(x=o[0].getPreNode(),y=o[o.length-1].getNextNode()),p=v("<ul class='zTreeDragUL'></ul>",j),d=0,e=o.length;e>d;d++)g=o[d],g.editNameFlag=!1,t.selectNode(j,g,d>0),t.removeTreeDom(j,g),d>j.edit.drag.maxShowNodeNum-1||(h=v("<li id='"+g.tId+"_tmp'></li>",j),h.append(v(g,s.id.A,j).clone()),h.css("padding","0"),h.children("#"+g.tId+s.id.A).removeClass(s.node.CURSELECTED),p.append(h),d==j.edit.drag.maxShowNodeNum-1&&(h=v("<li id='"+g.tId+"_moretmp'><a>  ...  </a></li>",j),p.append(h)));p.attr("id",o[0].tId+s.id.UL+"_tmp"),p.addClass(j.treeObj.attr("class")),p.appendTo(A),q=v("<span class='tmpzTreeMove_arrow'></span>",j),q.attr("id","zTreeMove_arrow_tmp"),q.appendTo(A),j.treeObj.trigger(s.event.DRAG,[c,j.treeId,o])}if(1==k.dragFlag){if(w&&q.attr("id")==c.target.id&&G&&c.clientX+z.scrollLeft()+2>a("#"+G+s.id.A,w).offset().left){var M=a("#"+G+s.id.A,w);c.target=M.length>0?M.get(0):c.target}else w&&(w.removeClass(s.node.TMPTARGET_TREE),G&&a("#"+G+s.id.A,w).removeClass(s.node.TMPTARGET_NODE+"_"+s.move.TYPE_PREV).removeClass(s.node.TMPTARGET_NODE+"_"+b.move.TYPE_NEXT).removeClass(s.node.TMPTARGET_NODE+"_"+b.move.TYPE_INNER));w=null,G=null,B=!1,C=j;var N=u.getSettings();for(var O in N)N[O].treeId&&N[O].edit.enable&&N[O].treeId!=j.treeId&&(c.target.id==N[O].treeId||a(c.target).parents("#"+N[O].treeId).length>0)&&(B=!0,C=N[O]);var P=z.scrollTop(),Q=z.scrollLeft(),R=C.treeObj.offset(),S=C.treeObj.get(0).scrollHeight,T=C.treeObj.get(0).scrollWidth,U=c.clientY+P-R.top,V=C.treeObj.height()+R.top-c.clientY-P,W=c.clientX+Q-R.left,X=C.treeObj.width()+R.left-c.clientX-Q,Y=U<j.edit.drag.borderMax&&U>j.edit.drag.borderMin,Z=V<j.edit.drag.borderMax&&V>j.edit.drag.borderMin,$=W<j.edit.drag.borderMax&&W>j.edit.drag.borderMin,_=X<j.edit.drag.borderMax&&X>j.edit.drag.borderMin,aa=U>j.edit.drag.borderMin&&V>j.edit.drag.borderMin&&W>j.edit.drag.borderMin&&X>j.edit.drag.borderMin,ba=Y&&C.treeObj.scrollTop()<=0,ca=Z&&C.treeObj.scrollTop()+C.treeObj.height()+10>=S,da=$&&C.treeObj.scrollLeft()<=0,ea=_&&C.treeObj.scrollLeft()+C.treeObj.width()+10>=T;if(c.target&&r.isChildOrSelf(c.target,C.treeId)){for(var fa=c.target;fa&&fa.tagName&&!r.eqs(fa.tagName,"li")&&fa.id!=C.treeId;)fa=fa.parentNode;var ga=!0;for(d=0,e=o.length;e>d;d++){if(g=o[d],fa.id===g.tId){ga=!1;break}if(v(g,j).find("#"+fa.id).length>0){ga=!1;break}}ga&&c.target&&r.isChildOrSelf(c.target,fa.id+s.id.A)&&(w=a(fa),G=fa.id)}g=o[0],aa&&r.isChildOrSelf(c.target,C.treeId)&&(!w&&(c.target.id==C.treeId||ba||ca||da||ea)&&(B||!B&&g.parentTId)&&(w=C.treeObj),Y?C.treeObj.scrollTop(C.treeObj.scrollTop()-10):Z&&C.treeObj.scrollTop(C.treeObj.scrollTop()+10),$?C.treeObj.scrollLeft(C.treeObj.scrollLeft()-10):_&&C.treeObj.scrollLeft(C.treeObj.scrollLeft()+10),w&&w!=C.treeObj&&w.offset().left<C.treeObj.offset().left&&C.treeObj.scrollLeft(C.treeObj.scrollLeft()+w.offset().left-C.treeObj.offset().left)),p.css({top:c.clientY+P+3+"px",left:c.clientX+Q+3+"px"});var ha=0,ia=0;if(w&&w.attr("id")!=C.treeId){var ja=null==G?null:u.getNodeCache(C,G),ka=(c.ctrlKey||c.metaKey)&&j.edit.drag.isMove&&j.edit.drag.isCopy||!j.edit.drag.isMove&&j.edit.drag.isCopy,la=!(!x||G!==x.tId),ma=!(!y||G!==y.tId),na=g.parentTId&&g.parentTId==G,oa=(ka||!ma)&&r.apply(C.edit.drag.prev,[C.treeId,o,ja],!!C.edit.drag.prev),pa=(ka||!la)&&r.apply(C.edit.drag.next,[C.treeId,o,ja],!!C.edit.drag.next),qa=!(!ka&&na||C.data.keep.leaf&&!ja.isParent||!r.apply(C.edit.drag.inner,[C.treeId,o,ja],!!C.edit.drag.inner));if(oa||pa||qa){var ra=a("#"+G+s.id.A,w),sa=ja.isLastNode?null:a("#"+ja.getNextNode().tId+s.id.A,w.next()),ta=ra.offset().top,ua=ra.offset().left,va=oa?qa?.25:pa?.5:1:-1,wa=pa?qa?.75:oa?.5:0:-1,xa=(c.clientY+P-ta)/ra.height();if((1==va||va>=xa&&xa>=-.2)&&oa?(ha=1-q.width(),ia=ta-q.height()/2,H=s.move.TYPE_PREV):(0==wa||xa>=wa&&1.2>=xa)&&pa?(ha=1-q.width(),ia=null==sa||ja.isParent&&ja.open?ta+ra.height()-q.height()/2:sa.offset().top-q.height()/2,H=s.move.TYPE_NEXT):(ha=5-q.width(),ia=ta,H=s.move.TYPE_INNER),q.css({display:"block",top:ia+"px",left:ua+ha+"px"}),ra.addClass(s.node.TMPTARGET_NODE+"_"+H),(E!=G||F!=H)&&(K=(new Date).getTime()),ja&&ja.isParent&&H==s.move.TYPE_INNER){var ya=!0;window.zTreeMoveTimer&&window.zTreeMoveTargetNodeTId!==ja.tId?(clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null):window.zTreeMoveTimer&&window.zTreeMoveTargetNodeTId===ja.tId&&(ya=!1),ya&&(window.zTreeMoveTimer=setTimeout(function(){H==s.move.TYPE_INNER&&ja&&ja.isParent&&!ja.open&&(new Date).getTime()-K>C.edit.drag.autoOpenTime&&r.apply(C.callback.beforeDragOpen,[C.treeId,ja],!0)&&(t.switchNode(C,ja),C.edit.drag.autoExpandTrigger&&C.treeObj.trigger(s.event.EXPAND,[C.treeId,ja]))},C.edit.drag.autoOpenTime+50),window.zTreeMoveTargetNodeTId=ja.tId)}}else w=null,G="",H=s.move.TYPE_INNER,q.css({display:"none"}),window.zTreeMoveTimer&&(clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null)}else H=s.move.TYPE_INNER,w&&r.apply(C.edit.drag.inner,[C.treeId,o,null],!!C.edit.drag.inner)?w.addClass(s.node.TMPTARGET_TREE):w=null,q.css({display:"none"}),window.zTreeMoveTimer&&(clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null);E=G,F=H,j.treeObj.trigger(s.event.DRAGMOVE,[c,j.treeId,o])}return!1}function f(c){function d(){if(B){if(!n)for(var a=0,b=o.length;b>a;a++)t.removeNode(j,o[a]);H==s.move.TYPE_INNER?t.addNodes(C,x,-1,y):t.addNodes(C,x.getParentNode(),H==s.move.TYPE_PREV?x.getIndex():x.getIndex()+1,y)}else if(n&&H==s.move.TYPE_INNER)t.addNodes(C,x,-1,y);else if(n)t.addNodes(C,x.getParentNode(),H==s.move.TYPE_PREV?x.getIndex():x.getIndex()+1,y);else if(H!=s.move.TYPE_NEXT)for(a=0,b=y.length;b>a;a++)t.moveNode(C,x,y[a],H,!1);else for(a=-1,b=y.length-1;b>a;b--)t.moveNode(C,x,y[b],H,!1);t.selectNodes(C,y),v(y[0],j).focus().blur(),j.treeObj.trigger(s.event.DROP,[c,C.treeId,y,x,H,n])}if(window.zTreeMoveTimer&&(clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null),E=null,F=null,z.unbind("mousemove",e),z.unbind("mouseup",f),z.unbind("selectstart",g),A.css("cursor","auto"),w&&(w.removeClass(s.node.TMPTARGET_TREE),G&&a("#"+G+s.id.A,w).removeClass(s.node.TMPTARGET_NODE+"_"+s.move.TYPE_PREV).removeClass(s.node.TMPTARGET_NODE+"_"+b.move.TYPE_NEXT).removeClass(s.node.TMPTARGET_NODE+"_"+b.move.TYPE_INNER)),r.showIfameMask(j,!1),l.showHoverDom=!0,0!=k.dragFlag){k.dragFlag=0;var h,i,m;for(h=0,i=o.length;i>h;h++)m=o[h],m.isParent&&k.dragNodeShowBefore[m.tId]&&!m.open&&(t.expandCollapseNode(j,m,!m.open),delete k.dragNodeShowBefore[m.tId]);p&&p.remove(),q&&q.remove();var n=(c.ctrlKey||c.metaKey)&&j.edit.drag.isMove&&j.edit.drag.isCopy||!j.edit.drag.isMove&&j.edit.drag.isCopy;if(!n&&w&&G&&o[0].parentTId&&G==o[0].parentTId&&H==s.move.TYPE_INNER&&(w=null),w){var x=null==G?null:u.getNodeCache(C,G);if(0==r.apply(j.callback.beforeDrop,[C.treeId,o,x,H,n],!0))return void t.selectNodes(D,o);var y=n?r.clone(o):o;H==s.move.TYPE_INNER&&r.canAsync(C,x)?t.asyncNode(C,x,!1,d):d()}else t.selectNodes(D,o),j.treeObj.trigger(s.event.DROP,[c,j.treeId,o,null,null,null])}}function g(){return!1}var h,i,j=u.getSetting(c.data.treeId),k=u.getRoot(j),l=u.getRoots();if(2==c.button||!j.edit.enable||!j.edit.drag.isCopy&&!j.edit.drag.isMove)return!0;var m=c.target,n=u.getRoot(j).curSelectedList,o=[];if(u.isSelectedNode(j,d))for(h=0,i=n.length;i>h;h++){if(n[h].editNameFlag&&r.eqs(m.tagName,"input")&&null!==m.getAttribute("treeNode"+s.id.INPUT))return!0;if(o.push(n[h]),o[0].parentTId!==n[h].parentTId){o=[d];break}}else o=[d];t.editNodeBlur=!0,t.cancelCurEditNode(j);var p,q,w,x,y,z=a(j.treeObj.get(0).ownerDocument),A=a(j.treeObj.get(0).ownerDocument.body),B=!1,C=j,D=j,E=null,F=null,G=null,H=s.move.TYPE_INNER,I=c.clientX,J=c.clientY,K=(new Date).getTime();return r.uCanDo(j)&&z.bind("mousemove",e),z.bind("mouseup",f),z.bind("selectstart",g),c.preventDefault&&c.preventDefault(),!0}},n={getAbs:function(a){var b=a.getBoundingClientRect(),c=document.body.scrollTop+document.documentElement.scrollTop,d=document.body.scrollLeft+document.documentElement.scrollLeft;return[b.left+d,b.top+c]},inputFocus:function(a){a.get(0)&&(a.focus(),r.setCursorPosition(a.get(0),a.val().length))},inputSelect:function(a){a.get(0)&&(a.focus(),a.select())},setCursorPosition:function(a,b){if(a.setSelectionRange)a.focus(),a.setSelectionRange(b,b);else if(a.createTextRange){var c=a.createTextRange();c.collapse(!0),c.moveEnd("character",b),c.moveStart("character",b),c.select()}},showIfameMask:function(a,b){for(var c=u.getRoot(a);c.dragMaskList.length>0;)c.dragMaskList[0].remove(),c.dragMaskList.shift();if(b)for(var d=v("iframe",a),e=0,f=d.length;f>e;e++){var g=d.get(e),h=r.getAbs(g),i=v("<div id='zTreeMask_"+e+"' class='zTreeMask' style='top:"+h[1]+"px; left:"+h[0]+"px; width:"+g.offsetWidth+"px; height:"+g.offsetHeight+"px;'></div>",a);i.appendTo(v("body",a)),c.dragMaskList.push(i)}}},o={addEditBtn:function(a,b){if(!(b.editNameFlag||v(b,s.id.EDIT,a).length>0)&&r.apply(a.edit.showRenameBtn,[a.treeId,b],a.edit.showRenameBtn)){var c=v(b,s.id.A,a),d="<span class='"+s.className.BUTTON+" edit' id='"+b.tId+s.id.EDIT+"' title='"+r.apply(a.edit.renameTitle,[a.treeId,b],a.edit.renameTitle)+"' treeNode"+s.id.EDIT+" style='display:none;'></span>";c.append(d),v(b,s.id.EDIT,a).bind("click",function(){return r.uCanDo(a)&&0!=r.apply(a.callback.beforeEditName,[a.treeId,b],!0)?(t.editNode(a,b),!1):!1}).show()}},addRemoveBtn:function(a,b){if(!(b.editNameFlag||v(b,s.id.REMOVE,a).length>0)&&r.apply(a.edit.showRemoveBtn,[a.treeId,b],a.edit.showRemoveBtn)){var c=v(b,s.id.A,a),d="<span class='"+s.className.BUTTON+" remove' id='"+b.tId+s.id.REMOVE+"' title='"+r.apply(a.edit.removeTitle,[a.treeId,b],a.edit.removeTitle)+"' treeNode"+s.id.REMOVE+" style='display:none;'></span>";c.append(d),v(b,s.id.REMOVE,a).bind("click",function(){return r.uCanDo(a)&&0!=r.apply(a.callback.beforeRemove,[a.treeId,b],!0)?(t.removeNode(a,b),a.treeObj.trigger(s.event.REMOVE,[a.treeId,b]),!1):!1}).bind("mousedown",function(){return!0}).show()}},addHoverDom:function(a,b){u.getRoots().showHoverDom&&(b.isHover=!0,a.edit.enable&&(t.addEditBtn(a,b),t.addRemoveBtn(a,b)),r.apply(a.view.addHoverDom,[a.treeId,b]))},cancelCurEditNode:function(a,b,c){var d=u.getRoot(a),e=a.data.key.name,f=d.curEditNode;if(f){var g=d.curEditInput,h=b?b:c?f[e]:g.val();if(r.apply(a.callback.beforeRename,[a.treeId,f,h,c],!0)===!1)return!1;f[e]=h;var i=v(f,s.id.A,a);i.removeClass(s.node.CURSELECTED_EDIT),g.unbind(),t.setNodeName(a,f),f.editNameFlag=!1,d.curEditNode=null,d.curEditInput=null,t.selectNode(a,f,!1),a.treeObj.trigger(s.event.RENAME,[a.treeId,f,c])}return d.noSelection=!0,!0},editNode:function(a,b){var c=u.getRoot(a);if(t.editNodeBlur=!1,u.isSelectedNode(a,b)&&c.curEditNode==b&&b.editNameFlag)return void setTimeout(function(){r.inputFocus(c.curEditInput)},0);var d=a.data.key.name;b.editNameFlag=!0,t.removeTreeDom(a,b),t.cancelCurEditNode(a),t.selectNode(a,b,!1),v(b,s.id.SPAN,a).html("<input type=text class='rename' id='"+b.tId+s.id.INPUT+"' treeNode"+s.id.INPUT+" >");var e=v(b,s.id.INPUT,a);e.attr("value",b[d]),a.edit.editNameSelectAll?r.inputSelect(e):r.inputFocus(e),e.bind("blur",function(){t.editNodeBlur||t.cancelCurEditNode(a)}).bind("keydown",function(b){"13"==b.keyCode?(t.editNodeBlur=!0,t.cancelCurEditNode(a)):"27"==b.keyCode&&t.cancelCurEditNode(a,null,!0)}).bind("click",function(){return!1}).bind("dblclick",function(){return!1}),v(b,s.id.A,a).addClass(s.node.CURSELECTED_EDIT),c.curEditInput=e,c.noSelection=!1,c.curEditNode=b},moveNode:function(a,b,c,d,e,f){var g=u.getRoot(a),h=a.data.key.children;if(b!=c&&(!a.data.keep.leaf||!b||b.isParent||d!=s.move.TYPE_INNER)){var i=c.parentTId?c.getParentNode():g,j=null===b||b==g;j&&null===b&&(b=g),j&&(d=s.move.TYPE_INNER);var k=b.parentTId?b.getParentNode():g;d!=s.move.TYPE_PREV&&d!=s.move.TYPE_NEXT&&(d=s.move.TYPE_INNER),d==s.move.TYPE_INNER&&(j?c.parentTId=null:(b.isParent||(b.isParent=!0,b.open=!!b.open,t.setNodeLineIcos(a,b)),c.parentTId=b.tId));var l,m;if(j)l=a.treeObj,m=l;else{if(f||d!=s.move.TYPE_INNER?f||t.expandCollapseNode(a,b.getParentNode(),!0,!1):t.expandCollapseNode(a,b,!0,!1),l=v(b,a),m=v(b,s.id.UL,a),l.get(0)&&!m.get(0)){var n=[];t.makeUlHtml(a,b,n,""),l.append(n.join(""))}m=v(b,s.id.UL,a)}var o=v(c,a);o.get(0)?l.get(0)||o.remove():o=t.appendNodes(a,c.level,[c],null,-1,!1,!0).join(""),m.get(0)&&d==s.move.TYPE_INNER?m.append(o):l.get(0)&&d==s.move.TYPE_PREV?l.before(o):l.get(0)&&d==s.move.TYPE_NEXT&&l.after(o);var p,q,r=-1,w=0,x=null,y=null,z=c.level;if(c.isFirstNode)r=0,i[h].length>1&&(x=i[h][1],x.isFirstNode=!0);else if(c.isLastNode)r=i[h].length-1,x=i[h][r-1],x.isLastNode=!0;else for(p=0,q=i[h].length;q>p;p++)if(i[h][p].tId==c.tId){r=p;break}if(r>=0&&i[h].splice(r,1),d!=s.move.TYPE_INNER)for(p=0,q=k[h].length;q>p;p++)k[h][p].tId==b.tId&&(w=p);if(d==s.move.TYPE_INNER?(b[h]||(b[h]=new Array),b[h].length>0&&(y=b[h][b[h].length-1],y.isLastNode=!1),b[h].splice(b[h].length,0,c),c.isLastNode=!0,c.isFirstNode=1==b[h].length):b.isFirstNode&&d==s.move.TYPE_PREV?(k[h].splice(w,0,c),y=b,y.isFirstNode=!1,c.parentTId=b.parentTId,c.isFirstNode=!0,c.isLastNode=!1):b.isLastNode&&d==s.move.TYPE_NEXT?(k[h].splice(w+1,0,c),y=b,y.isLastNode=!1,c.parentTId=b.parentTId,c.isFirstNode=!1,c.isLastNode=!0):(d==s.move.TYPE_PREV?k[h].splice(w,0,c):k[h].splice(w+1,0,c),c.parentTId=b.parentTId,c.isFirstNode=!1,c.isLastNode=!1),u.fixPIdKeyValue(a,c),u.setSonNodeLevel(a,c.getParentNode(),c),t.setNodeLineIcos(a,c),t.repairNodeLevelClass(a,c,z),!a.data.keep.parent&&i[h].length<1){i.isParent=!1,i.open=!1;var A=v(i,s.id.UL,a),B=v(i,s.id.SWITCH,a),C=v(i,s.id.ICON,a);t.replaceSwitchClass(i,B,s.folder.DOCU),t.replaceIcoClass(i,C,s.folder.DOCU),A.css("display","none")}else x&&t.setNodeLineIcos(a,x);y&&t.setNodeLineIcos(a,y),a.check&&a.check.enable&&t.repairChkClass&&(t.repairChkClass(a,i),t.repairParentChkClassWithSelf(a,i),i!=c.parent&&t.repairParentChkClassWithSelf(a,c)),f||t.expandCollapseParentNode(a,c.getParentNode(),!0,e)}},removeEditBtn:function(a,b){v(b,s.id.EDIT,a).unbind().remove()},removeRemoveBtn:function(a,b){v(b,s.id.REMOVE,a).unbind().remove()},removeTreeDom:function(a,b){b.isHover=!1,t.removeEditBtn(a,b),t.removeRemoveBtn(a,b),r.apply(a.view.removeHoverDom,[a.treeId,b])},repairNodeLevelClass:function(a,b,c){if(c!==b.level){var d=v(b,a),e=v(b,s.id.A,a),f=v(b,s.id.UL,a),g=s.className.LEVEL+c,h=s.className.LEVEL+b.level;d.removeClass(g),d.addClass(h),e.removeClass(g),e.addClass(h),f.removeClass(g),f.addClass(h)}},selectNodes:function(a,b){for(var c=0,d=b.length;d>c;c++)t.selectNode(a,b[c],c>0)}},p={tools:n,view:o,event:l,data:k};a.extend(!0,a.fn.zTree.consts,b),a.extend(!0,a.fn.zTree._z,p);var q=a.fn.zTree,r=q._z.tools,s=q.consts,t=q._z.view,u=q._z.data,v=(q._z.event,r.$);u.exSetting(c),u.addInitBind(f),u.addInitUnBind(g),u.addInitCache(e),u.addInitNode(i),u.addInitProxy(h),u.addInitRoot(d),u.addZTreeTools(j);var w=t.cancelPreSelectedNode;t.cancelPreSelectedNode=function(a,b){for(var c=u.getRoot(a).curSelectedList,d=0,e=c.length;e>d&&(b&&b!==c[d]||(t.removeTreeDom(a,c[d]),!b));d++);w&&w.apply(t,arguments)};var x=t.createNodes;t.createNodes=function(a,b,c,d){x&&x.apply(t,arguments),c&&t.repairParentChkClassWithSelf&&t.repairParentChkClassWithSelf(a,d)};var y=t.makeNodeUrl;t.makeNodeUrl=function(a){return a.edit.enable?null:y.apply(t,arguments)};var z=t.removeNode;t.removeNode=function(a,b){var c=u.getRoot(a);c.curEditNode===b&&(c.curEditNode=null),z&&z.apply(t,arguments)};var A=t.selectNode;t.selectNode=function(a,b){var c=u.getRoot(a);return u.isSelectedNode(a,b)&&c.curEditNode==b&&b.editNameFlag?!1:(A&&A.apply(t,arguments),t.addHoverDom(a,b),!0)};var B=r.uCanDo;r.uCanDo=function(a,b){var c=u.getRoot(a);return b&&(r.eqs(b.type,"mouseover")||r.eqs(b.type,"mouseout")||r.eqs(b.type,"mousedown")||r.eqs(b.type,"mouseup"))?!0:(c.curEditNode&&(t.editNodeBlur=!1,c.curEditInput.focus()),!c.curEditNode&&(B?B.apply(t,arguments):!0))}}(jQuery);var pk=pk||{};!function(){function initDom(){this.el.css("overflow","hidden");var a=[];a.push('<div class="datagrid-inner-wrap">'),a.push('<div class="grid-hd">'),a.push("</div>"),a.push('<div class="grid-bd">'),a.push('<table cellspacing="0" cellpadding="0" class="tLight">'),a.push("<tbody>"),a.push("</tbody>"),a.push("</table>"),a.push("</div>"),a.push("</div>"),this.el.empty().append(a.join("")).append('<div class="resize-reference"></div>'),this.el.find(".grid-hd thead th").each(function(a,b){"_check"!=$(b).attr("field")&&$(b).text()&&$(b).attr("title",$(b).text())});var b=this;initGridHead.call(b),initColumnSelector.call(b),this.width=this.el.width(),this.height=this.el.height(),this.opts.fitable&&setInterval(function(){var a=b.el.width(),c=b.el.height();a==b.width&&c==b.height||!b.el.is(":visible")||(b.width=a,b.height=c,b.resize())},this.opts.checkInterval),$.browser.msie&&parseInt($.browser.version)<=6||this.el.find("table").css("width","100%"),this.opts.height=this.opts.height||this.el.height();var c=this.el.find(".grid-bd");this.opts.autoHeight?this.el.css("height","auto"):c.height(this.opts.pagination?this.opts.height-hd_height-pg_height-1:this.opts.height-hd_height-1),c.css("overflow","auto"),c.css("position","relative");{var d=this.el.find("table");d.find("thead"),d.find("tbody")}d.hasClass(this.opts.cls)||d.addClass(this.opts.cls)}function initGridHead(){var a=[];a.push('<table cellspacing="0" cellpadding="0" class="tLight">'),a.push("<thead><tr>");for(var b,c=0,d=28,e=0;e<this.opts.fields.length;e++){var f=this.opts.fields[e];f.hidden||(b=e,(void 0===f.mapping||null===f.mapping)&&(f.mapping=f.field),"_check"==f.field?d+=checkColWidth+tdPadding:"_serial"==f.field?d+=serialColWidth+tdPadding:c+=f.weight)}this.noPercentWidth=d,this.headWidth=this.el.width();for(var e=0;b>=e;e++){var g,f=this.opts.fields[e];if(!f.hidden)if("_check"==f.field)a.push('<th field="_check" class="th_check '+(0==e?"first":"")+'" idField="'+this.opts.idField+'" style="text-align:center;width:'+checkColWidth+'px"><div class="th-inner-wrap"><input type="checkbox" class="checkAll" /></div></th>');else if("_serial"==f.field)a.push('<th field="_serial" class="'+(0==e?"first":"")+'" style="text-align:center;width:'+serialColWidth+'px"><div class="th-inner-wrap">序号</div></th>');else{var h=f.weight/c*(this.headWidth-d)-tdPadding;h=Math.round(h),f.headAlign=f.headAlign||"left",g="left"==f.headAlign?'style="text-align:left;'+(b>e?"width:"+h+"px;":"")+'"':"center"==f.headAlign?'style="text-align:center;'+(b>e?"width:"+h+"px;":"")+'"':'style="text-align:right;'+(b>e?"width:"+h+"px;":"")+'"',a.push('<th class="'+(f.sortable?"sortable":"")+(0==e?" first":e==b?" last":"")+'" field="'+f.field+'" mapping="'+f.mapping+'" sortable="'+(f.sortable?"true":"false")+'" '+g+'><div class="th-inner-wrap">'+f.text+(f.sortable?'<span class="sort-icon"></span>':"")+"</div></th>")}}a.push("</tr></thead>"),a.push("</table>"),this.el.find(".grid-hd").empty().html(a.join("")),this.el.find(".grid-hd thead th").each(function(a,b){"_check"!=$(b).attr("field")&&$(b).text()&&$(b).attr("title",$(b).text())});var i=this;setTimeout(function(){generateResizeHandlers.call(i)},0)}function generateResizeHandlers(){var a=this.el.find(".grid-hd"),b=a.find("thead"),c=this;a.find(".resize-handler").remove(),b.find("th").each(function(d,e){var f=$(e).attr("field");if("_check"!=f&&"_serial"!=f&&$(e)[0]!=b.find("th:last")[0]){var g=$(e).find(".th-inner-wrap"),h=g.offset().left-c.el.offset().left+g.width()+10-1+handlerOffset;$('<div class="resize-handler" col-index="'+d+'" style="left:'+h+'px"></div>').appendTo(a)}}),refreshColWidth.call(this),dealResizeHandlerEvent.call(this)}function initColumnSelector(){function a(){d.hide(),c.animate({right:-182},200,function(){c.data("expand",!1),d.show(),d.removeClass("trigger-expand")})}this.el.append('<div class="column-selector"><div class="column-selector-head">表头项设置</div><ul class="all-columns"></ul></div><div class="column-trigger"></div>');for(var b=this.el.find(".all-columns"),c=this.el.find(".column-selector"),d=this.el.find(".column-trigger"),e=this,f=0;f<this.opts.fields.length;f++){var g=this.opts.fields[f];"_check"!=g.field&&"_serial"!=g.field&&b.append('<li><input type="checkbox" data-field="'+this.opts.fields[f].field+'" '+(g.hidden?"":'checked="checked"')+" />"+(this.opts.fields[f].text?this.opts.fields[f].text:this.opts.fields[f].field)+"</li>")}c.on("click",function(a){a.stopPropagation()}),d.on("click",function(b){if(b.stopPropagation(),c.data("expand"))a();else{var f=e.el.find(".all-columns");f.height(e.el.height()-hd_height-pg_height-1),d.hide(),c.animate({right:0},200,function(){c.data("expand",!0),d.show(),d.addClass("trigger-expand")})}}),$(document).click(function(){c.data("expand")&&a()}),b.find("li").on("click",function(){$(this).find(":checkbox")[0].click()}),b.find("li :checkbox").on("click",function(a){a.stopPropagation();for(var b,c=$(this).attr("data-field"),d=0;d<e.opts.fields.length;d++)b=e.opts.fields[d],b.field==c&&(b.hidden=!$(this).prop("checked"));initGridHead.call(e),initEvent.call(e),setTimeout(function(){showData.call(e,e.data)},0)})}function dealResizeHandlerEvent(){function a(a,b,c,d){for(var f,g,h=0;h<e.opts.fields.length;h++){var i=e.opts.fields[h];i.field==a&&(f=i),i.field==b&&(g=i)}var j=f.weight+g.weight;f.weight=Math.floor(c*j/(c+d)),g.weight=j-f.weight}var b=this.el.find(".grid-hd"),c=b.find("thead"),d=this.el.find(".grid-bd tbody"),e=this;e.el.find(".resize-handler").on("mousedown",function(b){var f=e.el.find(".resize-reference"),g=$(this),h=Math.round(g.offset().left),i=parseInt(g.attr("col-index")),j=e.el.find(".resize-handler:last").attr("col-index"),k=c.find("th:eq("+i+")"),l=c.find("th:eq("+(i+1)+")"),m=j==i?55:25;f.show(),f.css("left",b.pageX-e.el.offset().left-1),g.css("left",b.pageX-e.el.offset().left-1+handlerOffset),f.height(e.opts.pagination?e.el.height()-pg_height:e.el.height()),$(document).on({"mousemove.resize":function(a){if(k.offset().left+25<=a.pageX&&a.pageX<=l.offset().left+l.outerWidth()-m){var b=a.pageX-e.el.offset().left-1;f.css("left",b),g.css("left",b+handlerOffset)}a.preventDefault()},"mouseup.resize":function(){var b=parseInt(g.attr("col-index")),i=c.find("th:eq("+b+")"),j=i.width(),k=i.attr("field"),l=d.find("tr:first td:eq("+b+")"),m=l.width(),n=c.find("th:eq("+(b+1)+")"),o=n.width(),p=n.attr("field"),q=d.find("tr:first td:eq("+(b+1)+")"),r=q.width(),s=h-Math.round(g.offset().left);n.width(o+s),i.width(j-s),a(k,p,i.width()+tdPadding,n.width()+tdPadding),q.width(r+s),l.width(m-s),handlerReposition.call(e),f.hide(),$(document).off("mousemove.resize mouseup.resize")}})})}function handlerReposition(){var a=this;this.el.find(".resize-handler").each(function(b,c){var d=parseInt($(c).attr("col-index")),e=a.el.find(".grid-hd thead th:eq("+d+")"),f=e.find(".th-inner-wrap"),g=f.offset().left-a.el.offset().left+f.width()+10-1+handlerOffset;$(c).css("left",g)}),refreshColWidth.call(this)}function refreshColWidth(){if(this.el.is(":visible")){var a=this;this.el.find(".grid-hd thead th").each(function(b,c){var d=$(c).attr("field");a.colWidth[d]=$(c).width()})}}function resetPageInfo(a){return this.total=a,this.opts.params.limit||(this.opts.params.limit=this.opts.pageSizeList[0]),this.opts.hasTotal?(this.totalPage=a>0?a%this.opts.params.limit!=0?Math.floor(a/this.opts.params.limit)+1:a/this.opts.params.limit:1,this.opts.params.start>this.totalPage?!1:!0):!0}function initEvent(){var a=this.el.find("table"),b=a.find("thead"),c=(a.find("tbody"),this);if(b.find("th.sortable").off(),b.find("th.sortable").on("click",function(){var a=this,d="",e=$(this).attr($(this).attr("mapping")?"mapping":"field");$(a).hasClass("asc")||$(a).hasClass("desc")?$(a).hasClass("asc")?(d="desc",c.sortColIndex=b.find("th").index(a),$.extend(c.opts.params,{sortStr:e+":desc"})):(c.sortColIndex=void 0,delete c.opts.params.sortStr):(d="asc",c.sortColIndex=b.find("th").index(a),$.extend(c.opts.params,{sortStr:e+":asc"})),loadPage.call(c,function(){b.find("th.sortable").removeClass("asc").removeClass("desc"),$(a).addClass(d)})}),b.find("[field=_check]").length>0){var d=$("thead tr th.th_check :checkbox",a);c.opts.multiSelect||d.prop("disabled",!0),$("thead",a).undelegate(),$("thead",a).delegate("tr th.th_check :checkbox","change",function(){var b=$("tbody tr td.td_check :checkbox",a).not(":disabled");1==$(this).prop("checked")?b.prop("checked",!0).parents("tr").addClass("thisRow"):b.prop("checked",!1).parents("tr").removeClass("thisRow")}),$("tbody",a).delegate("tr td.td_check :checkbox","change",function(){
var b=$(this).parents("tr"),e=$("tbody tr td.td_check :checkbox",a),f=$("tbody tr td.td_check :checkbox:checked",a);c.opts.multiSelect||f.not(this).each(function(a,b){$(b).prop("checked",!1).parents("tr").removeClass("thisRow")}),1==$(this).prop("checked")?b.addClass("thisRow"):b.removeClass("thisRow"),e.length==f.length?d.prop("checked",!0):d.prop("checked",!1)})}this.opts.pagination&&(this.el.undelegate(),this.el.delegate(".pagination .pages li[page-type]","click",function(){if(!$(this).hasClass("disabled")){{var a=$(this).attr("page-type");parseInt(c.el.find(".pagination").attr("totalPage"))}switch(a){case"prev":c.opts.params.start--;break;case"next":c.opts.params.start++;break;default:c.opts.params.start=1}loadPage.call(c)}}),this.el.delegate(".pagination .pages li[page-num]","click",function(){var a=parseInt($(this).attr("page-num"));$.extend(c.opts.params,{start:a}),loadPage.call(c)}),this.el.delegate(".pagination .pages .jumpToBtn","click",function(){var a=parseInt($(this).parent().find(".jumpTo").val(),10);a=isNaN(a)?c.opts.params.start:a,$.extend(c.opts.params,{start:a}),loadPage.call(c)}),this.el.delegate(".pagination .pages .jumpTo","blur",function(){$(this).val()||$(this).val(1);var a=parseInt($(this).val());a>c.totalPage?$(this).val(c.totalPage):0>=a&&$(this).val(1)}).delegate(".pagination .pages .jumpTo","keypress",function(a){return a.which>=48&&a.which<=57||8==a.which?!0:!1}),this.el.delegate(".pagination .page-info select","change",function(){var a=parseInt($(this).val());c.opts.hasTotal?$.extend(c.opts.params,{limit:a}):$.extend(c.opts.params,{start:1,limit:a}),loadPage.call(c)}))}function loadPage(callback){var _self=this;_self.opts.onBeforeLoad(),$.fn.loading&&_self.el.loading("circle","正在加载，请稍后..."),$.ajax({url:this.opts.url,type:"post",data:this.opts.params,dataType:"text",cache:!1,success:function(response){var obj="string"==typeof response?eval("("+response+")"):response,total=obj.total||0,gridData=obj.data||[];if(!(_self.opts.hasTotal||$.isArray(gridData)&&0!=gridData.length))return _self.el.find(".pagination .pages li[page-type=next]").addClass("disabled").prop("disabled",!0),void(_self.opts.params.start>1&&_self.opts.params.start--);var result=resetPageInfo.call(_self,total);return 0==result?(_self.opts.params.start=1,void loadPage.call(_self,callback)):($(".checkAll",_self.el).removeAttr("checked"),showData.call(_self,gridData),_self.opts.pagination&&genPagination.call(_self),callback&&callback(),void _self.opts.onLoadSuccess(gridData,obj))},error:function(){alert("数据加载失败，请重试")},complete:function(){$.fn.loaded&&_self.el.loaded()}})}function showData(a){this.data=a;var b,c,d,e,f,g=[];for(e=0,len=this.opts.fields.length;e<len;e++)f=this.opts.fields[e],f.hidden||(d=e);for(e=0;e<a.length;e++){c=[],c.push("<tr "+(e%2==1?'class="even"':"")+">"),b=a[e];for(var h=0;d>=h;h++)if(f=this.opts.fields[h],!f.hidden){var i,j=this.colWidth[f.field],k="width:"+j+"px;";if(h==d&&(k=$.browser.msie&&8==$.browser.version?"width:"+(j-1+28)+"px;":""),f.align=f.align||"left",i="left"==f.align?'style="text-align:left;'+(0==e?k:"")+'"':"center"==f.align?'style="text-align:center;'+(0==e?k:"")+'"':'style="text-align:right;'+(0==e?k:"")+'"',"_serial"==f.field)c.push('<td field="'+f.field+'" style="text-align:center;'+(0==e?"width:"+j+"px":"")+'">'+((this.opts.params.start-1)*this.opts.params.limit+e+1)+"</td>");else if("_check"==f.field)c.push('<td class="td_check" field="'+f.field+'" style="text-align:center;'+(0==e?"width:"+j+"px":"")+'"><input type="checkbox" data-id="'+b[this.opts.idField]+'" /></td>');else{var l,m,n=f.renderer,o=f.title;l=n?n(b):void 0!=b[f.mapping]||null!=b[f.mapping]?b[f.mapping]:"",m="undefined"!=typeof o?"function"==typeof o?'title="'+o(b)+'"':"string"==typeof o?'title="'+o+'"':"":/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/.test(l)?'title="'+$(l).text()+'"':'title="'+l+'"',c.push('<td field="'+f.field+'" '+i+" "+m+">"+l+"</td>")}}c.push("</tr>"),g.push(c.join(""))}this.el.find(".grid-bd tbody").html(g.join("")),this.sortColIndex&&this.el.find(".grid-bd tbody td:nth-child("+(this.sortColIndex+1)+"):lt("+($.isArray(this.data)?this.data.length:0)+")").addClass("sortCol")}function genPagination(){var a=this.opts.params.start,b=[];b.push('<div class="pagination">'),b.push(this.opts.hasTotal?'<div class="page-info"><span class="amount">共'+this.total+'条</span><span class="pageNo">'+this.opts.params.start+"/"+this.totalPage+'页</span><span class="pageSize">每页显示':'<div class="page-info"><span class="pageNo">第'+this.opts.params.start+'页</span><span class="pageSize">每页显示'),b.push("<select>");for(var c=0,d=this.opts.pageSizeList.length;d>c;c++)b.push('<option value="'+this.opts.pageSizeList[c]+'" '+(this.opts.params.limit==this.opts.pageSizeList[c]?'selected="selected"':"")+">"+this.opts.pageSizeList[c]+"</option>");if(b.push("</select>"),b.push("条</span></div>"),b.push('<ul class="pages">'),b.push('<li page-type="prev" '+(1==a?'class="disabled" disabled="disabled"':"")+'><a href="javascript:void(0);" >上一页</a></li>'),this.opts.hasTotal)if(this.totalPage<=this.opts.pageNoLen)for(var c=1;c<=this.totalPage;c++)b.push("<li "+(c==a?'class="sel"':"")+'page-num="'+c+'"><a href="javascript:void(0);">'+c+"</a></li>");else{var e=Math.floor(this.opts.pageNoLen/2);if(this.opts.params.start-1<e)for(var c=1;c<=this.opts.pageNoLen;c++)b.push("<li "+(c==a?'class="sel"':"")+'page-num="'+c+'"><a href="javascript:void(0);">'+c+"</a></li>");else if(this.totalPage-this.opts.params.start<e)for(var c=this.totalPage-this.opts.pageNoLen+1;c<=this.totalPage;c++)b.push("<li "+(c==a?'class="sel"':"")+'page-num="'+c+'"><a href="javascript:void(0);">'+c+"</a></li>");else for(var c=this.opts.params.start-e;c<=this.opts.params.start+e;c++)b.push("<li "+(c==a?'class="sel"':"")+'page-num="'+c+'"><a href="javascript:void(0);">'+c+"</a></li>")}b.push('<li page-type="next" '+((this.opts.hasTotal?a==this.totalPage:0==this.data.length)?'class="disabled" disabled="disabled"':"")+'><a href="javascript:void(0);" >下一页</a></li>'),this.opts.hasTotal&&b.push('<li><div class="jump">到第<input type="text" page-type="jump" maxlength="8" value="'+a+'" class="jumpTo">页<span class="jumpToBtn active">跳转</span></div></li>'),b.push("</ul>"),b.push("</div>"),this.el.find(".pagination").remove(),this.el.find(".datagrid-inner-wrap").append(b.join(""))}var checkColWidth=24,serialColWidth=28,hd_height=33,pg_height=37,tdPadding=20,handlerOffset=-2;pk.Ajaxgrid=Component.extend({_defaultOpts:{url:"",fields:[],idField:"id",autoHeight:!0,pagination:!0,hasTotal:!0,params:{start:1,limit:20},pageSizeList:[10,20,30,40],pageNoLen:5,fitable:!0,checkInterval:100,multiSelect:!0,onBeforeLoad:function(){},onLoadSuccess:function(){}},total:0,totalPage:0,totalFieldWeight:0,noPercentWidth:0,sortColIndex:void 0,constructor:function(a){this.colWidth={},this.data=[],this.base(a),a.pageSizeList&&(this.opts.pageSizeList=a.pageSizeList),initDom.call(this),initEvent.call(this);var b=this;b.opts.url&&setTimeout(function(){loadPage.call(b)},0)},getSelectedIds:function(){var a=[];return this.el.find("tbody :checkbox:checked").each(function(b,c){a.push($(c).attr("data-id"))}),a},getSelected:function(){for(var a=[],b=this.getSelectedIds(),c=0;c<this.data.length;c++)$.inArray(this.data[c][this.opts.idField],b)>-1&&a.push(this.data[c]);return a},load:function(a){$.extend(this.opts.params,{start:1},a),loadPage.call(this)},reload:function(){loadPage.call(this)},getData:function(){return this.data},getDataById:function(a){for(var b=0;b<this.data.length;b++)if(this.data[b][this.opts.idField]==a)return this.data[b];return null},loadData:function(a){showData.call(this,a)},resize:function(){var a=this,b=this.el.width(),c=(b-this.noPercentWidth)/(this.headWidth-this.noPercentWidth);for(var d in a.colWidth)"_check"!=d&&"_serial"!=d&&(a.colWidth[d]=Math.round((a.colWidth[d]+tdPadding+1)*c-tdPadding-1));this.headWidth=b;var e=this.el.find(".grid-hd thead");e.find("th").each(function(b,c){var d=$(c).attr("field");"_check"!=d&&"_serial"!=d&&$(c)[0]!=e.find("th:last")[0]&&$(c).width(a.colWidth[d])}),handlerReposition.call(this),this.opts.height=this.el.height();var f=this.el.find(".grid-bd"),g=this.el.find(".all-columns");this.opts.autoHeight?this.el.css("height","auto"):this.opts.pagination?(f.height(this.opts.height-hd_height-pg_height-1),g.height(this.opts.height-hd_height-pg_height-1)):(f.height(this.opts.height-hd_height-1),g.height(this.opts.height-hd_height-1)),showData.call(this,this.data)}})}();var pk=pk||{};!function(){function a(){var a='<div class="grid-hd"><table cellpadding="0" cellspacing="0" style="width:100%;"><thead><tr></tr></thead></table></div><div class="grid-bd"></div><div class="resize-reference"></div>';this.el.append(a),b.call(this)}function b(){d.call(this),l.call(this),c.call(this)}function c(){h.call(this),p.call(this),q.call(this),o.call(this),r.call(this)}function d(){for(var a=this.opts.fields,b=this.el.find(".grid-hd tr"),c=[],d=0;d<a.length;d++){var g="",h="",i="text-align:left;";0==d&&(g=' class="first"'),c.push("<th"+g+' field="'+a[d].field+'">'),"_serial"==a[d].field?(i="text-align:center;",h="序号"):"_check"==a[d].field?(i="text-align:center;",h='<input type="checkbox" class="checkAll"/>'):(a[d].halign&&(i="text-align:"+a[d].halign+";"),h=a[d].text),c.push('<div style="'+i+'" class="th-inner-wrap">'),c.push(h),c.push("</div>"),c.push("</th>")}if(b.append(c.join("")),e.call(this),f.call(this),this.opts.fit||this.opts.fitable){var l=this;setInterval(function(){k.call(l)},250)}this.el.css({width:this.opts.width,height:this.opts.height,overflow:"hidden"}).find(".grid-bd").css({height:this.opts.height-b.height(),overflow:"auto"}),this.containerSize={w:this.el.width(),h:this.el.height()},b.find(".checkAll").size()>0&&(this.opts.singleSelect?b.find(".checkAll").attr("disabled",!0):j.call(this))}function e(){for(var a=this.opts.fields,b=0,c=0,d=0;d<a.length;d++)"_serial"==a[d].field?b+=t:"_check"==a[d].field?b+=u:c+=a[d].weight;this.noPercentWidth=b+a.length*v+(a.length-1),this.totalWeight=c}function f(){this.columnsWidthArray=[];for(var a=this.opts.fields,b=this.el,c=b.find(".grid-hd"),d=c.find("th"),e=b.innerWidth(),f=0,g=0;g<a.length;g++){var h,i;if("_serial"==a[g].field)h=t,f+=h;else if("_check"==a[g].field)h=u,f+=h;else if(i=a[g].weight,h=Math.round(i/this.totalWeight*(e-this.noPercentWidth)),h=h>=x?h:x,f+=h,g!=a.length-1){var j=c.find(".resize-handler[col-index="+g+"]"),k=f+v*(g+1)+g+w;j.length>0?j.css("left",k):c.append('<div class="resize-handler" col-index="'+g+'" style="left:'+k+'px"></div>')}this.columnsWidthArray.push(h),g!=a.length-1&&d.eq(g).width(h)}}function g(a){var b=this;a.each(function(){$(this).find("td").each(function(a){a!=b.columnsWidthArray.length-1&&$(this).width(b.columnsWidthArray[a])})})}function h(){var a=this;this.el.find(".grid-hd").delegate(".resize-handler","mousedown",function(b){b.preventDefault(),a.el.addClass("onDrag");var c=$(this),d=a.el.find(".resize-reference"),e=b.clientX,f=parseInt(c.css("left"),10)-w;beginX=b.pageX-a.el.offset().left-1,index=c.attr("col-index"),min=-(a.columnsWidthArray[index]-x)+beginX,max=a.columnsWidthArray[1*index+1]-x+beginX,nextX=0,c.css("left",beginX+w),d.show().css("left",beginX),$(document).on({"mousemove.resize":function(a){a.preventDefault(),nextX=a.clientX-e+beginX,nextX=Math.min(Math.max(min,nextX),max),c.css("left",nextX+w),d.css("left",nextX)},"mouseup.resize":function(){a.el.removeClass("onDrag"),d.hide(),0!=nextX&&i.call(a,index,nextX-f),$(this).off("mousemove.resize mouseup.resize")}})})}function i(a,b){b=Math.floor(b);var c=a,d=1*a+1,e=this.opts.fields,f=d==this.columnsWidthArray.length-1?!0:!1,g=e[c].weight+e[d].weight,h=this.columnsWidthArray[c];nextWidth=this.columnsWidthArray[d],totalWidth=h+nextWidth;var i=nextWidth-b,j=totalWidth-i,k=Math.round(j/totalWidth*g),l=g-k;e[c].weight=k,e[d].weight=l,this.columnsWidthArray[c]=j,this.columnsWidthArray[d]=i;var m=this.el.find(".grid-hd th");m.eq(c).width(j),f||m.eq(d).width(i),this.el.find(".gridtree-tr").each(function(){$(this).find("td:eq("+c+")").width(j),f||$(this).find("td:eq("+d+")").width(i)})}function j(){var a=this.el;a.find(".grid-hd .checkAll").on("change",function(){var b=$(this).prop("checked");b?a.find(".gridtree-tr").not(".tr-disabled").addClass("thisRow").find(".gridtree-check input").prop("checked",!0):a.find(".gridtree-tr").not(".tr-disabled").removeClass("thisRow").find(".gridtree-check input").prop("checked",!1)}),a.delegate(".gridtree-check input","change",function(){var b=($(this).prop("checked"),a.find(".gridtree-check input").length);checkedLenght=a.find(".gridtree-check :checked").length,b==checkedLenght?a.find(".grid-hd .checkAll").prop("checked",!0):a.find(".grid-hd .checkAll").prop("checked",!1)})}function k(){var a={w:this.el.width(),h:this.el.height()};this.containerSize.w!=a.w&&(f.call(this),g.call(this,this.el.find(".gridtree-tr")),this.containerSize.w=a.w),this.containerSize.h!=a.h&&(this.el.find(".grid-bd").height(this.el.height()-this.el.find(".grid-hd").height()),this.containerSize.h=a.h)}function l(){var a=this,b=this.el;$.fn.loading&&b.loading("circle","正在加载，请稍后..."),$.ajax({type:"POST",url:this.opts.url,data:this.opts.params,dataType:"text",cache:!1,success:function(c){"string"==typeof c&&(c=$.parseJSON(c)),$(".checkAll",a.el).prop("checked",!1);var d=m.call(a,c);b.find(".grid-bd").html(d),g.call(a,b.find(".gridtree-tr")),n.call(a),a.opts.onLoadSuccess()},error:function(){alert("数据加载失败，请重试")},complete:function(){$.fn.loaded&&b.loaded()}})}function m(a){var b,c,d,e,f=this.opts.fields,g=this.opts.treeField;b=$($.browser.msie&&parseInt($.browser.version)<=6?'<table cellpadding="0" cellspacing="0">':'<table cellpadding="0" cellspacing="0" style="width:100%;">'),c=$("<tbody>");for(var h=0;h<a.length;h++){var i=a[h],f=this.opts.fields,j=i.chkDisabled!==!1?"tr-disabled":"";d=$("undefined"!=typeof this.opts.idField?'<tr class="gridtree-tr '+j+'" idField="'+i[this.opts.idField]+'" level="'+this.level+'">':'<tr class="gridtree-tr '+j+'" level="'+this.level+'">'),d.data("rowData",i);for(var k=0;k<f.length;k++){var l=f[k],n="text-align:left;",o="",p="",q="",r="";if(l.field==g){for(var s=0;s<this.level;s++)q+='<span class="tree-indent"></span>';q+=i.isParent!==!1&&"undefined"!=typeof i.children?"close"==i.state?'<span class="tree-hit tree-collapsed"></span><span class="tree-icon tree-folder':'<span class="tree-hit tree-expanded"></span><span class="tree-icon tree-folder tree-folder-open':'<span class="tree-indent"></span><span class="tree-icon tree-file',r="undefined"!=typeof i.iconSkin?" "+i.iconSkin+'"></span>':"undefined"!=typeof i.icon?'" style="background:url('+i.icon+') no-repeat;"></span>':'"></span>',q+=r}"_serial"==l.field?(o='class="gridtree-serial"',n="text-align:center;"):"_check"==l.field?(o='class="gridtree-check"',q+=i.chkDisabled!==!1?'<input type="checkbox" disabled/>':'<input type="checkbox"/>',n="text-align:center;"):(q+=l.renderer?l.renderer(i):"undefined"!=typeof i[l.field]?i[l.field]:"",l.align&&(n="text-align:"+l.align+";"),l.tdClass&&(o='class="'+l.tdClass+'"')),p='<td style="'+n+'"><div '+o+">"+q+"</div></td>",d.append(p)}if(c.append(d),i.isParent!==!1&&"undefined"!=typeof i.children&&i.children.length>0){var t="";"close"==i.state&&(t="display:none;"),this.level++;var u=m.call(this,i.children);d=$('<tr style="'+t+'">'),e=$('<td style="border:0px" class="grid-child" colspan="'+this.columnsWidthArray.length+'">'),e.append(u),d.append(e),c.append(d),this.level--}}return b.append(c),b}function n(){$el=this.el,$el.find(".gridtree-tr").each(function(a){$(this).find(".gridtree-serial").text(a+1)})}function o(){var a=this;this.el.delegate(".gridtree-tr","mouseenter",function(){a.el.hasClass("onDrag")||($(this).removeClass("datagrid-row-over"),$(this).addClass("gridtree-row-over"),$(".tree-row-op-layer",$(this)).length>0&&$(".tree-row-op-layer",$(this)).css("display","block"))}).delegate(".gridtree-tr","mouseleave",function(){a.el.hasClass("onDrag")||($(this).removeClass("gridtree-row-over"),$(".tree-row-op-layer",$(this)).length>0&&$(".tree-row-op-layer",$(this)).css("display","none"))})}function p(){function a(a){var b=/tree-expanded|tree-collapsed/,c=$(this).attr("class").match(b);a&&c&&$(this).addClass(c[0]+"-hover"),!a&&c&&$(this).removeClass(c[0]+"-hover")}this.el.delegate(".tree-hit","mouseenter",function(){a.call(this,!0)}).delegate(".tree-hit","mouseleave",function(){a.call(this,!1)})}function q(){var a=this;this.el.delegate(".tree-hit","click",function(b){if(b.stopPropagation(),$(this).hasClass("tree-expanded")){var c=$(this).attr("class","tree-hit tree-collapsed").next(".tree-icon").removeClass("tree-folder-open").parents("tr:eq(0)").next("tr:not(.gridtree-tr)"),d=$(this).parents(".gridtree-tr").eq(0);c.hide(),d.data("rowData").state&&(d.data("rowData").state="close")}else{a.opts.onBeforeExpand($(this).parents("tr:eq(0)").data("rowData"));var c=$(this).attr("class","tree-hit tree-expanded").next(".tree-icon").addClass("tree-folder-open").parents("tr:eq(0)").next("tr:not(.gridtree-tr)"),d=$(this).parents(".gridtree-tr").eq(0);c.show(),d.data("rowData").state&&(d.data("rowData").state="open")}})}function r(){var a=this,b=this.el;b.delegate(".gridtree-tr:not(.tr-disabled)","click",function(){a.opts.singleSelect&&(b.find(".gridtree-tr").not(this).removeClass("thisRow").find(".gridtree-check input").prop("checked",!1),$(this).data("rowData").state&&($(this).data("rowData").state="close")),$(this).hasClass("thisRow")?($(this).removeClass("thisRow").find(".gridtree-check input").prop("checked",!1),$(this).data("rowData").state&&($(this).data("rowData").state="close"),$(this).data("rowData").children&&$(this).data("rowData").children.length>0&&$(this).next("tr:not(.gridtree-tr)").find(".gridtree-tr:not(.tr-disabled)").removeClass("thisRow").find(".gridtree-check input").prop("checked",!1)):($(this).addClass("thisRow").find(".gridtree-check input").prop("checked",!0),$(this).data("rowData").state&&($(this).data("rowData").state="open"),$(this).data("rowData").children&&$(this).data("rowData").children.length>0&&$(this).next("tr:not(.gridtree-tr)").find(".gridtree-tr:not(.tr-disabled)").addClass("thisRow").find(".gridtree-check input").prop("checked",!0))})}function s(a){var b=this.el;if(a instanceof Array){for(var c=$(),d=0;d<a.length;d++)c=c.add(s.call(this,a[d]));return recordArray}return b.find(".gridtree-tr[idField="+a+"]")}var t=25,u=24,v=20,w=-2,x=4;pk.GridTree=Component.extend({_defaultOpts:{url:"",params:{},idField:"",treeField:"",fit:!1,fitable:!1,height:"auto",width:"auto",singleSelect:!0,onBeforeExpand:function(){},onLoadSuccess:function(){}},level:0,noPercentWidth:0,columnsWidthArray:[],totalWeight:0,containerSize:{},constructor:function(b){this.base(b),a.call(this)},load:function(a){$.extend(this.opts.params,a,{start:1}),l.call(this)},reload:function(){this.level=0,l.call(this)},append:function(a){if(a instanceof Array)for(var b=0;b<a.length;b++)this.append(a[b]);else{var c=null,d=this.el,e=null;if("undefined"!=typeof a.parent&&(e=d.find(".gridtree-tr[idField="+a.parent+"]")).size()>0)if(this.level=parseInt(e.attr("level"))+1,c=m.call(this,a.data),$childTr=e.next("tr:not(.gridtree-tr)"),$childTr.size()>0){var f=c.children("tbody").html();$childTr.find("tbody").append(f)}else{var h=$('<tr><td style="border:0px" class="grid-child" colspan="'+this.columnsWidthArray.length+'">');h.find("td").append(c),e.after(h);var i=e.find(".tree-icon");i.hasClass("tree-file")&&i.attr("class","tree-icon tree-folder tree-folder-open "+this.opts.iconClass).prev(".tree-indent").replaceWith('<span class="tree-hit tree-expanded"></span>')}else this.level=0,c=m.call(this,a.data),d.find(".grid-bd>table>tbody").append(c.children("tbody").html());g.call(this,c.find(".gridtree-tr")),n.call(this),$(".checkAll",d).removeAttr("checked")}},getSelected:function(){var a=[],b=this.el;return b.find(".thisRow").each(function(){a.push($(this).data("rowData"))}),a},select:function(a){var b=s.call(this,a);b.addClass("thisRow").find(".gridtree-check input").prop("checked",!0)},getNext:function(a){var b=s.call(this,a),c=$(b.nextAll(".gridtree-tr")[0]);return c.size()>0?c.data("rowData"):null},getPrev:function(a){var b=s.call(this,a),c=$(b.prevAll(".gridtree-tr")[0]);return c.size()>0?c.data("rowData"):null},expandAll:function(){var a=$(".grid-bd",this.el);a.find("tr:not(.gridtree-tr)").show(),a.find(".tree-hit").attr("class","tree-hit tree-expanded"),a.find(".gridtree-tr").each(function(a,b){$(b).find(".tree-icon").hasClass("tree-folder-open")||($(b).find(".tree-icon").addClass("tree-folder-open"),$(b).data("rowData").state&&($(b).data("rowData").state="open"))})},collapseAll:function(){var a=$(".grid-bd",this.el);a.find("tr:not(.gridtree-tr)").hide(),a.find(".tree-hit").attr("class","tree-hit tree-collapsed"),a.find(".gridtree-tr").each(function(a,b){$(b).find(".tree-icon").hasClass("tree-folder-open")&&($(b).find(".tree-icon").removeClass("tree-folder-open"),$(b).data("rowData").state&&($(b).data("rowData").state="close"))})},getRowData:function(a){var b=s.call(this,a);return b.data("rowData")},getAllTrsData:function(){var a=$(".grid-bd",this.el),b=[];return a.find(".gridtree-tr").each(function(a,c){b.push($(c).data("rowData"))}),b}})}();var pk=pk||{};!function(){function a(){var a=this;a.$element=$(this.el),a.$element.delegate(".pagination-text","focus.pagination",function(){$(this).css("border-color","#217ef2")}),a.$element.delegate(".pagination-text","blur.pagination",function(){$(this).css("border-color","")}),a.$element.delegate(".pagination-spec","click",function(){var b=$(this),c=parseInt(b.attr("data-page"));i.call(a,c),a.opts.paged(a.opts.currentPage)}),a.$element.delegate("a.pagination-prev,a.pagination-prev-simple,a.pagination-prev-imgX,a.pagination-prev-imgY","click",function(){var b=a.opts.currentPage-1;i.call(a,b),a.opts.paged(a.opts.currentPage)}),a.$element.delegate("a.pagination-next,a.pagination-next-simple,a.pagination-next-imgX,a.pagination-next-imgY","click",function(){var b=a.opts.currentPage+1;i.call(a,b),a.opts.paged(a.opts.currentPage)}),a.$element.delegate(".pagination-jump","click",function(){var b=parseInt($.trim(a.$element.find(".pagination-text").val()),10);return isNaN(b)||1>b||b>a.opts.maxPage?(i.call(a,a.opts.currentPage),!1):(i.call(a,b),void a.opts.paged(a.opts.currentPage))}),a.$element.delegate("[class^=pagination-next], [class^=pagination-prev]","selectstart drag",function(){return!1}),b.call(this)}function b(){var a=this;a.$element=$(this.el);var b="",h=a.opts.styleType;switch(h){case"default_css":b=c.call(a,a,b),b+='<span class="pagination-wrap"><span class="pagination-totalPages">共'+a.opts.maxPage+'页</span>向第 </span><input class="pagination-text" type="text" /><span class="pagination-wrap">页</span><a class="pagination-jump">跳转</a><div class="clear"></div>',a.$element.html(b);break;case"bigData_css":b=d.call(a,a,b),a.$element.html(b);break;case"timer_css":b=c.call(a,a,b),b+='<div class="pagination-right"><span class="pagination-searchInfo">为您找到相关结果0条，用时0毫秒</span></div><div class="clear"></div>',a.$element.html(b);break;case"grid_css":b='<span class="pagination-wrap pagination-totalNum">共'+a.opts.paginationTotalNum+'条</span><span class="pagination-wrap pagination-currentPageOfMaxPage">'+a.opts.currentPage+"/"+a.opts.maxPage+'页</span><span class="pagination-wrap pagination-EachPageShows">每页显示20条</span><div class="pagination-right">'+c.call(a,a,b),b+='<span class="pagination-wrap"><span class="pagination-wrap">&nbsp;向第 </span><input class="pagination-text" type="text" /><span class="pagination-wrap">页</span><a class="pagination-jump">跳转</a></div><div class="clear"></div>',a.$element.html(b);break;case"simple_css":b=c.call(a,a,b,!0),a.$element.html(b);break;case"noPage_css":b=e.call(a,a,b),a.$element.html(b);break;case"imgX_css":b=f.call(a,a,b),a.$element.html(b);break;case"imgY_css":b=g.call(a,a,b),a.$element.html(b)}}function c(a,b,c){if(b+=c?1===a.opts.currentPage?'<span class="pagination-prev-simple"><i class="icon5-10 i-prev-simple"></i></span>':'<a class="pagination-prev-simple"><i class="icon5-10 i-prev-simple"></i></a>':1===a.opts.currentPage?'<span class="pagination-prev">上一页</span>':'<a class="pagination-prev">上一页</a>',a.opts.currentPage<=a.opts.firstPagesCount+a.opts.preposePagesCount+1)for(var d=1;d<a.opts.currentPage;d++)b+=h(d);else{for(var d=1;d<=a.opts.firstPagesCount;d++)b+=h(d);b+='<span class="pagination-break">...</span>';for(var d=a.opts.currentPage-a.opts.preposePagesCount;d<=a.opts.currentPage-1;d++)b+=h(d)}if(b+='<span class="pagination-current">'+a.opts.currentPage+"</span>",a.opts.currentPage>=a.opts.maxPage-a.opts.lastPagesCount-a.opts.postposePagesCount)for(var d=a.opts.currentPage+1;d<=a.opts.maxPage;d++)b+=h(d);else{for(var d=a.opts.currentPage+1;d<=a.opts.currentPage+a.opts.postposePagesCount;d++)b+=h(d);b+='<span class="pagination-break">...</span>';for(var d=a.opts.maxPage-a.opts.lastPagesCount+1;d<=a.opts.maxPage;d++)b+=h(d)}return c?(b+=a.opts.currentPage===a.opts.maxPage?'<span class="pagination-next-simple"><i class="icon5-10 i-next-simple"></i></span>':'<a class="pagination-next-simple"><i class="icon5-10 i-next-simple"></i></a>',b+='<div class="clear"></div>'):b+=a.opts.currentPage===a.opts.maxPage?'<span class="pagination-next">下一页</span>':'<a class="pagination-next">下一页</a>',b}function d(a,b){return b='<div class="pagination-right"><span class="pagination-wrap pagination-currentPageOfMaxPage">'+a.opts.currentPage+"/"+a.opts.maxPage+"页</span>",b+=1===a.opts.currentPage?'<span class="pagination-prev">上一页</span>':'<a class="pagination-prev">上一页</a>',b+=a.opts.currentPage===a.opts.maxPage?'<span class="pagination-next">下一页</span>':'<a class="pagination-next">下一页</a>',b+='<span class="pagination-wrap"><span class="pagination-wrap">&nbsp;向第 </span><input class="pagination-text" type="text" /><span class="pagination-wrap">页</span><a class="pagination-jump">跳转</a></div><div class="clear"></div>'}function e(a,b){return b='<span class="pagination-wrap pagination-totalNum">共'+a.opts.paginationTotalNum+'条</span><div class="pagination-right">',b+=1===a.opts.currentPage?'<span class="pagination-prev-simple"><i class="icon5-10 i-prev-simple"></i></span>':'<a class="pagination-prev-simple"><i class="icon5-10 i-prev-simple"></i></a>',b+=a.opts.currentPage===a.opts.maxPage?'<span class="pagination-next-simple"><i class="icon5-10 i-next-simple"></i></span>':'<a class="pagination-next-simple"><i class="icon5-10 i-next-simple"></i></a>',b+='</div><div class="clear"></div>'}function f(a,b){return b=1===a.opts.currentPage?'<span class="pagination-prev-imgX"><i class="icon8-17 i-prev-imgX"></i></span>':'<a class="pagination-prev-imgX"><i class="icon8-17 i-prev-imgX"></i></a>',b+=a.opts.currentPage===a.opts.maxPage?'<span class="pagination-next-imgX"><i class="icon8-17 i-next-imgX"></i></span>':'<a class="pagination-next-imgX"><i class="icon8-17 i-next-imgX"></i></a>',b+='</div><div class="clear"></div>'}function g(a,b){return b=1===a.opts.currentPage?'<span class="pagination-prev-imgY"><i class="icon17-8 i-prev-imgY"></i></span>':'<a class="pagination-prev-imgY"><i class="icon17-8 i-prev-imgY"></i></a>',b+=a.opts.currentPage===a.opts.maxPage?'<span class="pagination-next-imgY clear"><i class="icon17-8 i-next-imgY"></i></span>':'<a class="pagination-next-imgY clear"><i class="icon17-8 i-next-imgY"></i></a>',b+='</div><div class="clear"></div>'}function h(a){return'<a class="pagination-spec" data-page="'+a+'">'+a+"</a>"}function i(a){this.opts.currentPage=a,b.call(this)}pk.Pagination=Component.extend({_defaultOpts:{currentPage:1,maxPage:null,paginationTotalNum:null,preposePagesCount:2,postposePagesCount:1,firstPagesCount:2,lastPagesCount:1,styleType:"default_css",paged:function(){}},constructor:function(b){this.base(b),a.call(this)},setPageParam:function(a){var c=this;c.$element=$(this.el),void 0!=a.paginationTotalNum&&(c.opts.paginationTotalNum=a.paginationTotalNum,b.call(this)),void 0!=a.maxPage&&(c.opts.maxPage=a.maxPage,b.call(this)),void 0!=a.currentPage?(c.opts.currentPage=a.currentPage,b.call(this)):(c.opts.currentPage=1,b.call(this))},getCurrentPage:function(){return this.opts.currentPage}})}();var pk=pk||{};!function(){pk.Progress=Component.extend({constructor:function(a){this.base(a);var b=[];b.push('<div class="progress">'),b.push('<div class="progressbar"><div class="bar"></div></div>'),b.push('<div class="elapsed">等待中...</div>'),b.push('<div class="percent"><b>0%</b></div>'),b.push("</div>"),this.el.append(b.join("")),this.el.find(".bar").width(0)},update:function(a,b){this.el.find(".progressbar .bar").animate({width:a+"%"},100),this.el.find(".percent b").html(a+"%"),this.el.find(".elapsed").html(b),this.el.find(".progress").removeClass("success failure")},success:function(a){this.el.find(".progressbar .bar").animate({width:"100%"},100),this.el.find(".percent b").html("100%"),this.el.find(".elapsed").html(a),this.el.find(".progress").addClass("success")},fail:function(a){this.el.find(".progressbar .bar").animate({width:"100%"},100),this.el.find(".percent b").html("&nbsp;"),this.el.find(".elapsed").html(a),this.el.find(".progress").addClass("failure")}})}(jQuery);